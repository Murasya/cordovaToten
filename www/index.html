<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/toolbar.css">
  <link rel="stylesheet" href="css/hamberger.css">
  <link rel="stylesheet" href="css/analyze.css">
  <link rel="stylesheet" href="css/question.css">
  <link rel="stylesheet" href="css/tenchan.css">
  <link rel="stylesheet" href="css/overlay.css">
  <link rel="stylesheet" href="css/tutorial.css">
  <link rel="stylesheet" href="css/result.css">
  <link rel="stylesheet" href="css/recode.css">
  <link rel="stylesheet" href="css/feedback.css">
  <link rel="stylesheet" href="css/register.css">
  <link rel="stylesheet" href="css/account.css">
  <link rel="stylesheet" href="css/password-reset.css">
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-firestore.js"></script>
  <!-- Vue.js-->
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="js/app.js"></script>
</head>
<body>
  <ons-navigator swapable id="myNavigator" page="index.html"></ons-navigator>
</body>
</html>

<template id="index.html">
  <ons-page id="index">
    <div class="background" style="background-color: #FFFFFF;"></div>
    <div class="content" v-cloak>
      <div v-if="!tutorialFinish">
        <a @click="goTutorial"><img class="logo" src="images/ダウンロード後_シンボル_顔なし.png"></a>
      </div>
      <div v-else>
        <header v-show="currentUser != null">
          <div :class="{ menu_btn: true, open_: menuFlag }" @click="naviOpen">
            <span class="menu_trigger">
              <span></span><span></span><span></span>
            </span>
          </div>
        </header>
        <transition>
          <div class="nav" v-show="menuFlag">
            <input type="checkbox" id="acd-check1" class="acd-check">
            <label for="acd-check1" class="acd-label">OPTIONS </label>
            <div class="acd-content">
              <a @click="urlClick">利用規約</a>
              <a @click="urlClick">プライバシー<br>ポリシー</a>
              <a @click="goFeedback">フィードバック</a>
              <a @click="goTutorial">チュートリアル</a>
            </div>
            <a @click="logoutButtonClick" class="signout">SIGN OUT</a>
          </div>
        </transition>
        
        <div v-show="loading">
          <div id="notSignIn" v-if="currentUser == null">
            <p><img class="logo" src="./images/サインイン前_シンボル.png" alt="ロゴ"></p>
            <!--<a @click="loginButtonClick"><img class="img-button" src="images/各種ボタン/signin_ボタン.png"></a>-->
            <input type="image" class="img-button" src="./images/各種ボタン/signin_ボタン.png" @click="loginButtonClick"><br>
            <a @click="signUpButtonClick"><img class="img-button" src="images/各種ボタン/register_ボタン.png"></a>
          </div>
          <div id="isSignIn" v-else>
            <a @click="goAnalyze"><img class="logo" src="./images/home_シンボル.png" alt="ロゴ"></a>
            <p style="color: #7B7B7B; margin: 0;">Recents</p>
            <div class="recode" v-if="recent.length!=0">
              <a v-for="data in recent" class="data" @click="onDataButton(data)">
                <span>{{ data.timestamp.getFullYear() }}/{{ ('0'+(data.timestamp.getMonth()+1)).slice(-2) }}/{{ data.timestamp.getDate() }}</span>
                <p>{{ data.answers[0] }}</p>
                <hr>
              </a>
            </div>
            <div v-else>
              <p style="padding: 80px 0;">まだ記録がありません。</p>
            </div>
          </div>
        </div>
        <my-toolbar v-show="currentUser != null"></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function() {
        sBanner();
        var vue = new Vue({
          el: '#index',
          data: {
            currentUser: firebase.auth().currentUser,
            recent: [],
            menuFlag: false,
            tutorialFinish: localStorage.getItem('tutorial_finished'),
            loading: true,
          },
          created: function() {
            console.log("created");
          },
          methods: {
            loginButtonClick: function () {
              hBanner();
              document.getElementById("myNavigator").pushPage('account.html');
            },
            signUpButtonClick: function () {
              hBanner();
              document.getElementById("myNavigator").pushPage('register.html');
            },
            logoutButtonClick: function () {
              firebase.auth().signOut();
              this.menuFlag = false;
            },
            naviOpen: function() {
              this.menuFlag = !this.menuFlag;
            },
            onDataButton: function(data) {
              hBanner();
              if (data.complete) {
                document.getElementById("myNavigator").pushPage('result.html', {
                  data: {
                    qAndA: data,
                    recode: true,
                  }
                });
              } else {
                document.getElementById("myNavigator").pushPage('question.html', {
                  data: {
                    qAndA: data,
                  }
                });
              }
            },
            goTutorial: function() {
              hBanner();
              document.getElementById("myNavigator").pushPage('explain.html');
            },
            goAnalyze: function() {
              document.getElementById("myNavigator").resetToPage('analyze.html');
            },
            goFeedback: function() {
              hBanner();
              document.getElementById("myNavigator").pushPage('feedback.html');
            },
            urlClick: function() {
              window.open("https://noteappm.wixsite.com/policies", "_self", "location=yes");
              //openUrl("https://noteappm.wixsite.com/policies", true);
              //cordova.InAppBrowser.open('http://apache.org', '_blank', 'location=yes');
            }
          },
        });
        firebase.auth().onAuthStateChanged(user => {
          if(user) {
            vue.recent = getQuestionAndAnswer(2);
            vue.currentUser = user.uid;
            console.log(vue.currentUser);
            vue.loading = true;
          } else {
            vue.currentUser = null;
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="account.html">
  <ons-page id="account">
    <div id="signIn" class="account">
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start; margin-left: 30px;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <p class="account__title">SIGN IN</p>
      <div class="account__form">
        <input type="email" class="account__input" v-model="email" placeholder="メールアドレス">
        <input type="password" class="account__input" v-model="password" placeholder="パスワード">
        <a class="account__go-btn" @click="onLoginAccount"><img src="images/各種ボタン/signin実行_ボタン.png" width="50px"></a>
        <!-- <hr>
        <button @click="onTwitterAccount" class="twitter_login"><ons-icon icon="fa-twitter"></ons-icon> Twitterアカウントでサインイン</button>
        <button @click="onGoogleAccount" class="google_login"><ons-icon icon="fa-google"></ons-icon> Googleアカウントでサインイン</button> -->
      </div>
      <a class="account__forgot-pass" @click="onForgotPassword">パスワードを忘れた場合</a>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm_a = new Vue({
          el: '#signIn',
          data: {
            email: "",
            password: ""
          },
          methods: {
            onLoginAccount: function() {
              firebase.auth().signInWithEmailAndPassword(this.email, this.password)
                .then(function () {
                  ons.notification.toast('ログイン成功', { timeout: 1000, animation: 'fall'});
                  document.querySelector('#myNavigator').popPage();
                }).catch(function(error) {
                  ons.notification.toast(error.message, { timeout: 1000, animation: 'fall'});
                });
            },
            onTwitterAccount: function() {
              
            },
            onGoogleAccount: function() {
              //signInWithGoogle();
            },
            onForgotPassword: function() {
              document.getElementById("myNavigator").pushPage('password_reset.html');
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze.html">
  <ons-page id="analyze">
    <div class="background analyze__background"></div>
    <div class="content">
      <div id="analyzeVue" v-cloak class="analyze">
        <img class="tenchan__lefttop" src="./images/分析中_キャラ.png">
        <img src="images/吹き出し/分析_吹き出し(analyze).png" class="tenchan__comment">
        <input class="analyze__thema" type="text" v-model="theme" placeholder="テーマを入力">
        <div>
          <select v-model="cat[0]" class="analyze__category">
            <option disabled value="">カテゴリ</option>
            <option v-for="n in categories" :value="n">{{ n }}</option>
          </select>
          <select v-model="cat[1]" class="analyze__category">
            <option disabled value="">カテゴリ</option>
            <option v-for="n in categories" :value="n">{{ n }}</option>
          </select>
          <select v-model="cat[2]" class="analyze__category">
            <option disabled value="">カテゴリ</option>
            <option v-for="n in categories" :value="n">{{ n }}</option>
          </select>
        </div>
        <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png" width="40px"></a>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        sBanner();
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            categories: [
              "夢",
              "欲しいもの",
              "就活",
              "研究",
              "進路",
              "将来",
              "勉強",
              "スキルアップ",
              "ゼミ",
              "読書",
              "資格",
              "サークル",
              "部活",
              "人間関係",
              "趣味",
              "自己分析",
              "1週間後",
              "1年後",
              "10年後",
              "その他",
            ],
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme == "") {
                ons.notification.toast('テーマが入力されていません', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.length == 0) {
                ons.notification.toast('カテゴリを1～3つ選択してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.existsSameValue(this.category)) {
                ons.notification.toast('同じカテゴリが選択されています', {timeout: 2000, animation: "fall"});
                return;
              }
              qAndA.questions.push("取り組みたいこと/叶えたいこと");
              qAndA.answers.push(this.theme);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = this.category;
              qAndA.id = setNewData(qAndA);
              localStorage.setItem("tutorial_finished", "true");
              hBanner();
              document.querySelector('#myNavigator').replacePage('start.html', {
                data: {
                  qAndA: qAndA
                }
              });
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            closeModal: function() {
              this.showHelpModal = false;
            },
            existsSameValue: function(a) {
              var s = new Set(a);
              return s.size != a.length;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_tutorial.html">
  <ons-page id="analyze">
    <div class="background analyze__background"></div>
    <div class="content">
      <div id="analyzeVue" v-cloak class="analyze">
        <img class="tenchan__lefttop" src="./images/分析中_キャラ.png">
        <button @click="showSkipModal = true" class="tutorial__skip">SKIP</button>
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(analyze_tutorial).png">
        <input class="analyze__thema" type="text" v-model="theme" placeholder="英会話を学びたい">
        <div>
          <select v-model="cat[0]" class="analyze__category">
            <option disabled value="">カテゴリ</option>
            <option v-for="n in categories" :value="n">{{ n }}</option>
          </select>
          <select v-model="cat[1]" class="analyze__category">
            <option disabled value="">カテゴリ</option>
            <option v-for="n in categories" :value="n">{{ n }}</option>
          </select>
          <select v-model="cat[2]" class="analyze__category">
            <option disabled value="">カテゴリ</option>
            <option v-for="n in categories" :value="n">{{ n }}</option>
          </select>
        </div>
        <img class="tutorial__analyze" src="images/チュートリアル_説明1.png">
        <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        <a @click="helpButtonClick" class="analyze__help-button"><img src="./images/各種ボタン/help_ボタン.png" alt="ヘルプボタン" width="30px"></a>
        <skip-modal v-if="showSkipModal" @close="showSkipModal = false"></skip-modal>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            showHelpModal: false,
            categories: [
              "夢",
              "欲しいもの",
              "就活",
              "研究",
              "進路",
              "将来",
              "勉強",
              "スキルアップ",
              "ゼミ",
              "読書",
              "資格",
              "サークル",
              "部活",
              "人間関係",
              "趣味",
              "自己分析",
              "1週間後",
              "1年後",
              "10年後",
              "その他",
            ],
            showSkipModal: false,
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme != "英会話を学びたい") {
                ons.notification.toast('テーマに「英会話を学びたい」と入力してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.includes("勉強") && this.category.includes("スキルアップ") && this.category.length === 2) {
                document.querySelector('#myNavigator').pushPage('start.html');
                localStorage.setItem('tutorial_finished', false);
                return ;
              }
              ons.notification.toast('「勉強」と「スキルアップ」のカテゴリを選んで下さい', {timeout: 2000, animation: "fall"});
            },
            helpButtonClick: function() {
              ons.notification.toast('チュートリアルではヘルプを表示できません', {timeout: 1000, animation: "fall"});
            },
            closeModal: function() {
              this.showHelpModal = false;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="check_tutorial.html">
  <ons-page>
    <div id="check_tutorial">
      <p>チュートリアルはホーム画面の<br>OPTIONSからいつでも確認できます。</p>
      <button @click="goIndex">OK</button>
    </div>
    <script>
      new Vue({
        el: '#check_tutorial',
        methods: {
          goIndex: function() {
            localStorage.setItem("tutorial_finished", "true")
            document.getElementById('myNavigator').resetToPage('index.html');
          }
        }
      })
    </script>
  </ons-page>
</template>

<template id="finish_tutorial.html">
  <ons-page>
    <div id="finish_tutorial">
      <img src="images/チュートリアル_練習お疲れさま_キャラ.png">
      <p>練習お疲れさまテン！<br>これでキミも "分析" マスターだテン！</p>
      <button onclick="onButton()">練習を終了する</button>
    </div>
    <script>
      function onButton() {
        localStorage.setItem("tutorial_finished", "true");
        document.getElementById("myNavigator").resetToPage('index.html');
      }
    </script>
  </ons-page>
</template>

<template id="explain.html">
  <ons-page id="explain">
    <div id="explainVue">
      <ons-tabbar swipeable hide-tabs>
        <ons-tab page="tab1.html" active></ons-tab>
        <ons-tab page="tab2.html"></ons-tab>
      </ons-tabbar>
    </div>
  </ons-page>
</template>

<template id="tab1.html">
  <ons-page>
    <div class="explain-page">
      <img src="images/explain_tab1.png" class="back">
      <div style="height: 70px;"></div>
    </div>
  </ons-page>
</template>

<template id="tab2.html">
  <ons-page>
    <div class="explain-page" id="tab2">
      <img src="images/explain_tab2.png" class="back">
      <a @click="onClick" style="margin-top: 30px;"><img src="images/機能説明_次へボタン.png" width="50px"></a>
    </div>
    <script>
      var vm = new Vue({
        el: '#tab2',
        methods: {
          onClick: function() {
            document.getElementById("myNavigator").pushPage('ready.html');
          }
        }
      })
    </script>
  </ons-page>  
</template>

<template id="feedback.html">
  <ons-page>
    <div class="background" style="background-color: #F7F7F7;"></div>
    <div id="feedback" v-cloak>
      <div class="feedback__head">
        <a class="feedback__cancel" @click="popBack"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
        <h1 class="feedback__head--h1">フィードバック</h1>
      </div>
      <form class="feedback__form">
        <p class="feedback__exp">サービス・使い方に関して気になることや改善すべき点に<br>ついて、下記フォームへご記入ください。</p>    
        <textarea class="feedback__textarea" v-model="text"></textarea>
        <button class="feedback__submit" @click="sendMail">送信</button>
      </form>
      <div class="feedback__overlay" v-show="showModal" @click="closeModal">
        <div>
          <a @click="closeModal"><ons-icon icon="fa-window-close"></ons-icon></a>
          <h2>ありがとうございます。</h2>
          <p>フィードバックを送信しました。</p>
        </div>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: "#feedback",
          data: {
            showModal: false,
            text: "",
          },
          methods: {
            popBack: function() {
              document.getElementById("myNavigator").popPage();
            },
            closeModal: function() {
              this.showModal = false;
            },
            sendMail: function() {
              createFeedback(this.text);
              this.showModal = true;
            }
          }
        })
      }
    </script>
  </ons-page>
</template>

<template id="help.html">
  <ons-page>
    <div id="help">
      <div class="header">
        <img class="cartoon" src="images/ヘルプ_キャラ.png">
        <div class="speech-box">
          <img src="images/吹き出し/ヘルプ_吹き出し.png">
        </div>
        <div class="links">
          <a href="#1">▶︎やりたいことが挙げられない</a>
          <a href="#2">▶︎掘り下げ方がわからない</a>
          <a href="#3">▶︎ハッとしない</a>
          <a href="#4">▶︎真因から悩んでしまう</a>
        </div>
        <a @click="back" class="popback"><img src="images/各種ボタン/help-back_ボタン.png"></a>
      </div>
      <div class="help-content">
        <h1>使い方</h1>
        <div>
          使い方でわかりにくいポイントを説明します<br><br>
          Q: “内” と “外” ってなに？<br><br>
          <span>A</span>: “外” ＝環境要因や一般的な事実、 “内” =自分<br>
          の気持ちや想い<br>
          アプリでは“外”は1回タップで水色、 “内” は2回<br>
          タップで青色です！<br><br>
          ＜外の例＞まわりの人の影響、マスメディア、世の<br>
          中の一般的な常識<br>
          ＜内の例＞自分の感情、自分が良いと感じること<br><br>
          なぜ？と深堀をしていくと、「友達に言われたから」<br>
          「大学がそういうものだから」と環境の要因にたど<br>
          り着いてしまうことがよくあります！ “外” 側ばか<br>
          りを見ていると、取り組みたいことの実現には近づ<br>
          かないので、“内”側を見ていくことが大切です！<br><br>
          ＜悪い例①＞バイクが欲しい→バイクが便利だから<br>
          →バイクは早いから→バイクはエンジンを積んでい<br>
          るから<br>
          ＜悪い例②＞医者になりたい→親や先生に勧められ<br>
          たから→医者が安定する職業だから<br><br>
          Q: “外” か “内” かわからない<br><br>
          <span>A</span>:どれが “外” か “内” かは決まっていません。一<br>
          般的な事実であっても、自分にとっては “内” 側だ<br>
          なあとか、育ってきた環境が “内” 側を形成してい<br>
          ることがあると思います！<br>
        </div>
        <h1 id="1">やりたいことが挙げられない</h1>
        <div>
          Q:やりたいことが思いつかない…<br><br>
          <span>A</span>:大きな夢とかを考えなくても！学びたい学問、読みたい本、やりたい趣味を考えてみましょう。<br>例:経済学を学びたい！/ハムレットが読みたい！/ダイビングライセンスを取りたい！<br><br>
          Q:大きな夢を考えてみたい<br><br>
          <span>A</span>:自分の願望に素直になって想像を膨らませていきましょう！<br>
          例:どんな家に住みたいのか/どんな人と結婚してみたいか/いつ結婚したいか/家族のために何をしたいか/社会のために何をしたいのか/どんな車に乗りたいのか<br><br>
          Q:小さいやりたいことor大きいやりたいことしか思いつかず、中くらいの現実的なことが出てこない<br><br>
          <span>A</span>:明日の自分がどうなっていたいか、1週間後の自分がどうなっていたいか、1か月後の自分がどうなっていたいか、1年後…と順番に考えていこう。
        </div>  
        <h1 id="2">掘り下げ方がわからない</h1>
        <div>
          Q:なんで？って聞かれても…<br><br>
          <span>A</span>:そうですよね！難しい！それを考えることに価値があります。<br>
          <span>A</span>:自問自答するためには、適切な問いを探すことも重要です！環境に対してなら、その人の意図は？とかまわりの人の思考に想いを馳せても！<br>
          <span>A</span>:やりたいことに何個もワードが含まれている可能性があります。例えば、「会社を経営してお金持ちになりたい」、そしたら「経営」の1つのワードに着目してみましょう。どうして経営したいのか？を考えてみよう。<br><br>
          Q:なぜ___?の後ろの部分がわからない<br><br>
          <span>A</span>:必ずしも、なぜ…の形にしなくても良いです。なんで？という疑問を自分の中で変換できればOK！<br>例:親の意図は？/自分はどうしてそうしたいのか？/そう感じる深い理由は？<br><br>
          Q:”外”って？<br><br>
          <span>A</span>:なんで？と掘り下げていくと、自分のまわりの環境に対しての分析や、モノの特性についての分析になることがあります。これが”外”です。このアプリは自分の思考回路を言語化するアプリなので、”内” を分析することに価値があります。<br>
          例:地味な服を辞めたい→友達に言われたから【外】→友達はカラフルな洋服が好きだから【外】→世の中で目立つことに価値があると感じる人だから【外】<br><br>
          Q:”内”って？<br><br>
          <span>A</span>:自分が〇〇だから！と自分の内面について考えることです。<br>
          例:医師になりたい→人を健康にしたいから【内】→ 健康になることは幸福度の上昇だと捉えるから【内】→病期が治ったときの祖母の顔が忘れられないから【内】<br><br>
          Q:”外”から”内”へ移れない、行けない<br><br>
          <span>A</span>:”外”の分析が続き、満足したら、その”外”の環境下でなぜ自分が最初のテーマを選んだのかを考えていきましょう。<br><br>
          Q:下の方向に掘り下げられているかわからない<br><br>
          <span>A</span>:やりたいことへの具体性が出てきている場合は危ないです。できるだけ抽象化させていくことが大切です。例えば、経済学を学びたい→将来のために役立ちそうだから→世の中で経済はずっと回っている→お金というものを概念として捉えてみたいから→テレビで話していた本を読むのもあり、最後は具体的な行動へと目移りしているので深堀ができていません！<br>
          <span>A</span>:思考は時と場合によって変わるものです、何ルートもできてもいいと思います。何度も同じテーマにやっても面白いかもですね！
        </div>
        <h1 id="3">ハッとしない</h1>
        <div>
          Q:ハッとしない…<br><br>
          <span>A</span>:真因にたどり着かないこともあると思います。それでもいいです。考えるという過程が必ずプラスになるはずです。<br>
          <span>A</span>:ほかの人のシェアをみてもいいかも！<br><br>
          Q:いっぱい自問自答したけど、ほんとにこれでいいの？<br><br>
          <span>A</span>:自問自答を行っているので、最初から自分の中にあったものが見えてくるはずです。当たり前だなあと感じる人もいるし、この考え方を持っていたのか！と驚く人もいます。自分というわかりそうでわからないものに悩む時間を過ごしましょう。
        </div>
        <h1 id="4">真因から悩んでしまう</h1>
        <div>
          Q:真因にたどりついたけどどうすれば…<br><br>
          <span>A</span>:そこからの行動は難しいものがあると思います！「真因のワード　やり方」でググるのもあり！<br>
          例:「社会貢献　やり方」「人を助ける　やり方<br>
          <span>A</span>:似ている人をシェアから探してみましょう<br>
          <span>A</span>:やりたいことをいっぱい書き出してみて、真因を基に分類していくのもあり<br>
          例:真因)「人を導きたい」、やりたいこと)「本を読みたい」→リーダー論の本を読もう、組織学の本を読もう<br>ほかにもやりたいこと)人に会う！→社長に会おう！<br><br>
          Q:真因からの行動を今はしたくない<br><br>
          <span>A</span>:その真因に気づいて生きる世界と今までの世界は違うかも！→いろいろなものの見方が変わるはず！<br>
          例:真因→「お金を儲けたい」<br>いままで→「スタバのフラペチーノ高いな」<br>これから→「スタバはどうやって儲けているんだろう」
        </div>
      </div>
    </div>
    <script>
      new Vue({
        el: '#help',
        methods: {
          back: function() {
            document.getElementById('myNavigator').popPage();
          }
        }
      });
    </script>
  </ons-page>
</template>

<template id="mail_resend.html">
  <ons-page>
    <div class="background" style="background-color: rgba(249, 214, 204, 1);"></div>
    <div id="mail_resend" class="password_reset">
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start; margin-left: 30px;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <h1>メールが届かない場合</h1>
      <div>
        <p>ご登録いただいたメールアドレスを入力してください。<br>
          パスワード再設定用のメールを再送します。</p>
        <input type="mail" placeholder="メールアドレス">
        <button>メールを再送</button>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: '#mail_resend',
          data: {
            mail: "",
          },
          methods: {
            onSendMail: function() {
              var auth = firebase.auth();
              var email = this.mail;
              var actionCodeSettings = {
                iOS: {
                  bundleId: 'io.github.Murasya.toten',
                },
                android: {
                  packageName: 'io.github.Murasya.toten',
                },
                handleCodeInApp: true,
              }
              auth.sendPasswordResetEmail(email, actionCodeSettings).then(function() {
                document.getElementById('myNavigator').pushPage('mail_sent.html');
              }).catch(function(error) {
                console.log(error);
              });
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="mail_sent.html">
  <ons-page>
    <div class="background" style="background-color: #F9D6CC;"></div>
    <div id="mail_sent">
      <h1>メールを送信しました</h1>
      <p>受信メールをご確認の上、<br>
        パスワードを再設定してください。</p>
      <a @click="onMail">メールが届かない場合</a>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: "#mail_sent",
          methods: {
            onMail: function() {
              document.getElementById("myNavigator").replacePage("mail_resend.html");
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="myRecode.html">
  <ons-page>
    <div class="background" style="background-color: #FFF;"></div>
    <div id="myRecodeVue" v-cloak>
      <div class="recode__tab">
        <button class="recode__tab--archive" @click="onArchiveButton" :style="tabActive ? activeTab1 : nonActiveTab1">アーカイブ</button>
        <button class="recode__tab--saving" @click="onSavingButton" :style="tabActive ? nonActiveTab2 : activeTab2">セーブ中</button>
      </div>
      <div class="recode" id="GD">
        <a v-for="data in arr" class="data" @click="onDataButton(data)">
          <span>{{ data.timestamp.getFullYear() }}/{{ ('0'+(data.timestamp.getMonth()+1)).slice(-2) }}/{{ data.timestamp.getDate() }}</span>
          <p>{{ data.answers[0] }}</p>
          <hr>
        </a>
      </div>
      <my-toolbar></my-toolbar>
    </div>
  
    <script>
      ons.getScriptPage().onInit = function() {
        sBanner();
        var vm = new Vue({
          el: '#myRecodeVue',
          data: {
            arr: getQuestionAndAnswer(),
            tabActive: true,
            activeTab1: {
              backgroundColor: "#FFF",
              width: "70pt",
              zIndex: "10",
            },
            nonActiveTab1: {
              backgroundColor: "#626262",
              width: "132pt",
              zIndex: "9",
              textAlign: "left",
              paddingLeft: "10pt",
            },
            activeTab2: {
              backgroundColor: "#FFF",
              width: "70pt",
              zIndex: "10",
              left: "81pt",
            },
            nonActiveTab2: {
              backgroundColor: "#626262",
              width: "132pt",
              zIndex: "9",
              left: "19pt",
              textAlign: "right",
              paddingRight: "10pt",
            }
          },
          methods: {
            onArchiveButton: function() {
              this.tabActive = true;
              this.arr = getQuestionAndAnswer();
            },
            onSavingButton: function() {
              this.tabActive = false;
              this.arr = getIncomplete();
            },
            onDataButton: function(data) {
              hBanner();
              if (data.complete) {
                document.getElementById("myNavigator").pushPage('result.html', {
                  data: {
                    qAndA: data,
                    recode: true,
                  }
                });
              } else {
                document.getElementById("myNavigator").pushPage('resume.html', {
                  data: {
                    qAndA: data,
                  }
                })
              }
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="password_reset.html">
  <ons-page>
    <div class="background" style="background-color: #F9D6CC;"></div>
    <div id="password_reset" class="password-reset">
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start; margin-left: 30px;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <h1 class="password-reset__title">パスワードを忘れた場合</h1>
      <div class="password-reset__form">
        <p class="password-reset__explain">ご登録いただいたメールアドレスを入力してください。<br>
          パスワード再設定用のメールを送信します。</p>
        <input class="password-reset__input" type="mail" placeholder="メールアドレス" v-model="mail">
        <button class="password-reset__go-btn" @click="onSendMail">メールを送信</button>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: '#password_reset',
          data: {
            mail: "",
          },
          methods: {
            onSendMail: function() {
              var auth = firebase.auth();
              var email = this.mail;
              var actionCodeSettings = {
                iOS: {
                  bundleId: 'io.github.Murasya.toten',
                },
                android: {
                  packageName: 'io.github.Murasya.toten',
                },
                handleCodeInApp: true,
              }
              auth.sendPasswordResetEmail(email).then(function() {
                document.getElementById('myNavigator').pushPage('mail_sent.html');
              }).catch(function(error) {
                console.log(error);
              });
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="question.html">
  <ons-page>
    <div class="background" style="background-color: hsl(200, 84%, 95%);"></div>
    <div id="questionVue" v-cloak class="question">
      <div class="question__header">
        <p class="question__theme">{{ theme }}</p>
        <div class="question__topbuttons">
          <a @click="interruptionButtonClick"><img src="./images/各種ボタン/break_ボタン.png" alt="中断ボタン" width="30px"></a>
          <a @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png" alt="ヘルプボタン" width="30px"></a>
        </div>
      </div>
      <div v-for="item in items" class="items">
        <p :class='item.tag == "out" ? "lightBlue" : "blue"'>{{ item.num }}</p>
        <p>{{ item.why }}</p>
        <p>{{ item.answer }}</p>
      </div>
      <ons-icon class="down-arrow" icon="fa-arrow-down" v-show="qa.num != 1"></ons-icon>
      <div class="question__writting">
        <a @click="onNumber" :class="numberClass">{{ qa.num }}</a>
        <p class="question__why">{{ qa.why }}<input class="question__question" v-show="qa.num >= 2" type="text" v-model="qa.question">？</p>
        <textarea v-model="qa.answer" class="question__answer"></textarea>
      </div>
      <div class="question__buttons">
        <a @click="nextButtonClick"><img src="./images/各種ボタン/next_ボタン.png" alt="Nextボタン"  height="90px"></a>
        <a v-show="qa.num >= 5" @click="finishButtonClick" style="margin-left: 20px;"><img src="./images/各種ボタン/finish_ボタン.png" alt="finishボタン" height="75px"></a>
      </div>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">分析を中断しますか？</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">はい</button>
          <button class="overlay__save--nobtn" @click="closeModal">いいえ</button>
        </div>
      </div>
      <div class="overlay" v-show="showModal1" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/分析_吹き出し(comment1).png">
      </div>
      <div class="overlay" v-show="showModal2" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ2.png">
        <img class="tenchan__comment" src="images/吹き出し/分析_吹き出し(comment2).png">
      </div>
      <div class="overlay" v-show="showModal3" @click="showModal3 = false">
        <img class="tenchan__lefttop" src="images/分析中_キャラ3.png">
        <img class="tenchan__comment" src="images/吹き出し/分析_吹き出し(comment3).png">
        <button class="overlay--finbtn" @click="closeModal3">記録する</button>
        <a class="overlay--backbtn" @click="showModal3 = false"><img src="images/各種ボタン/help-back_ボタン.png" width="77px"></a>
        </div>
      </div>
    </div>
    
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var qAndA = myNavigator.topPage.data.qAndA;
        var items = [];
        var why = "なぜ取り組みたい/叶えたい";
        var inNum = 0;
        var outNum = 0;
        for(i=1; i<qAndA.answers.length; i++) {
          items.push({
            num: i,
            why: qAndA.questions[i],
            answer: qAndA.answers[i],
            tag: qAndA.tags[i-1]
          });
          why = "なぜ";
          if(qAndA.tags[i-1] == "in") {
            inNum++;
          } else if(qAndA.tags[i-1] == "out") {
            outNum++;
          }
        }
        if(qAndA.id === "") {
          qAndA.id = localStorage.getItem("documentID");
        }
        
        var vm_q = new Vue({
          el: '#questionVue',
          data: {
            theme: qAndA.answers[0],
            items: items,
            qa: {
              num: qAndA.answers.length,
              why: why,
              question: "",
              answer: "",
              tag: "",
            },
            showSavingModal: false,
            showModal1: false,
            showModal2: false,
            showModal3: false,
            numberClass: "defo",
            outCount: outNum,
            inCount: inNum,
          },
          methods: {
            interruptionButtonClick: function() {
              this.showSavingModal = true;
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            nextButtonClick: function() {
              if(this.qa.answer == "") {
                ons.notification.toast( '回答欄が入力されていません', {timeout: 1000, animation: 'fall'});
                return;
              } else if(this.qa.tag == "") {
                ons.notification.toast( '内と外が決まっていません', {timeout: 1000, animation: 'fall'});
                return;
              }
              if (this.qa.tag == "out") {
                this.outCount++;
              } else {
                this.inCount++;
              }
              if (this.outCount == 3) {
                this.showModal1 = true;
                this.outCount = 4;
              }
              if (this.inCount == 3) {
                this.showModal2 = true;
                this.inCount = 4;
              }
              this.qa.why = this.qa.why + this.qa.question + "？";
              this.items.push(Object.assign({}, this.qa));
              qAndA.questions.push(this.qa.why);
              qAndA.answers.push(this.qa.answer);
              qAndA.tags.push(this.qa.tag);
              console.log(qAndA.id);
              updateData(qAndA);
              this.qa.num++;
              this.qa.tag = "";
              this.numberClass = "defo";
              this.qa.why = "なぜ";
              this.qa.question = "";
              this.qa.answer = "";
              
            },
            finishButtonClick: function() {
              if (this.qa.answer == "" && this.qa.num == 5) {
                ons.notification.toast("回答欄が入力されていません", {timeout: 1000, animation: "fall"});
                return;
              }
              if(this.qa.answer != "" && this.qa.tag == "") {
                ons.notification.toast("内と外が決まっていません", {timeout: 1000, animation: "fall"});
                return;
              }
              this.showModal3 = true;
            },
            closeModal: function() {
              this.showSavingModal = false;
              this.showHelpModal = false;
              this.showModal1 = false;
              this.showModal2 = false;
              this.showModal3 = false;
            },
            closeModal3: function() {
              this.showModal3 = false;
              if(this.qa.answer != "") {
                this.qa.why = this.qa.why + this.qa.question + "？";
                this.items.push(Object.assign({}, this.qa));
                qAndA.questions.push(this.qa.why);
                qAndA.answers.push(this.qa.answer);
                qAndA.tags.push(this.qa.tag);
                updateData(qAndA);
              }
              console.log(qAndA);
              myNavigator.pushPage('result.html',{
                data: {
                  qAndA: qAndA
                }
              })
            },
            savingButton: function() {
              if(this.qa.answer != "") {
                this.qa.why = this.qa.why + this.qa.question + "？";
                this.items.push(Object.assign({}, this.qa));
                qAndA.questions.push(this.qa.why);
                qAndA.answers.push(this.qa.answer);
                qAndA.tags.push(this.qa.tag);
              }
              qAndA.complete = false;
              updateData(qAndA);
              myNavigator.resetToPage('index.html');
            },
            onNumber: function() {
              if(this.numberClass == "defo") {
                this.numberClass = "lightBlue";
                this.qa.tag = "out";
              } else if (this.numberClass == "lightBlue") {
                this.numberClass = "blue";
                this.qa.tag = "in";
              } else {
                this.numberClass = "defo";
                this.qa.tag = "";
              }
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="question_tutorial.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="questionVue" v-cloak class="question">
      <button @click="showSkipModal = true" class="tutorial__skip">SKIP</button>
      <div class="question__header">
        <p class="question__theme">{{ theme }}</p>
        <div class="question__topbuttons">
          <a @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png" alt="ヘルプボタン" height="30px"></a>
          <a @click="interruptionButtonClick"><img src="./images/各種ボタン/break_ボタン.png" alt="中断ボタン" height="30px"></a>
        </div>
      </div>
      <div v-for="item in items" class="items">
        <p :class='item.tag == "out" ? "lightBlue" : "blue"'>{{ item.num }}</p>
        <p>{{ item.why }}</p>
        <p>{{ item.answer }}</p>
      </div>
      <ons-icon class="down-arrow" icon="fa-arrow-down" v-show="qa.num != 1"></ons-icon>
      <img src="images/チュートリアル_説明3-1.png" class="tutorial__question--que" v-show="qa.num == 2" width="122px">
      <div class="question__writting">
        <a @click="onNumber" :class="numberClass">{{ qa.num }}</a>
        <p class="question__why">{{ qa.why }}<input class="question__question" v-show="qa.num >= 2" type="text" v-model="qa.question" :placeholder="placeholder_que">？</p>
        <textarea class="question__answer" v-model="qa.answer" :placeholder="placeholder_ans"></textarea>
      </div>
      <img src="images/チュートリアル_説明2-1.png" class="tutorial__question--ans" v-show="qa.num == 1" width="250px">
      <img src="images/チュートリアル_説明2-2.png" class="tutorial__question--tag" v-show="qa.num == 1" width="260px">
      <img src="images/チュートリアル_説明3-2.png" class="tutorial__question--ans" v-show="qa.num == 2" width="253px">
      <img src="images/チュートリアル_説明3-3.png" class="tutorial__question--tag" v-show="qa.num == 2" width="250px">
      <div class="question__buttons">
        <a @click="nextButtonClick"><img src="./images/各種ボタン/next_ボタン.png" alt="Nextボタン"  width="90px"></a>
        <input type="image" src="./images/各種ボタン/finish_ボタン.png" v-show="qa.num >= 5" @click="finishButtonClick" style="margin-left: 20px;" width="75px">
      </div>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">分析を中断しますか？</p>
        <button class="overlay__save--yesbtn" @click="savingButton">はい</button>
        <button class="overlay__save--nobtn" @click="closeModal">いいえ</button>
      </div>
      <div class="overlay" v-show="show1Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/チュートリアル_ウインク_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(modal1).png">
      </div>
      <div class="overlay" v-show="show2Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(modal2).png">
      </div>
      <div class="overlay" v-show="show3Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(modal3).png">
      </div>
      <div class="overlay" v-show="show4Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/チュートリアル_キリッと_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(modal4).png">
      </div>
      <div class="overlay" v-show="show5Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/チュートリアル_疲れた_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(modal5).png">
      </div>
      <skip-modal v-if="showSkipModal" @close="showSkipModal = false"></skip-modal>
    </div>
    
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      
      ons.getScriptPage().onInit = function() {
        var items = [];
        var why = "なぜ取り組みたい/叶えたい";
        var vm_q = new Vue({
          el: '#questionVue',
          data: {
            theme: "英会話を学びたい",
            items: items,
            qa: {
              num: 1,
              why: why,
              question: "",
              answer: "",
              tag: "",
            },
            showSavingModal: false,
            showHelpModal: false,
            show1Modal: false,
            show2Modal: false,
            show3Modal: false,
            show4Modal: false,
            show5Modal: false,
            numberClass: "defo",
            temp: {
              questions: [
                "取り組みたい/叶えたい",
                "留学生と話せると良いのか",
                "違う文化を持つ人と話したいのか",
                "日本人らしすぎる気がするのか",
                "はっきりとものが言えないのか",
              ],
              answers: [
                "英語が話せたら留学生と話せるから",
                "違う文化を持つ人と話してみたいから",
                "今の自分は日本人らしすぎる気がするから。",
                "人の顔色を必要以上に伺ってしまっている節があるから。先輩や先生など目上の人たちに気を使えるのは自分の長所だけど、同級生にも自分の思っていることをはっきり言えないのは問題だと感じる。",
                "自分の意見にあまり自信がないから。意見して変な目で見られるよりは、言わないほうがいいやと思ってしまう。"
              ],
              tags: [
                "out",
                "in",
                "in",
                "in",
                "in",
              ]
            },
            placeholder_que: "",
            placeholder_ans: "英語が話せたら留学生と話せるから",
            showSkipModal: false,
          },
          created: function() {
            var vue = this;
            setTimeout(function() {vue.show1Modal = true}, 1000);
          },
          methods: {
            interruptionButtonClick: function() {
              ons.notification.toast('チュートリアルでは途中セーブできません', {timeout: 1000, animation: "fall"});
            },
            helpButtonClick: function() {
              ons.notification.toast('チュートリアルではヘルプを表示できません', {timeout: 1000, animation: "fall"});
            },
            nextButtonClick: function() {
              if(this.qa.num == 1) {
                if(this.qa.answer != "英語が話せたら留学生と話せるから") {
                  ons.notification.toast( "「英語が話せたら留学生と話せるから」と入力しよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
                if(this.qa.tag != "out") {
                  ons.notification.toast( "1回タップしよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
              }
              if(this.qa.num == 2) {
                if(this.qa.question != "留学生と話せると良いのか") {
                  ons.notification.toast( "「留学生と話せると良いのか」と入力しよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
                if(this.qa.answer != "違う文化を持つ人と話してみたいから") {
                  ons.notification.toast( "「違う文化を持つ人と話してみたいから」と入力しよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
                if(this.qa.tag != "in") {
                  ons.notification.toast( "2回タップしよう", {timeout: 1000, animation: 'fall'});
                  return ;
                }
              }
              this.qa.why = this.qa.why + this.qa.question + "？";
              this.items.push(Object.assign({}, this.qa));
              this.placeholder_que = this.temp.questions[this.qa.num];
              this.placeholder_ans = this.temp.answers[this.qa.num];
              this.qa.num++;
              this.qa.why = "なぜ";
              this.qa.question = "";
              this.qa.answer = "";
              this.numberClass = "defo";
              this.qa.tag = "";
              
              if(this.qa.num == 2) {
                var vue = this;
                setTimeout(function() {vue.show3Modal = true}, 1000);
              } else if(this.qa.num == 3) {
                var vue = this;
                setTimeout(function() {vue.show4Modal = true}, 1000);
              }
            },
            finishButtonClick: function() {
              document.getElementById('myNavigator').pushPage('result_tutorial.html');
            },
            closeModal: function() {
              this.showSavingModal = false;
              this.showHelpModal = false;
              this.show2Modal = false;
              if(this.show1Modal == true) {
                this.show1Modal = false;
                this.show2Modal = true;
              }
              this.show3Modal = false;
              if (this.show5Modal == true) {
                this.show5Modal = false;
              }
              if (this.show4Modal == true) {
                this.show4Modal = false;
                var t = this;
                var id = setInterval(function() {
                  if (t.qa.num < 5) {
                    t.qa.question = t.temp.questions[t.qa.num-1];
                    t.qa.answer = t.temp.answers[t.qa.num-1];
                    t.qa.tag = t.temp.tags[t.qa.num-1];
                    t.numberClass = "blue";
                    t.qa.why = t.qa.why + t.qa.question + "？";
                    t.items.push(Object.assign({}, t.qa));
                    t.qa.why = "なぜ";
                    t.qa.question = t.temp.questions[t.qa.num];
                    t.qa.answer = t.temp.answers[t.qa.num];
                    t.qa.num++;
                  } else {
                    t.show5Modal = true;
                    clearInterval(id);
                  }
                }, 1000);
              }
            },
            savingButton: function() {
            },
            onNumber: function() {
              if(this.numberClass == "defo") {
                this.numberClass = "lightBlue";
                this.qa.tag = "out";
              } else if (this.numberClass == "lightBlue") {
                this.numberClass = "blue";
                this.qa.tag = "in";
              } else {
                this.numberClass = "defo";
                this.qa.tag = "";
              }
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="ready.html">
  <ons-page>
    <div id="readyVue">
      <img src="images/チュートリアルスタート_キャラ.png">
      <p>今からボクと一緒に、<br>"分析" の練習をしてみるテン！<br><b>準備はいいテン？</b></p>
      <div>
        <button @click="onButton" class="yes">YES!</button>
        <button @click="showModal = true" class="skip">SKIP</button>
      </div>
      <skip-modal v-if="showModal" @close="showModal = false"></skip-modal>
    </div>
    
    <script>
      var vm = new Vue({
        el: '#readyVue',
        data: {
          showModal: false,
        },
        methods: {
          onButton: function() {
            document.getElementById("myNavigator").pushPage("analyze_tutorial.html");
          },
        }
      });
    </script>
  </ons-page>
</template>

<template id="register.html">
  <ons-page>
    <div id="register" class="register" v-cloak>
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start;background-color: #B1B1B1;display: block; padding: 20px; color: #FFF;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <ul class="register__explain">
        <li class="register__explain-item">アカウント登録を行うことにより、<a @click="urlClick" class="register__link">利用規約</a>・<a @click="urlClick" class="register__link">プライバシーポリシー</a>に同意したものとみなします。</li><br>
        <li class="register__explain-item">メールアドレスおよび連携サービスのDMにアプリ改善のためのアンケート等をお送りする場合がございます。あらかじめご了承ください。</li><br>
        <li class="register__explain-item">個人情報は記入必須ではありません。</li>
      </ul>
      <div class="register__form">
        <p class="register__title">メールアドレス</p>
        <input class="register__input" type="email" id="email_register" v-model="email" placeholder="入力してください">
        <p class="register__title">パスワード</p>
        <input class="register__input" type="password" id="password_register" v-model="password" placeholder="入力してください">
        <p class="register__title">性別</p>
        <select v-model="sex">
          <option disabled>性別</option>
          <option value="男">男</option>
          <option value="女">女</option>
          <option value="その他">その他</option>
        </select>
        <p class="register__title">生年月日</p>
        <div class="register__birthday">
          <select v-model="year" @change="get_days">
            <option disabled>年</option>
            <option v-for="n in 100" :value="n + 1920">{{ n + 1920 }}</option>
          </select>年
          <select v-model="month" @change="get_days">
            <option v-for="n in 12">{{ n }}</option>
          </select>月
          <select v-model="day">
            <option v-for="n in days_max" :value="n">{{ n }}</option>
          </select>日
        </div>
        <p class="register__title">職業</p>
        <select v-model="occupation">
          <option disabled>職業</option>
          <option v-for="n in occupation_list" :value="n">{{ n }}</option>
        </select>
      </div>
      <div class="register__btns">
        <button @click="onRegister" class="register__send-btn">仮登録メールを送信</button>
        <!-- <hr>
        <h3>他のアカウントで登録</h3>
        <div>
          <button class="twitter_register"><ons-icon icon="fa-twitter"></ons-icon> Twitter</button>
          <button class="google_register" @click="google_regi"><ons-icon icon="fa-google" style="color: gray;"></ons-icon> Google</button>
        </div> -->
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function () {
        var vm_r = new Vue({
          el: '#register',
          data: {
            email: "",
            password: "",
            sex: "",
            year: 0,
            month: 0,
            day: 0,
            days_max: "",
            occupation: "",
            occupation_list: [
              "学生",
              "会社員",
              "自営業",
              "専業主婦(夫)",
              "パート・アルバイト",
              "無職",
              "その他",
            ]
          },
          created: function() {
            this.get_days();
          },
          methods: {
            onRegister: function() {
              var day = new Date(this.year, this.month-1, this.day);
              var user = new User("", this.email, day, this.sex, this.occupation);
              firebase.auth().createUserWithEmailAndPassword(this.email, this.password)
                .then(function(result) {
                  user.uid = result.user.uid;
                  setNewUser(user);
                  document.querySelector('#myNavigator').resetToPage("index.html");
                  firebase.auth().currentUser.sendEmailVerification().then(function() {
                    ons.notification.toast('確認メールを送りました', {timeout: 1000, animation: 'fall'});
                  }).catch(function(error) {
                    
                  });
                })
                .catch(function(error) {
                  ons.notification.toast(error.message, { timeout: 1000, animation: 'fall'});
                });
            },
            get_days: function() {
              this.days_max = new Date(this.year, this.month, 0).getDate();
            },
            google_regi: function() {
              var log = signInWithGoogle();
              console.log(log);
            },
            urlClick: function() {
              window.open("https://noteappm.wixsite.com/policies", "_self", "location=no");
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="result.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="resultVue" class="result" v-cloak>
      <p class="result__theme">{{ theme }}</p>
      <span class="result__category">
        <span v-for="n in category">{{ n }}&emsp;</span>
      </span>
      <div v-for="index in answers.length-1" class="items">
        <p :class='tags[index-1] == "" ? defoClass : (tags[index-1] == "out" ? lightClass : blueClass)'>{{ index }}</p>
        <p>{{ questions[index] }}</p>
        <p>{{ answers[index] }}</p>
      </div>
      <textarea class="result__memo" v-model="memo" v-if="recode == false" placeholder="感想を入力"></textarea>
      <div v-else class="result__memo--readonly">{{ memo }}</div>
      <p style="font-size: 11pt; color: #767676; margin-top: 30px;" v-show="recode==false">分析はうまくいった？</p>
      <select v-model="success" v-if="recode == false" class="result__success">
        <option>はい</option>
        <option>いいえ</option>
        <option>どちらともいえない</option>
      </select><br>
      <span class="result__success--readonly" v-if="recode == true">分析はうまくいった？<ons-icon icon="fa-arrow-right"></ons-icon>{{ success }}</span>
      <button class="result__savebtn" v-show="recode == false" @click="saveButtonClick">完了</button>
      <!--<a @click="onTweet" class="result__tweetbtn"><ons-icon icon="fa-twitter"></ons-icon> Tweet</a>
      <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>-->
      <my-toolbar v-show="recode == true"></my-toolbar>
    </div>
  
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var qAndA = myNavigator.topPage.data.qAndA;
        var recode = false;
        if(myNavigator.topPage.data.recode) {
          recode = true;
        }
        console.log(qAndA);
        vm = new Vue({
          el: '#resultVue',
          data: {
            theme: qAndA.answers[0],
            category: qAndA.category,
            questions: qAndA.questions,
            answers: qAndA.answers,
            tags: qAndA.tags,
            memo: qAndA.memo,
            success: qAndA.success,
            category: qAndA.category,
            recode: recode,
            defoClass: "defo",
            lightClass: "lightBlue",
            blueClass: "blue",
            tweet: {
              text: "",
              url: "http://toten.html.xdomain.jp/",
            }
          },
          methods: {
            saveButtonClick: function() {
              if (this.memo == "") {
                ons.notification.toast("感想を書いてください", {timeout: 1000, animation: "fall"});
                return;
              }
              if (this.success == "") {
                ons.notification.toast("分析が成功したか選んでください", {timeout: 1000, animation: "fall"});
                return;
              }
              qAndA.memo = this.memo;
              qAndA.success = this.success;
              qAndA.category = this.category;
              qAndA.complete = true;
              updateData(qAndA);
              myNavigator.resetToPage('index.html');
              sInt();
            },
            onTweet: function() {
              if (this.memo == "") {
                ons.notification.toast("感想を書いてください", {timeout: 1000, animation: "fall"});
                return;
              }
              if (this.success == "") {
                ons.notification.toast("分析が成功したか選んでください", {timeout: 1000, animation: "fall"});
                return;
              }
              qAndA.memo = this.memo;
              qAndA.success = this.success;
              qAndA.category = this.category;
              qAndA.public = true;
              qAndA.complete = true;
              updateData(qAndA);
              this.tweet.text = "<" + this.theme + ">" + "を分析しました!\n\nスタート：" + this.answers[1] + "\n↓\nゴール：" + this.answers[this.answers.length-1]
                                + "\n\n#とーてん";
              for(var i=0; i<this.category.length; i++) {
                this.tweet.text += " #" + this.category[i];
              }
              this.tweet.text += "\n";
              this.tweet.url += "?id=" + qAndA.id;
              window.plugins.socialsharing.shareViaTwitter(this.tweet.text, null, this.tweet.url);
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="result_tutorial.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="result_t" class="result" v-cloak>
      <p class="result__theme">{{ theme }}</p>
      <span class="result__category">勉強 スキルアップ</span>
      <div v-for="(value, index) in questions" class="items">
        <p :class='tags[index] == "out" ? "lightBlue" : "blue"'>{{ index+1 }}</p>
        <p>{{ questions[index] }}</p>
        <p>{{ answers[index] }}</p>
      </div>
      <textarea v-model="memo" readonly class="result__memo"></textarea>
      <p style="font-size: 11pt; color: #767676;">分析はうまくいった？</p>
      <select v-model="success" class="result__success">
        <option value="はい">はい</option>
        <option value="いいえ">いいえ</option>
        <option value="どちらともいえない">どちらともいえない</option>
      </select>
      <img src="images/チュートリアル_説明4.png" width="90pt" class="tutorial__result--suc">
      <button class="result__savebtn" @click="saveButtonClick">完了</button>
      <!--
      <a class="result__tweetbtn"><ons-icon icon="fa-twitter"></ons-icon> Tweet</button></a>
      <img src="images/チュートリアル_説明5.png" width="106pt" class="tutorial__result--tweet">
      -->
      <div class="overlay" v-show="showModal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/吹き出し/チュートリアル_吹き出し(modal6).png">
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      var vm = new Vue({
        el: '#result_t',
        data: {
          theme: "英会話を学びたい",
          questions: [
            "なぜ取り組みたい/叶えたい？",
            "なぜ留学生と話せると良いのか？",
            "なぜ違う文化を持つ人と話したいのか？",
            "なぜ日本人らしすぎる気がするのか？",
            "なぜはっきりとものが言えないのか？",
          ],
          answers: [
            "英語が話せたら留学生と話せるから。",
            "違う文化を持つ人と話してみたいから。",
            "今の自分は日本人らしすぎる気がするから。",
            "人の顔色を必要以上に伺ってしまっている節があるから。先輩や先生など目上の人たちに気を使えるのは自分の長所だけど、同級生にも自分の思っていることをはっきり言えないのは問題だと感じる。",
            "自分の意見にあまり自信がないから。意見して変な目で見られるよりは、言わない方がいいやと思ってしまう。",
          ],
          tags: [
            "out",
            "in",
            "in",
            "in",
            "in",
          ],
          memo: "漠然と留学生と話せるようになりたいと思っていたけど、本当は、周りの顔色をうかがわずにはっきりとものが言えるイメージのある海外の人に憧れを抱いていただけなのかもしれない。英会話ができるようになるのはもちろんいいことだけど、英会話ができるようにならなくても自分の良くないところは改善できるのではと思ったので、別の方法も考えたい。また、この点は自分の長所であるとも言えるので、いい部分として伸ばしていきたいとも思った。",
          success: "はい",
          category: [
            "勉強",
            "スキルアップ",
          ],
          showModal: false,
        },
        created: function() {
          var t = this;
          setTimeout(function() {t.showModal = true;}, 1000);
        },
        methods: {
          saveButtonClick: function() {
            myNavigator.resetToPage('finish_tutorial.html');
          },
          closeModal: function() {
            this.showModal = false;
          }
        }
      });
    </script>
  </ons-page>
</template>

<template id="resume.html">
  <ons-page id="resume">
    <div class="background" style="background-color: #ED6A4C;"></div>
    <div id="hoge">
      <img src="images/分析スタート_キャラ.png">
      <p>RESUME!</p>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator')
      ons.getScriptPage().onInit = function() {
        setTimeout(startQuestion, 800)
      }
      function startQuestion() {
        myNavigator.replacePage('question.html', {
          data: {
            qAndA: myNavigator.topPage.data.qAndA
          }
        })
      }
    </script>
  </ons-page>
</template>

<template id="start.html">
  <ons-page id="start">
    <div class="background" style="background-color: #ED6A4C;"></div>
    <div id="hoge">
      <img src="images/分析スタート_キャラ.png">
      <p>START!</p>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator')
      ons.getScriptPage().onShow = function() {
        
        setTimeout(startQuestion, 800);
      }
      function startQuestion() {
        if(localStorage.getItem('tutorial_finished') != "true") {
          myNavigator.replacePage('question_tutorial.html');
        } else {
          myNavigator.replacePage('question.html', {
            data: {
              qAndA: myNavigator.topPage.data.qAndA
            }
          });
        }
      }
    </script>
  </ons-page>
</template>