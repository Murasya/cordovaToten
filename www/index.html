<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/toolbar.css">
  <link rel="stylesheet" href="css/hamberger.css">
  <link rel="stylesheet" href="css/analyze.css">
  <link rel="stylesheet" href="css/question.css">
  <link rel="stylesheet" href="css/tenchan.css">
  <link rel="stylesheet" href="css/overlay.css">
  <link rel="stylesheet" href="css/tutorial.css">
  <link rel="stylesheet" href="css/result.css">
  <link rel="stylesheet" href="css/recode.css">
  <link rel="stylesheet" href="css/feedback.css">
  <link rel="stylesheet" href="css/register.css">
  <link rel="stylesheet" href="css/account.css">
  <link rel="stylesheet" href="css/password-reset.css">
  <link rel="stylesheet" href="css/category.css">
  <link rel="stylesheet" href="css/cat-detail.css">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/archive.css">
  <link rel="stylesheet" href="css/explain.css">
  <link rel="stylesheet" href="css/edit.css">
  <link rel="stylesheet" href="css/myPage.css">
  <link rel="stylesheet" href="css/mailChange.css">
  <link rel="stylesheet" href="css/jobhunting_memo1.css">
  <link rel="stylesheet" href="css/snsButton.css">
  <link rel="stylesheet" href="css/result_memo.css">
  <link rel="stylesheet" href="css/memo.css">
  <link rel="stylesheet" href="css/jobhunting_story.css">
  <link rel="stylesheet" href="css/jobhunting_story_number.css">
  <link rel="stylesheet" href="css/edit_caution.css">
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-firestore.js"></script>
  <!-- firebaseUI -->
  <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth__ja.js"></script>
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />
  <!-- Vue.js-->
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="js/app.js"></script>

  <!-- slick -->
  <link href="js/slick-theme.css" rel="stylesheet" type="text/css">
  <link href="js/slick.css" rel="stylesheet" type="text/css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script type="text/javascript" src="js/slick.min.js"></script>

  <!-- swiper -->
  <!-- <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> -->
</head>
<body>
  <ons-navigator swapable id="myNavigator" page="index.html"></ons-navigator>
</body>
</html>

<template id="index.html">
  <ons-page id="index">
    <div class="background" style="background-color: #FFFFFF;"></div>
    <div class="index" v-cloak>
      <div v-if="!tutorialFinish">
        <a @click="goTutorial"><img class="index__first-logo" src="images/ダウンロード後_シンボル_顔なし.png"></a>
      </div>
      <div v-else>
        <header v-show="currentUser != null">
          <div :class="{ menu_btn: true, open_: menuFlag }" @click="naviOpen">
            <span class="menu_trigger">
              <span></span><span></span><span></span>
            </span>
          </div>
        </header>
        <transition>
          <div class="nav" v-show="menuFlag">
            <input type="checkbox" id="acd-check1" class="acd-check">
            <label for="acd-check1" class="acd-label">OPTIONS </label>
            <div class="acd-content">
              <a @click="urlClick('https://noteappm.wixsite.com/policies')">利用規約</a>
              <a @click="urlClick('https://noteappm.wixsite.com/policies')">プライバシー<br>ポリシー</a>
              <a @click="goFeedback">フィードバック</a>
              <a @click="goMyPage">マイページ</a>
              <a @click="goTutorial">チュートリアル</a>
            </div>
            <a @click="logoutButtonClick" class="signout">SIGN OUT</a>
          </div>
        </transition>
        
        <div v-show="loading">
          <div id="notSignIn" v-if="currentUser == null">
            <p><img class="index__logo" src="./images/サインイン前_シンボル.png" alt="ロゴ"></p>
            <input type="image" class="index__signin" src="./images/各種ボタン/signin_ボタン.png" @click="loginButtonClick">
            <button @click="signUpButtonClick" class="index__new-account">NEW ACCOUNT</button>
          </div>
          <div id="isSignIn" v-else>
            <a @click="goAnalyze"><img class="index__logo" src="./images/home_シンボル.png" alt="ロゴ"></a>
            <!-- <div class="snsButton__wrapper">
              <div class='snsButton__title'>
                <p>公式Twitter, noteにて活用事例を紹介中！</p>
              </div>
              <div class="snsButton__contents">
                <a href="https://twitter.com/app_toten?s=20" class="snsButton__twitter">Twitterで見てみる</a>
                <a href="https://note.com/toten_app" class="snsButton__note">noteで見てみる</a>
              </div>
            </div> -->
            <!-- news -->
            <div class="index__str">- 続々更新中! お役立ちコンテンツ -</div>
            <div class="index__news">
              <div class="index__news-item" @click="urlClick('https://twitter.com/i/events/1391800558080589825?s=20')">
                <span class="index__news-category">他の人の思考回路を見てみたい人へ！</span>
                <div class="index__news-title">#みんなの分析ファイル</div>
              </div>
              <div class="index__news-item" @click="urlClick('https://twitter.com/i/events/1388152756603473922?s=20')">
                <span class="index__news-category">何か行動してみたくなった人へ！</span>
                <div class="index__news-title">#テンちゃんのイベント紹介 / #嘘みたいな本のススメ</div>
              </div>
              <div class="index__news-item" @click="urlClick('https://twitter.com/i/events/1391805181549977601?s=20')">
                <span class="index__news-category">就活生のみんなへ！</span>
                <div class="index__news-title">コラボ中の就活団体を紹介！</div>
              </div>
              <div class="index__news-item" @click="urlClick('https://note.com/toten_app/magazines')">
                <span class="index__news-category">とーてんの活用法が知りたい人へ！</span>
                <div class="index__news-title">＜公式note＞就活から日常まで！事例紹介</div>
              </div>
            </div>
            <!-- <div class="archive" v-if="recent.length!=0">
              <a v-for="data in recent" class="archive__data" @click="onDataButton(data)">
                <span :class="data.color=='hobby'?'archive__time--pink':
                        (data.color=='future'?'archive__time--yellow':
                        (data.color=='task'?'archive__time--blue':
                        (data.color=='experience'?'archive__time--green':
                        (data.color=='jobhunting'?'archive__time--purple':
                        'archive__time'))))">
                  {{ data.timestamp.getFullYear() }}/{{ ('0'+(data.timestamp.getMonth()+1)).slice(-2) }}/{{ data.timestamp.getDate() }}
                </span>
                <p class="archive__p">{{ data.answers[0] }}</p>
                <hr class="archive__hr">
              </a>
            </div>
            <div v-else>
              <p class="index__mada">まだ記録がありません。</p>
            </div> -->
            <div class="index__floatbutton" @click="goMemo"><img src="images/2021_02_25_新素材/memo_icon_add.png"></div>
          </div>
        </div>
        <my-toolbar v-show="currentUser != null"></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onShow = function() {
        toolbar_active = 1;
        sBanner();
        var vue = new Vue({
          el: '#index',
          data: {
            currentUser: firebase.auth().currentUser,
            recent: [],
            menuFlag: false,
            tutorialFinish: localStorage.getItem('tutorial_finished'),
            loading: true,
          },
          created: function() {
            console.log("created");
            if(!(this.tutorialFinish)) {
              setTimeout(function() {
                hBanner();
                document.getElementById("myNavigator").pushPage('explain.html');
              }, 5000);
            }
          },
          methods: {
            loginButtonClick: function () {
              hBanner();
              document.getElementById("myNavigator").pushPage('account.html');
            },
            signUpButtonClick: function () {
              hBanner();
              document.getElementById("myNavigator").pushPage('register.html');
            },
            logoutButtonClick: function () {
              firebase.auth().signOut();
              this.menuFlag = false;
            },
            naviOpen: function() {
              this.menuFlag = !this.menuFlag;
            },
            onDataButton: function(data) {
              hBanner();
              if (data.complete) {
                document.getElementById("myNavigator").pushPage('result.html', {
                  data: {
                    qAndA: data,
                    recode: true,
                  }
                });
              } else {
                document.getElementById("myNavigator").pushPage('question.html', {
                  data: {
                    qAndA: data,
                  }
                });
              }
              toolbar_active = 2;
            },
            goTutorial: function() {
              hBanner();
              document.getElementById("myNavigator").pushPage('category_tutorial.html');
            },
            goAnalyze: function() {
              document.getElementById("myNavigator").resetToPage('analyze.html');
            },
            goFeedback: function() {
              hBanner();
              document.getElementById("myNavigator").pushPage('feedback.html');
            },
            goMyPage: function() {
              hBanner();
              document.getElementById("myNavigator").pushPage('myPage.html');
            },
            goMemo: function() {
              document.getElementById("myNavigator").pushPage('memo.html');
            },
            urlClick: function(url) {
              window.open(url, "_self", "location=yes");
            }
          },
        });
        firebase.auth().onAuthStateChanged(user => {
          if(user) {
            //vue.recent = getQuestionAndAnswer(2);
            vue.currentUser = user.uid;
            console.log(vue.currentUser);
            vue.loading = true;
          } else {
            vue.currentUser = null;
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="myPage.html">
  <ons-page>
    <div id="myPage" class="myPage">
      <div class="myPage__header">
        <a class="myPage__cancel" @click="popBack"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      </div>
      <div>
        <ons-list>
          <ons-list-item tappable modifier="chevron" @click="mailChange">
            メールアドレス/ソーシャルログインの変更
          </ons-list-item>
          <ons-list-item tappable modifier="chevron" @click="passChange">
            ログインパスワードの変更
          </ons-list-item>
        </ons-list>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: "#myPage",
          methods: {
            popBack: function() {
              document.getElementById('myNavigator').popPage();
            },
            mailChange: function() {
              document.getElementById('myNavigator').pushPage("mailChange.html");
            },
            passChange: function() {
              document.getElementById('myNavigator').pushPage("passChange.html");
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id='mailChange.html'>
  <ons-page>
    <div id='mailChange' class='mailChange'>
      <div class="myPage__header">
        <a class="myPage__cancel" @click="popBack"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      </div>
      <div class="mailChange__str">現在のメールアドレス</div>
      <input class="mailChange__input" type="email" v-model="current_email" placeholder="メールアドレス">
      <hr>
      <div class="mailChange__str2">＊新しいメールアドレスを入力するか、新たに連携するサービスを選んでください。</div>
      <div class="mailChange__str">新しいメールアドレス</div>
      <input class="mailChange__input" type="email" v-model="new_email" placeholder="メールアドレス">
      <input class="mailChange__input" type="email" v-model="check_email" placeholder="確認(同じアドレスを入力してください)">
      <button class="mailChange__send" @click="send_mail">認証メールを送信</button>
      <!-- <div class="mailChange__str3">または</div> -->

      <div class="mailChange__sent" v-show="overlay" @click="finish">
        <div class="mailChange__batsu">×</div>
        <div class="mailChange__square">
          <div class="mailChange__str4">メールを送信しました</div>
          <div class="mailChange__str5">受信メールをご確認ください</div>
        </div>
      </div>
      <!-- <div id="firebaseui-auth-container"></div>
      <div id="loader">Loading...</div> -->
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: '#mailChange',
          data: {
            current_email: "",
            new_email: "",
            check_email: "",
            user: firebase.auth().currentUser,
            overlay: false,
          },
          methods: {
            popBack: function() {
              document.getElementById('myNavigator').popPage();
            },
            send_mail: function() {
              if(this.new_email !== this.check_email) {
                ons.notification.toast('確認メールアドレスが違います', {timeout: 1000, animation: "fall"});
                return;
              }
              if(this.new_email == "") {
                ons.notification.toast('新しいメールアドレスを入力してください', {timeout: 1000, animation: "fall"});
                return;
              }
              if(this.user) {
                if(this.user.email != this.current_email) {
                  ons.notification.toast('現在のメールアドレスが違います', {timeout: 1000, animation: "fall"});
                  return ;
                }
                hoge = this;
                this.user.updateEmail(this.new_email).then(function() {
                  hoge.user.sendEmailVerification().then(function() {
                    hoge.overlay = true;
                  }).catch(function(error) {
                    ons.notification.toast(error.message, {timeout: 5000, animation: "fall"});
                    return;
                  });
                }).catch(function(error) {
                  ons.notification.toast(error.message, {timeout: 5000, animation: "fall"});
                  return;
                });
              }
            },
            finish: function() {
              document.getElementById("myNavigator").resetToPage('index.html');
            }
          }
        });
      }
      ons.getScriptPage().onShow = function() {
        // ui.start('#firebaseui-auth-container', uiConfig);
      }
    </script>
  </ons-page>
</template>

<template id="memo.html">
  <ons-page>
    <div class="background" style="background-color: #FFF;"></div>
    <div id="memo" class="memo" v-cloak>
      <div class="memo__header">
        <img @click="backButton" src="images/2021_02_25_新素材/memo_back.png">
      </div>
      <input class="memo__title" placeholder="タイトル" v-model="title">
      <div class="memo__category">
        <a @click="choiceCategory('future')" :class="category==='future' ? 'memo__category--yellow' : 'memo__category--off'">やりたいこと</a>
        <a @click="choiceCategory('task')" :class="category==='task' ? 'memo__category--blue' : 'memo__category--off'">やりたくないこと</a>
        <a @click="choiceCategory('experience')" :class="category==='experience' ? 'memo__category--green' : 'memo__category--off'">出来事・体験</a>
        <a @click="choiceCategory('hobby')" :class="category==='hobby' ? 'memo__category--pink' : 'memo__category--off'">日常の小さな感情</a>
        <!-- <a @click="choiceCategory('その他')" :class="category==='その他' ? 'memo__category--black' : 'memo__category--off'">その他</a> -->
      </div>
      <div class="memo__str">●状況を整理しておこう</div>
      <div class="jobhunting_memo1__5w" style="margin-top: 0;">
        <div class="jobhunting_memo1__5w-contents">
          <p>いつ？</p>
          <textarea v-model="when"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>どこで？</p>
          <textarea v-model="where"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>だれが？だれと？</p>
          <textarea v-model="who"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>何を？</p>
          <textarea v-model="what"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>どのように？</p>
          <textarea v-model="how"></textarea>
        </div>
      </div>
      <textarea class="memo__freememo" placeholder="フリーメモ" v-model="freememo"></textarea>
      <button class="memo__recodebutton" @click="saveButton">記録する</button>
      <div class="memo__overlay" v-show="overlay">
        <div class="memo__overlay-icon"><img src="images/2021_02_25_新素材/memo_icon_white.png"></div>
        <div class="memo__overlay-str"> ”分析の芽” を記録しました。<br>アーカイブから確認できます。</div>
        <div class="memo__overlay-buttons">
          <!-- <button class="memo__overlay-button--red" @click="continueButton">このまま分析</button> -->
          <button class="memo__overlay-button--red" @click="newButton">新しい分析の芽を記録</button>
          <button class="memo__overlay-button--white" @click="homeButton">HOMEに戻る</button>
        </div>
      </div>
    </div>
    <script>
      var myNavigator = document.getElementById("myNavigator");
      var vue;
      ons.getScriptPage().onInit = function() {
        var e = myNavigator.topPage.data.event;
        vue = new Vue({
          el: '#memo',
          data: {
            title: "",
            when: "",
            where: "",
            who: "",
            what: "",
            how: "",
            freememo: "",
            category: "",
            overlay: false,
          },
          created: function() {
            console.log(e);
            if(e) {
              this.title = e.title;
            }
          },
          methods: {
            choiceCategory: function(str) {
              this.category = str;
              console.log(this.category);
            },
            saveButton: function() {
              // return;
              if(this.title === "") {
                ons.notification.toast("タイトルを入力してください", {timeout: 2000, animation: "fall"});
                return;
              }
              if(this.category === "") {
                ons.notification.toast("カテゴリを選択してください", {timeout: 2000, animation: "fall"});
                return;
              }
              // if(this.when === "" || this.where === "" || this.who === "" || this.what === "" || this.how === "") {
              //   ons.notification.toast("状況を入力してください", {timeout: 2000, animation: "fall"});
              //   return;
              // }
              this.overlay = true;
              var qAndA = new QAndA();
              qAndA.memo = this.freememo;
              if(e) {
                e.when = this.when;
                e.where = this.where;
                e.who = this.who;
                e.what = this.what;
                e.how = this.how;
                e.color = this.category;
                e.complete = true;
                setNewMyEvent(memo);
              } else {
                setNewData(qAndA, (id) => {
                  var memo = new MyEvent();
                  memo.title = this.title;
                  memo.when = this.when;
                  memo.where = this.where;
                  memo.who = this.who;
                  memo.what = this.what;
                  memo.how = this.how;
                  memo.color = this.category;
                  memo.complete = true;
                  memo.analyzeid = id;
                  setNewMyEvent(memo);
                });
              }
            },
            continueButton: function() {
              // myNavigator.pushPage('');
            },
            newButton: function() {
              this.overlay = false;
              this.title = "";
              this.category = "";
              this.when = "";
              this.where = "";
              this.who = "";
              this.what = "";
              this.how = "";
              this.freememo = "";
            },
            homeButton: function() {
              myNavigator.resetToPage('index.html');
            },
            backButton: function() {
              myNavigator.popPage();
            },
          },
        });
      }
    </script>
  </ons-page>
</template>

<template id='passChange.html'>
  <ons-page>
    <div id='passChange' class='mailChange'>
      <div class="myPage__header">
        <a class="myPage__cancel" @click="popBack"><ons-icon icon="fa-chevron-left"></ons-icon> 設定へ</a>
      </div>
      <div class="mailChange__str">現在のパスワード</div>
      <input class="mailChange__input" type="password" v-model="current_password" placeholder="パスワード">
      <div class="mailChange__str">新しいパスワード</div>
      <input class="mailChange__input" type="password" v-model="new_password" placeholder="パスワード">
      <input class="mailChange__input" type="password" v-model="check_password" placeholder="確認(同じパスワードを入力してください)">
      <button class="mailChange__send" @click="changePass">パスワードを変更</button>
      <div class="mailChange__sent" v-show="overlay" @click="finish">
        <div class="mailChange__batsu">×</div>
        <div class="mailChange__square">
          <div class="mailChange__str4">パスワードを変更しました</div>
        </div>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: '#passChange',
          data: {
            current_password: "",
            new_password: "",
            check_password: "",
            user: firebase.auth().currentUser,
            overlay: false,
          },
          methods: {
            popBack: function() {
              document.getElementById('myNavigator').popPage();
            },
            changePass: function() {
              if(this.new_password !== this.check_password) {
                ons.notification.toast('確認パスワードが違います', {timeout: 1000, animation: "fall"});
                return;
              }
              if(this.new_password == "") {
                ons.notification.toast('新しいパスワードを入力してください', {timeout: 1000, animation: "fall"});
                return;
              }
              if(this.user) {
                const vue = this;
                const credential = firebase.auth.EmailAuthProvider.credential(vue.user.email, vue.current_password);
                // ユーザ再認証
                vue.user.reauthenticateWithCredential(credential).then(function() {
                  // 再認証成功
                  vue.user.updatePassword(vue.new_password).then(function() {
                    // パスワードアップデート成功
                    vue.overlay = true;
                  }).catch(function(error) {
                    // パスワードアップデート失敗
                    ons.notification.toast(error.message, {timeout: 5000, animation: "fall"});
                    return;
                  });
                }).catch(function(error) {
                  // 再認証失敗
                  ons.notification.toast('現在のパスワードが違います', {timeout: 5000, animation: "fall"});
                  return;
                });
              }
            },
            finish: function() {
              document.getElementById("myNavigator").resetToPage('index.html');
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="account.html">
  <ons-page id="account">
    <div id="signIn" class="account">
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start; margin-left: 30px;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <p class="account__title">SIGN IN</p>
      <div class="account__form">
        <input type="email" class="account__input" v-model="email" placeholder="メールアドレス">
        <input type="password" class="account__input" v-model="password" placeholder="パスワード">
        <a class="account__go-btn" @click="onLoginAccount"><img src="images/各種ボタン/signin実行_ボタン.png" width="50px"></a>
        <!-- <hr>
        <button @click="onTwitterAccount" class="twitter_login"><ons-icon icon="fa-twitter"></ons-icon> Twitterアカウントでサインイン</button>
        <button @click="onGoogleAccount" class="google_login"><ons-icon icon="fa-google"></ons-icon> Googleアカウントでサインイン</button> -->
      </div>
      <a class="account__forgot-pass" @click="onForgotPassword">パスワードを忘れた場合</a>
      <!-- <div id="firebaseui-auth-container"></div>
      <div id="loader">Loading...</div> -->
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm_a = new Vue({
          el: '#signIn',
          data: {
            email: "",
            password: ""
          },
          methods: {
            onLoginAccount: function() {
              firebase.auth().signInWithEmailAndPassword(this.email, this.password)
                .then(function () {
                  ons.notification.toast('ログイン成功', { timeout: 1000, animation: 'fall'});
                  document.querySelector('#myNavigator').resetToPage("index.html");
                  localStorage.setItem("tutorial_finished", true);
                }).catch(function(error) {
                  ons.notification.toast(error.message, { timeout: 1000, animation: 'fall'});
                });
            },
            onTwitterAccount: function() {
              
            },
            onGoogleAccount: function() {
              //signInWithGoogle();
            },
            onForgotPassword: function() {
              document.getElementById("myNavigator").pushPage('password_reset.html');
            }
          }
        });
      }
      ons.getScriptPage().onShow = function() {
        // ui.start('#firebaseui-auth-container', uiConfig);
      }
    </script>
  </ons-page>
</template>

<template id="category.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD"></div>
    <div class="category">
      <img class="tenchan__lefttop" src="./images/分析中_キャラ.png">
      <div class="category__title">▶︎<u>分析カテゴリ</u><span class="category__title--span">を選ぶテン！</span></div>
      <ul class="category__slider">
        <li class="category__item" id="future">
          <div class="category__header--yellow">
            <span class="category__header-title">取り組みたいこと<br>叶えたいこと</span>
          </div>
          <div class="category__li">
            ●留学したい<br>
            ●インターンに行きたい<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="future_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item" id="jobhunting">
          <div class="category__header--purple">
            <span class="category__header-title">＜ 就活生向け ＞<br>ガクチカ</span>
          </div>
          <div class="category__li">
            ●アルバイトで接客に力を入れた<br>
            ●サークル合宿を取りまとめた<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="jobhunting_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item category__non-active" id="hobby">
          <div class="category__header--pink">
            <span class="category__header-title">趣味・好きなこと</span>
          </div>
          <div class="category__li">
            ●テニスが好き<br>
            ●古書店に行くのが好き<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="hobby_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item category__non-active" id="task">
          <div class="category__header--blue">
            <span class="category__header-title">タスク</span>
          </div>
          <div class="category__li">
            ●マニュアルを作成する<br>
            ●レポートを作成する<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="task_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item category__non-active" id="experience">
          <div class="category__header--green">
            <span class="category__header-title">過去の体験・経験</span>
          </div>
          <div class="category__li">
            ●バイトで接客に力を入れた<br>
            ●イメチェンした<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="exp_detail_btn">詳しい説明</a>
        </li>
      </ul>
      <div class="category__triangle"></div>
      <button class="category__go">決 定</button>
      <div id="categoryVue">
        <div class="overlay__tutorial--bg" v-show="overlay">
          <a class="overlay__str--left" @click="goLeft" v-show="!overlay0"><</a>
          <div class="overlay__tutorial--main" v-show="overlay0">
            <div class="overlay__tutorial--header">
              <div class="overlay__str--step">STEP 1</div>
              <div class="overlay__str--step-content">分析カテゴリを選ぶ</div>
            </div>
            ▼<span class="overlay__str--step1">分析する内容に合わせて選択</span>▼
            <div class="overlay__tutorial--step1">
              <div class="overlay__str--yellow">取り組みたいこと<br>叶えたいこと</div>
              <div class="overlay__str--pink">趣味<br>好きなこと</div>
              <div class="overlay__str--blue">タスク</div>
              <div class="overlay__str--green">過去の体験・経験</div>
            </div>
          </div>
          <div class="overlay__tutorial--main" v-show="overlay1">
            <div class="overlay__tutorial--header">
              <div class="overlay__str--step">STEP 2</div>
              <div class="overlay__str--step-content">テーマを決め、タグをつける</div>
            </div>
            <span class="overlay__str--step1">分析したいことを入力</span>
            <div class="overlay__str--step2">英会話を学びたい, アニメが好き など<br>自分なりにテーマ設定をしましょう！</div>
            <div class="overlay__tutorial--tri"></div>
            <span class="overlay__str--step1">テーマに合わせてタグをつける</span>
            <div class="overlay__str--step2">夢, 勉強, 人間関係 など<br>最大3つまで選ぶことができます！</div>
          </div>
          <div class="overlay__tutorial--main" v-show="overlay2">
            <div class="overlay__tutorial--header">
              <div class="overlay__str--step">STEP 3</div>
              <div class="overlay__str--step-content">分析&記録する</div>
            </div>
            <div class="overlay__str--red">\ 目指すは5回以上! /</div>
            <span class="overlay__str--step1">分析してテーマを深掘り</span>
            <div class="overlay__str--step2">テーマについて「なぜ？」と自問自答！<br>その回答内容が、自分の内面/外面の<br>どちらについてなのかも考えましょう。</div>
            <div class="overlay__tutorial--tri"></div>
            <span class="overlay__str--step1">分析の結果を記録する</span>
            <div class="overlay__str--step2">分析について振り返り、記録しましょう！</div>
          </div>
          <div class="overlay__tutorial--main" v-show="overlay3">
            <img class="overlay__tutorial--img" src="images/チュートリアルスタート_キャラ.png">
            <div class="overlay__str--step4">今からボクと一緒に、<br>"分析" の練習をしてみるテン！<br>準備はいいテン？</div>
            <div>
              <button class="overlay__tutorial--yes" @click="onButton">YES!</button>
              <button class="overlay__tutorial--skip" @click="skipModal = true">SKIP</button>
            </div>
            <skip-modal v-if="skipModal" @close="skipModal = false"></skip-modal>
          </div>
          <a class="overlay__str--right" @click="goRight" v-show="!overlay3">></a>
        </div>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    <script>
      ons.getScriptPage().onShow = function () {
        toolbar_active = 0;
        $('.category__slider').slick('setPosition');
        setTimeout(function() {
          $('.category__slider').css('opacity', 1);
        },100);
        $(".category__slider").on('beforeChange', function(){
          $('.slick-current').removeClass('category__active');
        });
        $('.category__slider').on('afterChange', function(){
          $('.slick-current').addClass('category__active');
        });
        $("#future_detail_btn").on("click", function() {
          document.querySelector("#myNavigator").pushPage("category_future.html");
          $('.category__slider').css('opacity', 0);
        });
        $("#hobby_detail_btn").on("click", function() {
          document.querySelector("#myNavigator").pushPage("category_hobby.html");
          $('.category__slider').css('opacity', 0);
        });
        $("#task_detail_btn").on("click", function() {
          document.querySelector("#myNavigator").pushPage("category_task.html");
          $('.category__slider').css('opacity', 0);
        });
        $("#exp_detail_btn").on("click", function() {
          document.querySelector("#myNavigator").pushPage("category_experience.html");
          $('.category__slider').css('opacity', 0);
        });
        $("#jobhunting_detail_btn").on("click", function() {
          document.querySelector("#myNavigator").pushPage("category_jobhunting.html");
          $('.category__slider').css('opacity', 0);
        });
        $(".category__go").on("click", function() {
          if($("#future").hasClass("slick-active")) {
            document.querySelector("#myNavigator").pushPage("analyze_future.html");
          } else if($("#hobby").hasClass("slick-active")) {
            document.querySelector("#myNavigator").pushPage("analyze_hobby.html");
          } else if($("#task").hasClass("slick-active")) {
            document.querySelector("#myNavigator").pushPage("analyze_task.html");
          } else if($("#jobhunting").hasClass("slick-active")){
            document.querySelector("#myNavigator").pushPage("jobhunting_story.html");
          } else {
            document.querySelector("#myNavigator").pushPage("analyze_experience.html");
          }
          $('.category__slider').css('opacity', 0);
        });
      }
      ons.getScriptPage().onInit = function() {
        $(".category__slider").on('init', function(){
          $('.slick-current').addClass('category__active');
        });
        $(".category__slider").slick({
          centerMode: true,
          arrows: false,
          focusOnSelect: true,
          accessibility: false,
          centerPadding: "5vw",
          slidesToShow: 3,
          responsive: [
            {
              breakpoint: 768,
              settings: {
                centerPadding: "25vw",
                slidesToShow: 1
              }
            },
            {
              breakpoint: 480,
              settings: {
                centerPadding: "20vw",
                slidesToShow: 1
              }
            }
          ]
        });
        new Vue({
          el: '#categoryVue',
          data: {
            tutorialFinish: localStorage.getItem("tutorial_finished"),
            overlay: false,
            overlay0: false,
            overlay1: false,
            overlay2: false,
            overlay3: false,
            skipModal: false,
          },
          created: function() {
            if(!(this.tutorialFinish)) {
              this.overlay = true;
              this.overlay0 = true;
            }
          },
          methods: {
            goLeft: function() {
              console.log("goleft");
              if(this.overlay1) {
                this.overlay1 = false;
                this.overlay0 = true;
              } else if(this.overlay2) {
                this.overlay2 = false;
                this.overlay1 = true;
              } else if(this.overlay3) {
                this.overlay3 = false;
                this.overlay2 = true;
              } else if(this.overlay4) {
                this.overlay4 = false;
                this.overlay3 = true;
              }
            },
            goRight: function() {
              console.log("goright");
              if(this.overlay0) {
                this.overlay0 = false;
                this.overlay1 = true;
              } else if(this.overlay1) {
                this.overlay1 = false;
                this.overlay2 = true;
              } else if(this.overlay2) {
                this.overlay2 = false;
                this.overlay3 = true;
              } else if(this.overlay3) {
                this.overlay3 = false;
                this.overlay4 = true;
              }
            },
            onButton: function() {
              document.getElementById("myNavigator").resetToPage("category_tutorial.html");
            },
          },
        });
      }
    </script>
  </ons-page>
</template>

<template id="category_tutorial.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD"></div>
    <div class="category">
      <img class="tenchan__lefttop" src="./images/分析中_キャラ.png">
      <div class="category__title"><span class="tutorial__analyze--title">▶︎</span><u>分析カテゴリ</u><span class="category__title--span">を選ぶテン！</span></div>
      <img class="tutorial__category" src="images/チュートリアル/tutorial_explain1.png">
      <ul class="category__slider">
        <li class="category__item" id="future">
          <div class="category__header--yellow">
            <span class="category__header-title">取り組みたいこと<br>叶えたいこと</span>
          </div>
          <div class="category__li">
            ●留学したい<br>
            ●インターンに行きたい<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="future_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item category__non-active" id="hobby">
          <div class="category__header--pink">
            <span class="category__header-title">趣味・好きなこと</span>
          </div>
          <div class="category__li">
            ●テニスが好き<br>
            ●古書店に行くのが好き<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="hobby_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item category__non-active" id="task">
          <div class="category__header--blue">
            <span class="category__header-title">タスク</span>
          </div>
          <div class="category__li">
            ●マニュアルを作成する<br>
            ●レポートを作成する<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="task_detail_btn">詳しい説明</a>
        </li>
        <li class="category__item category__non-active" id="experience">
          <div class="category__header--green">
            <span class="category__header-title">過去の体験・経験</span>
          </div>
          <div class="category__li">
            ●アルバイトで接客に力を入れた<br>
            ●イメチェンした<div class="category__nado">など</div>
          </div>
          <a class="category__link" id="exp_detail_btn">詳しい説明</a>
        </li>
      </ul>
      <div class="category__triangle"></div>
      <button class="category__go">決 定</button>
    </div>
    <script>
      ons.getScriptPage().onShow = function () {
        toolbar_active = 0;
        $('.category__slider').slick('setPosition');
        setTimeout(function() {
          $('.category__slider').css('opacity', 1);
        },100);
        $(".category__slider").on('beforeChange', function(){
          $('.slick-current').removeClass('category__active');
        });
        $('.category__slider').on('afterChange', function(){
          $('.slick-current').addClass('category__active');
        });
        $("#future_detail_btn").on("click", function() {
          ons.notification.toast("「取り組みたいこと/叶えたいこと」を選んで決定ボタンを押してください", {timeout: 2000, animation: "fall"});
        });
        $("#hobby_detail_btn").on("click", function() {
          ons.notification.toast("「取り組みたいこと/叶えたいこと」を選んで決定ボタンを押してください", {timeout: 2000, animation: "fall"});
        });
        $("#task_detail_btn").on("click", function() {
          ons.notification.toast("「取り組みたいこと/叶えたいこと」を選んで決定ボタンを押してください", {timeout: 2000, animation: "fall"});
        });
        $("#exp_detail_btn").on("click", function() {
          ons.notification.toast("「取り組みたいこと/叶えたいこと」を選んで決定ボタンを押してください", {timeout: 2000, animation: "fall"});
        });
        $(".category__go").on("click", function() {
          if($("#future").hasClass("slick-active")) {
            document.querySelector("#myNavigator").pushPage("analyze_tutorial.html");
            $('.category__slider').css('opacity', 0);
          } else {
            ons.notification.toast("「取り組みたいこと/叶えたいこと」を選んで決定ボタンを押してください", {timeout: 2000, animation: "fall"});
          }
        });
      }
      ons.getScriptPage().onInit = function() {
        $(".category__slider").on('init', function(){
          $('.slick-current').addClass('category__active');
        });
        $(".category__slider").slick({
          centerMode: true,
          centerPadding: "70px",
          arrows: false,
          focusOnSelect: true,
          accessibility: false,
        });
        new Vue({
          el: '#categoryVue',
          data: {
          },
          methods: {
          },
        });
      }
    </script>
  </ons-page>
</template>

<template id="category_future.html">
  <ons-page>
    <div class="background" style="background-color: #FFF"></div>
    <div id="category_future">
      <div class="cat-detail__header">
        <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
      </div>
      <div class="cat-detail__title--yellow">
        取り組みたいこと<br>叶えたいこと
      </div>
      <div class="cat-detail__exp">今後取り組みたいこと、叶えたいこと、やってみたいことなどについて分析するカテゴリです。</div>
      <hr class="cat-detail__hr--yellow">
      <div class="cat-detail__midashi">●このカテゴリで分析すると…</div>
      <div class="cat-detail__frame">
        「<span class="cat-detail__emphasis">やりたいと思っているけれど、やれていない</span>」ということに対して、適切な1歩目を踏み出せるようになる!
      </div>
      <div class="cat-detail__frame">
        <span class="cat-detail__emphasis">やりたいと思った原点</span>を発見/再確認できる!
      </div>
      <div class="cat-detail__midashi">●テーマ例</div>
      <div class="cat-detail__frame">
        ・留学したい<br><br>
        ・インターンに行きたい<br><br>
        ・国家公務員になりたい<br><br>
        ・家族を笑顔にしたい<br><br>
        ・楽器を練習したい<br><br>
        ・フランス語をもっと勉強したい<span class="cat-detail__nado">など</span>
      </div>
      <button class="cat-detail__more" @click="goMore">もっと見る</button>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: "#category_future",
          methods: {
            goMore: function() {
              window.open("https://noteappm.wixsite.com/examples", "_self", "location=yes");
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="category_hobby.html">
  <ons-page>
    <div class="background" style="background-color: #FFF"></div>
    <div id="category_hobby">
      <div class="cat-detail__header">
        <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
      </div>
      <div class="cat-detail__title--pink">
        趣味・好きなこと
      </div>
      <div class="cat-detail__exp">自分の趣味や好きな物事、趣向などについて分析するカテゴリです。</div>
      <hr class="cat-detail__hr--pink">
      <div class="cat-detail__midashi">●このカテゴリで分析すると…</div>
      <div class="cat-detail__frame">改めて、<span class="cat-detail__emphasis">自分の「好き」を言語化</span>できる!</div>
      <div class="cat-detail__frame">他人になかなか理解してもらえないことに対する<span class="cat-detail__emphasis">自分の想いを共有できる!</span></div>
      <div class="cat-detail__midashi">●テーマ例</div>
      <div class="cat-detail__frame">
        ・読書が好き<br><br>
        ・テニスが好き<br><br>
        ・音楽を聴くのが好き<br><br>
        ・ファッションが好き<br><br>
        ・ものづくりが好き<br><br>
        ・アニメの〇〇〇が好き<span class="cat-detail__nado">など</span>
      </div>
      <button class="cat-detail__more" @click="goMore">もっと見る</button>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: "#category_hobby",
          methods: {
            goMore: function() {
              window.open("https://noteappm.wixsite.com/examples", "_self", "location=yes");
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="category_experience.html">
  <ons-page>
    <div class="background" style="background-color: #FFF"></div>
    <div id="category_experience">
      <div class="cat-detail__header">
        <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
      </div>
      <div class="cat-detail__title--green">
        過去の体験・経験
      </div>
      <div class="cat-detail__exp">
        これまでの経験や体験、記憶に残っていることなどについて分析するカテゴリです。
      </div>
      <hr class="cat-detail__hr--green">
      <div class="cat-detail__midashi">●このカテゴリで分析すると…</div>
      <div class="cat-detail__frame">
        自分が<span class="cat-detail__emphasis">当時何を考えていたのか</span>を思い出せる!
      </div>
      <div class="cat-detail__frame">
        その出来事で、<span class="cat-detail__emphasis">自分が何をどう感じたのか</span>の整理ができる!
      </div>
      <div class="cat-detail__midashi">●テーマ例</div>
      <div class="cat-detail__frame">
        ・大学の学園祭で代表を務めた<br><br>
        ・居酒屋アルバイトで接客に力を入れた<br><br>
        ・TOEICで900点を目標に頑張った<br><br>
        ・〇〇を受験した<br><br>
        ・高校を中退した<br><br>
        ・イメチェンした<span class="cat-detail__nado">など</span>
      </div>
      <button class="cat-detail__more" @click="goMore">もっと見る</button>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: "#category_experience",
          methods: {
            goMore: function() {
              window.open("https://noteappm.wixsite.com/examples", "_self", "location=yes");
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="category_task.html">
  <ons-page>
    <div class="background" style="background-color: #FFF"></div>
    <div id="category_task">
      <div class="cat-detail__header">
        <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
      </div>
      <div class="cat-detail__title--blue">
        タスク
      </div>
      <div class="cat-detail__exp">
        やらなければならないこと、タスクなどについて分析するカテゴリです。
      </div>
      <hr class="cat-detail__hr--blue">
      <div class="cat-detail__midashi">●このカテゴリで分析すると…</div>
      <div class="cat-detail__frame">
        他人から<span class="cat-detail__emphasis">与えられたタスクを自分事に</span>落とし込める!
      </div>
      <div class="cat-detail__frame">
        「やらなければならないけどやりたくない」タスクへの<span class="cat-detail__emphasis">やる気が出る</span>
      </div>
      <div class="cat-detail__midashi">●テーマ例</div>
      <div class="cat-detail__frame">
        ・営業をする<br><br>
        ・マニュアルを作成する<br><br>
        ・期末レポートを書く<br><br>
        ・アルバイトに行く<br><br>
        ・就活をする<br><br>
        ・節約する<span class="cat-detail__nado">など</span>
      </div>
      <button class="cat-detail__more" @click="goMore">もっと見る</button>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: "#category_task",
          methods: {
            goMore: function() {
              window.open("https://noteappm.wixsite.com/examples", "_self", "location=yes");
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="category_jobhunting.html">
  <ons-page>
    <div class="background" style="background-color: #FFF"></div>
    <div id="category_jobhunting">
      <div class="cat-detail__header">
        <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
      </div>
      <div class="cat-detail__title--purple">
        ＜ 就活生向け ＞<br>ガクチカ
      </div>
      <div class="cat-detail__exp">
        就活でよく問われる「学生時代に力を入れたこと」(=通称ガクチカ)について、出来事の整理→分析→ガクチカ作成まで、一貫してサポートするカテゴリです。
      </div>
      <hr class="cat-detail__hr--purple">
      <div class="cat-detail__midashi">1. 出来事整理 編</div>
      <div class="cat-detail__frame">
        学生時代に頑張ったことを洗い出し、「いつ」「どこで」などの基本的な事柄を整理します。
      </div>
      <div class="cat-detail__midashi">2. なぜなぜ分析 編</div>
      <div class="cat-detail__frame">
        その頑張ったことに基づいて、自問自答をします。その結果から、自分の強みや工夫したポイントなどを考えます。
      </div>
      <div class="cat-detail__midashi">3. ガクチカ準備 編</div>
      <div class="cat-detail__frame">
        出来事整理となぜなぜ分析の結果を参考に、ガクチカを書いていきます。フォーマットに当てはめるだけなので、初めてでも安心です。
      </div>
      <div class="cat-detail__triangle"></div>
      <div class="cat-detail__str3">自己分析に基づいたガクチカの土台が完成！</div>
      <div class="cat-detail__str2">さらなる自己分析を重ねたり、表現を磨いたりして、ハイレベルなガクチカを目指しましょう！</div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: "#category_jobhunting",
          methods: {
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_future.html">
  <ons-page>
    <div class="background analyze__background"></div>
    <div class="analyze">
      <div id="analyzeVue" v-cloak>
        <div class="analyze__header--yellow">
          <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
          <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png"></a>
        </div>
        <div>
          <img class="analyze__tenchan" src="images/分析カテゴリ追加時_素材/analyze_character.png">
        </div>
        <div class="analyze__main">
          <input class="analyze__theme" type="text" v-model="theme" placeholder="取り組みたい・叶えたいこと">
          <hr class="analyze__hr--yellow">
          <p class="analyze__exp">＊タグを選んでください(最大3つまで)</p>
          <div class="analyze__tag-container">
            <select v-model="cat[0]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[1]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[2]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
          </div>
          <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        </div>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        sBanner();
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            categories: [
              "夢",
              "欲しいもの",
              "就活",
              "研究",
              "進路",
              "将来",
              "勉強",
              "スキルアップ",
              "資格",
              "アルバイト",
              "サークル",
              "部活",
              "人間関係",
              "生活",
              "自己分析",
              "自分の性格/生き方",
              "自分磨き",
              "疑問",
              "3ヶ月後",
              "1年後",
              "10年後",
              "その他",
            ],
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme == "") {
                ons.notification.toast('テーマが入力されていません', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.length == 0) {
                ons.notification.toast('タグを1～3つ選択してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.existsSameValue(this.category)) {
                ons.notification.toast('同じタグが選択されています', {timeout: 2000, animation: "fall"});
                return;
              }
              qAndA.questions.push("取り組みたいこと/叶えたいこと");
              qAndA.answers.push(this.theme);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = this.category;
              qAndA.color = "future";
              qAndA.id = setNewData(qAndA);
              localStorage.setItem("tutorial_finished", "true");
              hBanner();
              document.querySelector('#myNavigator').replacePage('start.html', {
                data: {
                  qAndA: qAndA
                }
              });
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            closeModal: function() {
              this.showHelpModal = false;
            },
            existsSameValue: function(a) {
              var s = new Set(a);
              return s.size != a.length;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_hobby.html">
  <ons-page>
    <div class="background analyze__background"></div>
    <div class="analyze">
      <div id="analyzeVue" v-cloak>
        <div class="analyze__header--pink">
          <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
          <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png"></a>
        </div>
        <div>
          <img class="analyze__tenchan" src="images/分析カテゴリ追加時_素材/analyze_character.png">
        </div>
        <div class="analyze__main">
          <input class="analyze__theme" type="text" v-model="theme" placeholder="趣味・好きなこと">
          <hr class="analyze__hr--pink">
          <p class="analyze__exp">＊タグを選んでください(最大3つまで)</p>
          <div class="analyze__tag-container">
            <select v-model="cat[0]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[1]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[2]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
          </div>
          <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        </div>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        sBanner();
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            categories: [
              "音楽",
              "エンタメ",
              "美容・健康",
              "旅行・おでかけ・買い物",
              "スポーツ",
              "自然・アウトドア",
              "ゲーム",
              "乗り物",
              "芸術",
              "勉強・能力",
              "仕事・研究",
              "考える",
              "作る",
              "食べる",
              "飲む・呑む",
              "話す",
              "寝る",
              "書く",
              "何もしない",
              "その他",
            ],
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme == "") {
                ons.notification.toast('テーマが入力されていません', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.length == 0) {
                ons.notification.toast('タグを1～3つ選択してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.existsSameValue(this.category)) {
                ons.notification.toast('同じタグが選択されています', {timeout: 2000, animation: "fall"});
                return;
              }
              qAndA.questions.push("趣味・好きなこと");
              qAndA.answers.push(this.theme);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = this.category;
              qAndA.color = "hobby";
              qAndA.id = setNewData(qAndA);
              localStorage.setItem("tutorial_finished", "true");
              hBanner();
              document.querySelector('#myNavigator').replacePage('start.html', {
                data: {
                  qAndA: qAndA
                }
              });
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            closeModal: function() {
              this.showHelpModal = false;
            },
            existsSameValue: function(a) {
              var s = new Set(a);
              return s.size != a.length;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_experience.html">
  <ons-page>
    <div class="background analyze__background"></div>
    <div class="analyze">
      <div id="analyzeVue" v-cloak>
        <div class="analyze__header--green">
          <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
          <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png"></a>
        </div>
        <div>
          <img class="analyze__tenchan" src="images/分析カテゴリ追加時_素材/analyze_character.png">
        </div>
        <div class="analyze__main">
          <input class="analyze__theme" type="text" v-model="theme" placeholder="過去の体験・経験">
          <hr class="analyze__hr--green">
          <p class="analyze__exp">＊タグを選んでください(最大3つまで)</p>
          <div class="analyze__tag-container">
            <select v-model="cat[0]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[1]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[2]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
          </div>
          <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        </div>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        sBanner();
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            categories: [
              "就活・転職",
              "自己整理",
              "記録目的",
              "嬉しかったこと",
              "感謝したこと",
              "満足していること",
              "勇気を出したこと",
              "気持ちよかったこと",
              "笑ったこと",
              "感動したこと",
              "癒されたこと",
              "胸に響いたこと",
              "悲しかったこと",
              "つらかったこと",
              "嫌だったこと",
              "後悔していること",
              "恨んでいること",
              "傷ついたこと",
              "病んだこと",
              "怒ったこと",
              "我慢したこと",
              "驚いたこと",
              "苦労したこと",
              "悩んだこと",
              "原体験となったこと",
              "自信になったこと",
              "興味をもったこと",
              "印象に残ったこと",
              "その他",
            ],
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme == "") {
                ons.notification.toast('テーマが入力されていません', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.length == 0) {
                ons.notification.toast('タグを1～3つ選択してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.existsSameValue(this.category)) {
                ons.notification.toast('同じタグが選択されています', {timeout: 2000, animation: "fall"});
                return;
              }
              qAndA.questions.push("過去の体験・経験");
              qAndA.answers.push(this.theme);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = this.category;
              qAndA.color = "experience";
              qAndA.id = setNewData(qAndA);
              localStorage.setItem("tutorial_finished", "true");
              hBanner();
              document.querySelector('#myNavigator').replacePage('start.html', {
                data: {
                  qAndA: qAndA
                }
              });
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            closeModal: function() {
              this.showHelpModal = false;
            },
            existsSameValue: function(a) {
              var s = new Set(a);
              return s.size != a.length;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_task.html">
  <ons-page>
    <div class="background analyze__background"></div>
    <div class="analyze">
      <div id="analyzeVue" v-cloak>
        <div class="analyze__header--blue">
          <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
          <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png"></a>
        </div>
        <div>
          <img class="analyze__tenchan" src="images/分析カテゴリ追加時_素材/analyze_character.png">
        </div>
        <div class="analyze__main">
          <input class="analyze__theme" type="text" v-model="theme" placeholder="タスク">
          <hr class="analyze__hr--blue">
          <p class="analyze__exp">＊タグを選んでください(最大3つまで)</p>
          <div class="analyze__tag-container">
            <select v-model="cat[0]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[1]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[2]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
          </div>
          <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        </div>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        sBanner();
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            categories: [
              "学校・習い事",
              "会社・団体・組織",
              "アルバイト",
              "家庭・親",
              "教師・先生",
              "上司・先輩",
              "同僚・友達",
              "国・役所",
              "課題",
              "仕事",
              "日常関係",
              "将来設計",
              "人間関係",
              "資産形成",
              "義務",
              "その他",
            ],
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme == "") {
                ons.notification.toast('テーマが入力されていません', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.length == 0) {
                ons.notification.toast('タグを1～3つ選択してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.existsSameValue(this.category)) {
                ons.notification.toast('同じタグが選択されています', {timeout: 2000, animation: "fall"});
                return;
              }
              qAndA.questions.push("タスク");
              qAndA.answers.push(this.theme);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = this.category;
              qAndA.color = "task";
              qAndA.id = setNewData(qAndA);
              localStorage.setItem("tutorial_finished", "true");
              hBanner();
              document.querySelector('#myNavigator').replacePage('start.html', {
                data: {
                  qAndA: qAndA
                }
              });
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            closeModal: function() {
              this.showHelpModal = false;
            },
            existsSameValue: function(a) {
              var s = new Set(a);
              return s.size != a.length;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_jobhunting.html">
  <ons-page>
    <div class="background analyze__background"></div>
    <div class="analyze">
      <div id="analyzeVue" v-cloak>
        <div class="analyze__header--green">
          <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
          <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png"></a>
        </div>
        <div>
          <img class="analyze__tenchan" src="images/分析カテゴリ追加時_素材/analyze_character.png">
        </div>
        <div class="analyze__main">
          <input class="analyze__theme" type="text" v-model="theme" placeholder="過去の体験・経験">
          <hr class="analyze__hr--green">
          <p class="analyze__exp">＊タグを選んでください(最大3つまで)</p>
          <div class="analyze__tag-container">
            <select v-model="cat[0]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[1]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[2]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
          </div>
          <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
        </div>
        <my-toolbar></my-toolbar>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        sBanner();
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            categories: [
              "就活・転職",
              "自己整理",
              "記録目的",
              "嬉しかったこと",
              "感謝したこと",
              "満足していること",
              "勇気を出したこと",
              "気持ちよかったこと",
              "笑ったこと",
              "感動したこと",
              "癒されたこと",
              "胸に響いたこと",
              "悲しかったこと",
              "つらかったこと",
              "嫌だったこと",
              "後悔していること",
              "恨んでいること",
              "傷ついたこと",
              "病んだこと",
              "怒ったこと",
              "我慢したこと",
              "驚いたこと",
              "苦労したこと",
              "悩んだこと",
              "原体験となったこと",
              "自信になったこと",
              "興味をもったこと",
              "印象に残ったこと",
              "その他",
            ],
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme == "") {
                ons.notification.toast('テーマが入力されていません', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.length == 0) {
                ons.notification.toast('タグを1～3つ選択してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.existsSameValue(this.category)) {
                ons.notification.toast('同じタグが選択されています', {timeout: 2000, animation: "fall"});
                return;
              }
              qAndA.questions.push("過去の体験・経験");
              qAndA.answers.push(this.theme);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = this.category;
              qAndA.color = "experience";
              qAndA.id = setNewData(qAndA);
              localStorage.setItem("tutorial_finished", "true");
              hBanner();
              document.querySelector('#myNavigator').replacePage('start.html', {
                data: {
                  qAndA: qAndA
                }
              });
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            closeModal: function() {
              this.showHelpModal = false;
            },
            existsSameValue: function(a) {
              var s = new Set(a);
              return s.size != a.length;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="analyze_tutorial.html">
  <ons-page id="analyze">
    <div class="background analyze__background"></div>
    <div class="analyze">
      <div id="analyzeVue" v-cloak>
        <div class="analyze__header--yellow">
          <a @click="document.getElementById('myNavigator').popPage()"><img src="images/分析カテゴリ追加時_素材/analyze_back-category.png"></a>
          <button @click="showSkipModal = true" class="tutorial__skip2">SKIP</button>
          <a class="analyze__help-button" @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png"></a>
        </div>
        <div>
          <img class="analyze__tenchan" src="images/分析カテゴリ追加時_素材/analyze_character.png">
        </div>
        <img class="tutorial__analyze1" src="images/チュートリアル/tutorial_explain2.png">
        <div class="analyze__main">
          <input class="analyze__theme" type="text" v-model="theme" placeholder="英会話を学びたい">
          <hr class="analyze__hr--yellow">
          <p class="analyze__exp">＊タグを選んでください(最大3つまで)</p>
          <div class="analyze__tag-container">
            <select v-model="cat[0]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[1]" class="analyze__tag">
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
            <select v-model="cat[2]" class="analyze__tag" disabled>
              <option value="">タグ</option>
              <option v-for="n in categories" :value="n">{{ n }}</option>
            </select>
          </div>
          <button @click="nextButtonClick" class="analyze__next-button">これを分析！</button>
          <img class="tutorial__analyze2" src="images/チュートリアル/tutorial_explain3.png">
        </div>
        <skip-modal v-if="showSkipModal" @close="showSkipModal = false"></skip-modal>
      </div>
    </div>
    
    <script>
      ons.getScriptPage().onInit = function () {
        var qAndA = new QAndA();
        var vm_a = new Vue({
          el: '#analyzeVue',
          data: {
            theme: "",
            category: [],
            cat: [
              "",
              "",
              "",
            ],
            showHelpModal: false,
            categories: [
              "夢",
              "欲しいもの",
              "就活",
              "研究",
              "進路",
              "将来",
              "勉強",
              "スキルアップ",
              "資格",
              "アルバイト",
              "サークル",
              "部活",
              "人間関係",
              "生活",
              "自己分析",
              "自分の性格/生き方",
              "自分磨き",
              "疑問",
              "3ヶ月後",
              "1年後",
              "10年後",
              "その他",
            ],
            showSkipModal: false,
          },
          methods: {
            nextButtonClick: function() {
              this.category = [];
              for(var i=0; i<3; i++) {
                if(this.cat[i] != "") {
                  this.category.push(this.cat[i]);
                }
              }
              if (this.theme != "英会話を学びたい") {
                ons.notification.toast('テーマに「英会話を学びたい」と入力してください', {timeout: 2000, animation: "fall"});
                return;
              }
              if (this.category.includes("勉強") && this.category.includes("スキルアップ") && this.category.length === 2) {
                document.querySelector('#myNavigator').pushPage('start.html');
                localStorage.setItem('tutorial_finished', false);
                return ;
              }
              ons.notification.toast('「勉強」と「スキルアップ」のタグを選んで下さい', {timeout: 2000, animation: "fall"});
            },
            helpButtonClick: function() {
              ons.notification.toast('チュートリアルではヘルプを表示できません', {timeout: 1000, animation: "fall"});
            },
            closeModal: function() {
              this.showHelpModal = false;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="check_tutorial.html">
  <ons-page>
    <div id="check_tutorial">
      <p>チュートリアルはホーム画面の<br>OPTIONSからいつでも確認できます。</p>
      <button @click="goIndex">OK</button>
    </div>
    <script>
      new Vue({
        el: '#check_tutorial',
        methods: {
          goIndex: function() {
            localStorage.setItem("tutorial_finished", "true")
            document.getElementById('myNavigator').resetToPage('index.html');
          }
        }
      })
    </script>
  </ons-page>
</template>

<template id="finish_tutorial.html">
  <ons-page>
    <div id="finish_tutorial">
      <img src="images/チュートリアル_練習お疲れさま_キャラ.png">
      <p>練習お疲れさまテン！<br>これでキミも "分析" マスターだテン！</p>
      <button onclick="onButton()">練習を終了する</button>
    </div>
    <script>
      function onButton() {
        localStorage.setItem("tutorial_finished", "true");
        document.getElementById("myNavigator").resetToPage('index.html');
      }
    </script>
  </ons-page>
</template>

<template id="explain.html">
  <ons-page>
    <div>
      <ons-tabbar swipeable hide-tabs>
        <ons-tab page="tab1.html" active></ons-tab>
        <ons-tab page="tab2.html"></ons-tab>
      </ons-tabbar>
    </div>
  </ons-page>
</template>

<template id="tab1.html">
  <ons-page>
    <div class="explain">
      <img src="images/チュートリアル/explain_tab1.svg" class="explain__tab">
      <div class="explain__white"></div>
    </div>
  </ons-page>
</template>

<template id="tab2.html">
  <ons-page>
    <div class="explain" id="tab2">
      <img src="images/チュートリアル/explain_tab2.svg" class="explain__tab">
      <a @click="onClick"><img class="explain__nextbtn" src="images/機能説明_次へボタン.png"></a>
    </div>
    <script>
      var vm = new Vue({
        el: '#tab2',
        methods: {
          onClick: function() {
            document.getElementById("myNavigator").pushPage('register.html');
          }
        }
      })
    </script>
  </ons-page>  
</template>

<template id="feedback.html">
  <ons-page>
    <div class="background" style="background-color: #F7F7F7;"></div>
    <div id="feedback" v-cloak>
      <div class="feedback__head">
        <a class="feedback__cancel" @click="popBack"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>  
      </div>
      <div class="feedback__head--h1">フィードバック</div>
      <form class="feedback__form">
        <p class="feedback__exp">サービスに関して気になることや改善すべき点について、簡単な説明を入力してください。</p>    
        <textarea class="feedback__textarea" v-model="text"></textarea>
        <input type="button" value="送信" class="feedback__submit" @click="send"></input>
      </form>
      <div class="feedback__overlay" v-show="showModal" @click="closeModal">
        <a class="feedback__overlay--close" @click="closeModal"><ons-icon icon="fa-window-close"></ons-icon></a>
        <div class="feedback__overlay--thx">ありがとうございます!</div>
        <div class="feedback__overlay--send">フィードバックを送信しました。</div>
        <div class="feedback__overlay--img"><img src="images/チュートリアル/thankyou_character.png"></div>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: "#feedback",
          data: {
            showModal: false,
            text: "",
          },
          methods: {
            popBack: function() {
              document.getElementById("myNavigator").resetToPage('index.html');
            },
            closeModal: function() {
              this.showModal = false;
            },
            send: function() {
              createFeedback(this.text);
              this.showModal = true;
            }
          }
        })
      }
    </script>
  </ons-page>
</template>

<template id="help.html">
  <ons-page>
    <div id="help">
      <div class="header">
        <img class="tenchan__lefttop" src="images/ヘルプ_キャラ.png">
        <div class="speech-box">
        </div>
        <div class="links">
          <a href="#1">▶︎やりたいことが挙げられない</a>
          <a href="#2">▶︎掘り下げ方がわからない</a>
          <a href="#3">▶︎ハッとしない</a>
          <a href="#4">▶︎真因から悩んでしまう</a>
        </div>
        <a @click="back" class="popback"><img src="images/各種ボタン/help-back_ボタン.png"></a>
      </div>
      <div class="help-content">
        <h1>使い方</h1>
        <div>
          使い方でわかりにくいポイントを説明します<br><br>
          Q: “内” と “外” ってなに？<br><br>
          <span>A</span>: “外” ＝環境要因や一般的な事実、 “内” =自分<br>
          の気持ちや想い<br>
          アプリでは“外”は1回タップで水色、 “内” は2回<br>
          タップで青色です！<br><br>
          ＜外の例＞まわりの人の影響、マスメディア、世の<br>
          中の一般的な常識<br>
          ＜内の例＞自分の感情、自分が良いと感じること<br><br>
          なぜ？と深堀をしていくと、「友達に言われたから」<br>
          「大学がそういうものだから」と環境の要因にたど<br>
          り着いてしまうことがよくあります！ “外” 側ばか<br>
          りを見ていると、取り組みたいことの実現には近づ<br>
          かないので、“内”側を見ていくことが大切です！<br><br>
          ＜悪い例①＞バイクが欲しい→バイクが便利だから<br>
          →バイクは早いから→バイクはエンジンを積んでい<br>
          るから<br>
          ＜悪い例②＞医者になりたい→親や先生に勧められ<br>
          たから→医者が安定する職業だから<br><br>
          Q: “外” か “内” かわからない<br><br>
          <span>A</span>:どれが “外” か “内” かは決まっていません。一<br>
          般的な事実であっても、自分にとっては “内” 側だ<br>
          なあとか、育ってきた環境が “内” 側を形成してい<br>
          ることがあると思います！<br>
        </div>
        <h1 id="1">やりたいことが挙げられない</h1>
        <div>
          Q:やりたいことが思いつかない…<br><br>
          <span>A</span>:大きな夢とかを考えなくても！学びたい学問、読みたい本、やりたい趣味を考えてみましょう。<br>例:経済学を学びたい！/ハムレットが読みたい！/ダイビングライセンスを取りたい！<br><br>
          Q:大きな夢を考えてみたい<br><br>
          <span>A</span>:自分の願望に素直になって想像を膨らませていきましょう！<br>
          例:どんな家に住みたいのか/どんな人と結婚してみたいか/いつ結婚したいか/家族のために何をしたいか/社会のために何をしたいのか/どんな車に乗りたいのか<br><br>
          Q:小さいやりたいことor大きいやりたいことしか思いつかず、中くらいの現実的なことが出てこない<br><br>
          <span>A</span>:明日の自分がどうなっていたいか、1週間後の自分がどうなっていたいか、1か月後の自分がどうなっていたいか、1年後…と順番に考えていこう。
        </div>  
        <h1 id="2">掘り下げ方がわからない</h1>
        <div>
          Q:なんで？って聞かれても…<br><br>
          <span>A</span>:そうですよね！難しい！それを考えることに価値があります。<br>
          <span>A</span>:自問自答するためには、適切な問いを探すことも重要です！環境に対してなら、その人の意図は？とかまわりの人の思考に想いを馳せても！<br>
          <span>A</span>:やりたいことに何個もワードが含まれている可能性があります。例えば、「会社を経営してお金持ちになりたい」、そしたら「経営」の1つのワードに着目してみましょう。どうして経営したいのか？を考えてみよう。<br><br>
          Q:なぜ___?の後ろの部分がわからない<br><br>
          <span>A</span>:必ずしも、なぜ…の形にしなくても良いです。なんで？という疑問を自分の中で変換できればOK！<br>例:親の意図は？/自分はどうしてそうしたいのか？/そう感じる深い理由は？<br><br>
          Q:”外”って？<br><br>
          <span>A</span>:なんで？と掘り下げていくと、自分のまわりの環境に対しての分析や、モノの特性についての分析になることがあります。これが”外”です。このアプリは自分の思考回路を言語化するアプリなので、”内” を分析することに価値があります。<br>
          例:地味な服を辞めたい→友達に言われたから【外】→友達はカラフルな洋服が好きだから【外】→世の中で目立つことに価値があると感じる人だから【外】<br><br>
          Q:”内”って？<br><br>
          <span>A</span>:自分が〇〇だから！と自分の内面について考えることです。<br>
          例:医師になりたい→人を健康にしたいから【内】→ 健康になることは幸福度の上昇だと捉えるから【内】→病期が治ったときの祖母の顔が忘れられないから【内】<br><br>
          Q:”外”から”内”へ移れない、行けない<br><br>
          <span>A</span>:”外”の分析が続き、満足したら、その”外”の環境下でなぜ自分が最初のテーマを選んだのかを考えていきましょう。<br><br>
          Q:下の方向に掘り下げられているかわからない<br><br>
          <span>A</span>:やりたいことへの具体性が出てきている場合は危ないです。できるだけ抽象化させていくことが大切です。例えば、経済学を学びたい→将来のために役立ちそうだから→世の中で経済はずっと回っている→お金というものを概念として捉えてみたいから→テレビで話していた本を読むのもあり、最後は具体的な行動へと目移りしているので深堀ができていません！<br>
          <span>A</span>:思考は時と場合によって変わるものです、何ルートもできてもいいと思います。何度も同じテーマにやっても面白いかもですね！
        </div>
        <h1 id="3">ハッとしない</h1>
        <div>
          Q:ハッとしない…<br><br>
          <span>A</span>:真因にたどり着かないこともあると思います。それでもいいです。考えるという過程が必ずプラスになるはずです。<br>
          <span>A</span>:ほかの人のシェアをみてもいいかも！<br><br>
          Q:いっぱい自問自答したけど、ほんとにこれでいいの？<br><br>
          <span>A</span>:自問自答を行っているので、最初から自分の中にあったものが見えてくるはずです。当たり前だなあと感じる人もいるし、この考え方を持っていたのか！と驚く人もいます。自分というわかりそうでわからないものに悩む時間を過ごしましょう。
        </div>
        <h1 id="4">真因から悩んでしまう</h1>
        <div>
          Q:真因にたどりついたけどどうすれば…<br><br>
          <span>A</span>:そこからの行動は難しいものがあると思います！「真因のワード　やり方」でググるのもあり！<br>
          例:「社会貢献　やり方」「人を助ける　やり方<br>
          <span>A</span>:似ている人をシェアから探してみましょう<br>
          <span>A</span>:やりたいことをいっぱい書き出してみて、真因を基に分類していくのもあり<br>
          例:真因)「人を導きたい」、やりたいこと)「本を読みたい」→リーダー論の本を読もう、組織学の本を読もう<br>ほかにもやりたいこと)人に会う！→社長に会おう！<br><br>
          Q:真因からの行動を今はしたくない<br><br>
          <span>A</span>:その真因に気づいて生きる世界と今までの世界は違うかも！→いろいろなものの見方が変わるはず！<br>
          例:真因→「お金を儲けたい」<br>いままで→「スタバのフラペチーノ高いな」<br>これから→「スタバはどうやって儲けているんだろう」
        </div>
      </div>
    </div>
    <script>
      new Vue({
        el: '#help',
        methods: {
          back: function() {
            document.getElementById('myNavigator').popPage();
          }
        }
      });
    </script>
  </ons-page>
</template>

<template id="mail_resend.html">
  <ons-page>
    <div class="background" style="background-color: rgba(249, 214, 204, 1);"></div>
    <div id="mail_resend" class="password_reset">
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start; margin-left: 30px;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <h1>メールが届かない場合</h1>
      <div>
        <p>ご登録いただいたメールアドレスを入力してください。<br>
          パスワード再設定用のメールを再送します。</p>
        <input type="mail" placeholder="メールアドレス">
        <button>メールを再送</button>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: '#mail_resend',
          data: {
            mail: "",
          },
          methods: {
            onSendMail: function() {
              var auth = firebase.auth();
              var email = this.mail;
              var actionCodeSettings = {
                iOS: {
                  bundleId: 'io.github.Murasya.toten',
                },
                android: {
                  packageName: 'io.github.Murasya.toten',
                },
                handleCodeInApp: true,
              }
              auth.sendPasswordResetEmail(email, actionCodeSettings).then(function() {
                document.getElementById('myNavigator').pushPage('mail_sent.html');
              }).catch(function(error) {
                console.log(error);
              });
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="mail_sent.html">
  <ons-page>
    <div class="background" style="background-color: #F9D6CC;"></div>
    <div id="mail_sent">
      <h1>メールを送信しました</h1>
      <p>受信メールをご確認の上、<br>
        パスワードを再設定してください。</p>
      <a @click="onMail">メールが届かない場合</a>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: "#mail_sent",
          methods: {
            onMail: function() {
              document.getElementById("myNavigator").replacePage("mail_resend.html");
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="myRecode.html">
  <ons-page>
    <div class="background" style="background-color: #FFF;"></div>
    <div id="myRecodeVue" v-cloak class="recode">
      <!-- <div class="recode__tab">
        <button class="recode__tab--archive" @click="onArchiveButton" :style="tabActive ? activeTab1 : nonActiveTab1">アーカイブ</button>
        <button class="recode__tab--saving" @click="onSavingButton" :style="tabActive ? nonActiveTab2 : activeTab2">セーブ中</button>
      </div> -->
      <div class="recode__topbtns-wrapper">
        <div class="recode__topbtns">
          <a v-if="tabType=='bunsekinome'" @click="onBunsekinomeButton" class="recode__topbtns--on"><img src="images/2021_02_25_新素材/memo_icon_white.png">分析の芽</a>
          <a v-else @click="onBunsekinomeButton" class="recode__topbtns--off"><img src="images/2021_02_25_新素材/memo_icon_gray.png">分析の芽</a>
          <a v-if="tabType=='analyze'" @click="onArchiveButton" class="recode__topbtns--on"><img src="images/2021_02_25_新素材/analyze_icon_white.png">分析</a>
          <a v-else @click="onArchiveButton" class="recode__topbtns--off"><img src="images/2021_02_25_新素材/analyze_icon_gray.png">分析</a>
          <a v-if="tabType=='gakuchika'" @click="onGakuchikaButton" class="recode__topbtns--on"><img src="images/2021_02_25_新素材/gakuchika_icon_white.png">ガクチカ</a>
          <a v-else @click="onGakuchikaButton" class="recode__topbtns--off"><img src="images/2021_02_25_新素材/gakuchika_icon_gray.png">ガクチカ</a>
        </div>
      </div>
      <div class="archive" id="GD">
        <div v-for="data in arr" class="archive__data" @click="onDataButton(data)">
          <span :class="data.color=='hobby'?'archive__time--pink':
                        (data.color=='future'?'archive__time--yellow':
                        (data.color=='task'?'archive__time--blue':
                        (data.color=='experience'?'archive__time--green':
                        (data.color=='jobhunting'?'archive__time--purple':
                        'archive__time'))))">
            {{ data.timestamp.getFullYear() }}/{{ ('0'+(data.timestamp.getMonth()+1)).slice(-2) }}/{{ data.timestamp.getDate() }}
          </span>
          <div class="archive__incomplete" v-show="data.complete === false"></div>
          <p class="archive__p" v-if="tabType == 'analyze'">{{ data.answers[0] }}</p>
          <p class="archive__p" v-else="tabType == 'bunsekinome'">{{ data.title }}</p>
          <img class="archive__trash" @click.stop="onDeleteBtn(data)" src="images/分析カテゴリ追加時_素材/trash_object.png">
          <hr class="archive__hr">
        </div>
      </div>
      <div class="recode__space"></div>
      <div class="archive__overlay" v-show="showModal" @click="closeModal">
        <div class="archive__overlay--thx">本当に削除しますか？</div>
        <div class="archive__overlay--send">削除した分析データ(あなたの思考回路)を<br>後から戻すことはできません。</div>
        <div class="archive__overlay--btns">
          <button class="archive__overlay--yes" @click="onYes">はい</button>
          <button class="archive__overlay--no">いいえ</button>
        </div>
        <div class="archive__overlay--img"><img src="images/分析カテゴリ追加時_素材/trash_character.png"></div>
      </div>
      <my-toolbar></my-toolbar>
    </div>
  
    <script>
      ons.getScriptPage().onInit = function() {
        sBanner();
        var vm = new Vue({
          el: '#myRecodeVue',
          data: {
            arr: getQuestionAndAnswerAll(),
            tabActive: true,
            tabType: "analyze",
            showModal: false,
            activeTab1: {
              backgroundColor: "#FFF",
              width: "70pt",
              zIndex: "10",
              color: "#626262",
            },
            nonActiveTab1: {
              backgroundColor: "#626262",
              width: "132pt",
              zIndex: "9",
              textAlign: "left",
              paddingLeft: "10pt",
              color: "#FFF",
            },
            activeTab2: {
              backgroundColor: "#FFF",
              width: "70pt",
              zIndex: "10",
              left: "81pt",
              color: "#626262",
            },
            nonActiveTab2: {
              backgroundColor: "#626262",
              width: "132pt",
              zIndex: "9",
              left: "19pt",
              textAlign: "right",
              paddingRight: "10pt",
              color: "#FFF",
            },
            timeClass: "recode__time",
            data: null,
          },
          methods: {
            onArchiveButton: function() {
              this.tabActive = true;
              this.tabType = "analyze";
              this.arr = getQuestionAndAnswerAll();
            },
            onSavingButton: function() {
              this.tabActive = false;
              this.arr = getIncomplete();
            },
            onBunsekinomeButton: function() {
              this.tabType = "bunsekinome";
              this.arr = getMyEvent();
            },
            onGakuchikaButton: function() {
              this.tabType = "gakuchika";
              this.arr = getGakuchika();
            },
            onDataButton: function(data) {
              hBanner();
              console.log(data.toString());
              if(this.tabType == "bunsekinome") {
                if(data.complete) {
                  document.getElementById("myNavigator").pushPage('result_memo.html', {
                    data: {
                      bunsekinome: data,
                      recode: true,
                    }
                  });
                } else {
                }
              } else if(this.tabType == "analyze") {
                if(data.complete) {
                  document.getElementById("myNavigator").pushPage('result.html', {
                    data: {
                      qAndA: data,
                      recode: true,
                    }
                  });
                } else {
                  document.getElementById("myNavigator").pushPage('resume.html', {
                    data: {
                      qAndA: data,
                    }
                  });
                }
              } else if(this.tabType == "gakuchika") {
                if(data.complete) {
                  document.getElementById("myNavigator").pushPage('result_gakuchika.html', {
                    data: {
                      gakuchika: data,
                      recode: true,
                    }
                  });
                } else {

                }
              }
            },
            onDeleteBtn: function(data) {
              this.showModal = true;
              this.data = data;
            },
            onYes: function() {
              var t = this;
              if(this.tabType == 'bunsekinome') {
                db.collection("event").doc(this.data.id).delete().then(function() {
                  console.log("Document successfully deleted!");
                  vm.onBunsekinomeButton();
                }).catch(function(error) {
                  console.log("Error removing document: ", error);
                });
              } else if(this.tabType == 'analyze') {
                db.collection("questionAndAnswer").doc(this.data.id).delete().then(function() {
                  console.log("Document successfully deleted!");
                  vm.onArchiveButton();
                }).catch(function(error) {
                  console.log("Error removing document: ", error);
                });
              } else if(this.tabType == 'gakuchika') {
                db.collection("gakuchika").doc(this.data.id).delete().then(function() {
                  console.log("Document successfully deleted!");
                  vm.onGakuchikaButton();
                }).catch(function(error) {
                  console.log("Error removing document: ", error);
                });
              }
            },
            closeModal: function() {
              this.showModal = false;
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="password_reset.html">
  <ons-page>
    <div class="background" style="background-color: #F9D6CC;"></div>
    <div id="password_reset" class="password-reset">
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start; margin-left: 30px;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <h1 class="password-reset__title">パスワードを忘れた場合</h1>
      <div class="password-reset__form">
        <p class="password-reset__explain">ご登録いただいたメールアドレスを入力してください。<br>
          パスワード再設定用のメールを送信します。</p>
        <input class="password-reset__input" type="mail" placeholder="メールアドレス" v-model="mail">
        <button class="password-reset__go-btn" @click="onSendMail">メールを送信</button>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var vm = new Vue({
          el: '#password_reset',
          data: {
            mail: "",
          },
          methods: {
            onSendMail: function() {
              var auth = firebase.auth();
              var email = this.mail;
              var actionCodeSettings = {
                iOS: {
                  bundleId: 'io.github.Murasya.toten',
                },
                android: {
                  packageName: 'io.github.Murasya.toten',
                },
                handleCodeInApp: true,
              }
              auth.sendPasswordResetEmail(email).then(function() {
                document.getElementById('myNavigator').pushPage('mail_sent.html');
              }).catch(function(error) {
                ons.notification.toast('このメールアドレスは存在しません', { timeout: 1000, animation: 'fall'});
                console.log(error);
              });
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="question.html">
  <ons-page>
    <div class="background" style="background-color: hsl(200, 84%, 95%);"></div>
      <div id="questionVue" v-cloak class="question">
        <div :class="headerClass">
          <p class="question__theme">{{ theme }}</p>
          <div class="question__topbuttons">
            <a @click="interruptionButtonClick"><img src="./images/各種ボタン/break_ボタン.png" alt="中断ボタン" width="30px"></a>
            <a @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png" alt="ヘルプボタン" width="30px"></a>
          </div>
        </div>
        <div v-for="item in items" class="items">
          <p :class='item.tag == "out" ? "lightBlue" : "blue"'>{{ item.num }}</p>
          <p>{{ item.why }}</p>
          <p>{{ item.answer }}</p>
        </div>
        <ons-icon class="down-arrow" icon="fa-arrow-down" v-show="qa.num != 1"></ons-icon>
        <div class="question__writting">
          <a @click="onNumber" :class="numberClass">{{ qa.num }}</a>
          <p class="question__why">{{ qa.why }}<input class="question__question" v-show="qa.num >= 2" type="text" v-model="qa.question">？</p>
          <textarea v-model="qa.answer" class="question__answer"></textarea>
        </div>
        <div class="question__buttons">
          <a @click="nextButtonClick"><img src="./images/各種ボタン/next_ボタン.png" alt="Nextボタン"  height="90px"></a>
          <a v-show="qa.num >= 5" @click="finishButtonClick" style="margin-left: 20px;"><img src="./images/各種ボタン/finish_ボタン.png" alt="finishボタン" height="75px"></a>
        </div>
        <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
          <p class="overlay__save--string">分析を中断しますか？</p>
          <div>
            <button class="overlay__save--yesbtn" @click="savingButton">はい</button>
            <button class="overlay__save--nobtn" @click="closeModal">いいえ</button>
          </div>
        </div>
        <div class="overlay" v-show="showModal1" @click="closeModal">
          <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
          <img v-if="color == 'future'" class="tenchan__comment" src="images/分析カテゴリ追加時_素材/comment1.png">
          <img v-else class="tenchan__comment" src="images/分析カテゴリ追加時_素材/comment1-2.png">
        </div>
        <div class="overlay" v-show="showModal2" @click="closeModal">
          <img class="tenchan__lefttop" src="images/分析中_キャラ2.png">
          <img class="tenchan__comment" src="images/分析カテゴリ追加時_素材/comment2.png">
        </div>
        <div class="overlay" v-show="showModal3" @click="showModal3 = false">
          <img class="tenchan__lefttop" src="images/分析中_キャラ3.png">
          <img class="tenchan__comment" src="images/分析カテゴリ追加時_素材/comment3.png">
          <button class="overlay--finbtn" @click="closeModal3">記録する</button>
          <a class="overlay--backbtn" @click="showModal3 = false"><img src="images/分析カテゴリ追加時_素材/back-question.png" width="77px"></a>
        </div>
      </div>
    </div>
    
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var qAndA = myNavigator.topPage.data.qAndA;
        var items = [];
        var why = "";
        switch(qAndA.color) {
          case "future":
            why = "なぜ取り組みたい/叶えたい";
            break;
          case "hobby":
            why = "なぜ好きなの";
            break;
          case "task":
            why = "なぜ取り組まなければならない";
            break;
          case "experience":
            why = "なぜ取り組んだの";
            break;
          case "jobhunting":
            why = "なぜ取り組んだの";
            break;
          default:
            why = "なぜ取り組みたい/叶えたい";
            break;
        }
        var inNum = 0;
        var outNum = 0;
        for(i=1; i<qAndA.answers.length; i++) {
          items.push({
            num: i,
            why: qAndA.questions[i],
            answer: qAndA.answers[i],
            tag: qAndA.tags[i-1]
          });
          why = "なぜ";
          if(qAndA.tags[i-1] == "in") {
            inNum++;
          } else if(qAndA.tags[i-1] == "out") {
            outNum++;
          }
        }
        if(qAndA.id === "") {
          qAndA.id = localStorage.getItem("documentID");
        }
        
        var vm_q = new Vue({
          el: '#questionVue',
          data: {
            theme: qAndA.answers[0],
            items: items,
            qa: {
              num: qAndA.answers.length,
              why: why,
              question: "",
              answer: "",
              tag: "",
            },
            color: qAndA.color,
            showSavingModal: false,
            showModal1: false,
            showModal2: false,
            showModal3: false,
            numberClass: "defo",
            outCount: outNum,
            inCount: inNum,
            headerClass: "",
          },
          created: function() {
            switch(qAndA.color) {
              case "future":
                this.headerClass = "question__header--yellow";
                break;
              case "hobby":
                this.headerClass = "question__header--pink";
                break;
              case "task":
                this.headerClass = "question__header--blue";
                break;
              case "experience":
                this.headerClass = "question__header--green";
                break;
              case "jobhunting":
                this.headerClass = "question__header--purple";
                break;
              default:
                this.headerClass = "question__header";
                break;
            }
          },
          methods: {
            interruptionButtonClick: function() {
              this.showSavingModal = true;
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            nextButtonClick: function() {
              if(this.qa.answer == "" && !DEBUG_MODE) {
                ons.notification.toast( '回答欄が入力されていません', {timeout: 1000, animation: 'fall'});
                return;
              } else if(this.qa.tag == "" && !DEBUG_MODE) {
                ons.notification.toast( '内と外が決まっていません', {timeout: 1000, animation: 'fall'});
                return;
              }
              if (this.qa.tag == "out") {
                this.outCount++;
                if (this.outCount == 3) {
                  this.showModal1 = true;
                  this.outCount = 4;
                }
              } else {
                this.inCount++;
                if (this.inCount == 3) {
                  this.showModal2 = true;
                  this.inCount = 4;
                }
              }
              
              this.qa.why = this.qa.why + this.qa.question + "？";
              this.items.push(Object.assign({}, this.qa));
              qAndA.questions.push(this.qa.why);
              qAndA.answers.push(this.qa.answer);
              qAndA.tags.push(this.qa.tag);
              if(!DEBUG_MODE) {
                updateData(qAndA);
              }
              this.qa.num++;
              this.qa.tag = "";
              this.numberClass = "defo";
              this.qa.why = "なぜ";
              this.qa.question = "";
              this.qa.answer = "";
              
            },
            finishButtonClick: function() {
              if ((this.qa.answer == "" && this.qa.num == 5) && !DEBUG_MODE) {
                ons.notification.toast("回答欄が入力されていません", {timeout: 1000, animation: "fall"});
                return;
              }
              if((this.qa.answer != "" && this.qa.tag == "") && !DEBUG_MODE) {
                ons.notification.toast("内と外が決まっていません", {timeout: 1000, animation: "fall"});
                return;
              }
              this.showModal3 = true;
            },
            closeModal: function() {
              this.showSavingModal = false;
              this.showHelpModal = false;
              this.showModal1 = false;
              this.showModal2 = false;
              this.showModal3 = false;
            },
            closeModal3: function() {
              this.showModal3 = false;
              if(this.qa.answer != "") {
                this.qa.why = this.qa.why + this.qa.question + "？";
                this.items.push(Object.assign({}, this.qa));
                qAndA.questions.push(this.qa.why);
                qAndA.answers.push(this.qa.answer);
                qAndA.tags.push(this.qa.tag);
                if(!DEBUG_MODE) {
                  updateData(qAndA);
                }
              }
              myNavigator.pushPage('result.html',{
                data: {
                  qAndA: qAndA
                }
              })
            },
            savingButton: function() {
              if(this.qa.answer != "") {
                this.qa.why = this.qa.why + this.qa.question + "？";
                this.items.push(Object.assign({}, this.qa));
                qAndA.questions.push(this.qa.why);
                qAndA.answers.push(this.qa.answer);
                qAndA.tags.push(this.qa.tag);
              }
              qAndA.complete = false;
              updateData(qAndA);
              myNavigator.resetToPage('index.html');
            },
            onNumber: function() {
              if(this.numberClass == "defo") {
                this.numberClass = "lightBlue";
                this.qa.tag = "out";
              } else if (this.numberClass == "lightBlue") {
                this.numberClass = "blue";
                this.qa.tag = "in";
              } else {
                this.numberClass = "defo";
                this.qa.tag = "";
              }
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="question_tutorial.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="questionVue" v-cloak class="question">
      <div class="question__header--yellow">
        <p class="question__theme">{{ theme }}</p>
        <button @click="showSkipModal = true" class="tutorial__skip">SKIP</button>
        <div class="question__topbuttons">
          <a @click="interruptionButtonClick"><img src="./images/各種ボタン/break_ボタン.png" alt="中断ボタン" height="30px"></a>
          <a @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png" alt="ヘルプボタン" height="30px"></a>
        </div>
      </div>
      <div v-for="item in items" class="items">
        <p :class='item.tag == "out" ? "lightBlue" : "blue"'>{{ item.num }}</p>
        <p>{{ item.why }}</p>
        <p>{{ item.answer }}</p>
      </div>
      <ons-icon class="down-arrow" icon="fa-arrow-down" v-show="qa.num != 1"></ons-icon>
      <img src="images/チュートリアル/tutorial_explain6.png" class="tutorial__question--que" v-show="qa.num == 2" width="122px">
      <div class="question__writting">
        <a @click="onNumber" :class="numberClass">{{ qa.num }}</a>
        <p class="question__why">{{ qa.why }}<input class="question__question" v-show="qa.num >= 2" type="text" v-model="qa.question" :placeholder="placeholder_que">？</p>
        <textarea class="question__answer" v-model="qa.answer" :placeholder="placeholder_ans"></textarea>
      </div>
      <img src="images/チュートリアル/tutorial_explain4.png" class="tutorial__question--ans" v-show="qa.num == 1" width="250px">
      <img src="images/チュートリアル/tutorial_explain5.png" class="tutorial__question--tag" v-show="qa.num == 1" width="260px">
      <img src="images/チュートリアル/tutorial_explain7.png" class="tutorial__question--ans" v-show="qa.num == 2" width="253px">
      <img src="images/チュートリアル/tutorial_exolain8.png" class="tutorial__question--tag" v-show="qa.num == 2" width="250px">
      <div class="question__buttons">
        <a @click="nextButtonClick"><img src="./images/各種ボタン/next_ボタン.png" alt="Nextボタン"  width="90px"></a>
        <input type="image" src="./images/チュートリアル/tutorial_charcter._comment10png.png" v-show="qa.num >= 5" @click="finishButtonClick" style="margin-left: 20px;" width="75px">
      </div>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">分析を中断しますか？</p>
        <button class="overlay__save--yesbtn" @click="savingButton">はい</button>
        <button class="overlay__save--nobtn" @click="closeModal">いいえ</button>
      </div>
      <div class="overlay" v-show="show1Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/チュートリアル_ウインク_キャラ.png">
        <img class="tenchan__comment" src="images/チュートリアル/modal1.png">
      </div>
      <div class="overlay" v-show="show2Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/チュートリアル/modal2.png">
      </div>
      <div class="overlay" v-show="show3Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/チュートリアル/modal3.png">
      </div>
      <div class="overlay" v-show="show4Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/チュートリアル_キリッと_キャラ.png">
        <img class="tenchan__comment" src="images/チュートリアル/modal4.png">
      </div>
      <div class="overlay" v-show="show5Modal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/チュートリアル_疲れた_キャラ.png">
        <img class="tenchan__comment" src="images/チュートリアル/modal5.png">
      </div>
      <skip-modal v-if="showSkipModal" @close="showSkipModal = false"></skip-modal>
    </div>
    
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      
      ons.getScriptPage().onInit = function() {
        var items = [];
        var why = "なぜ取り組みたい/叶えたい";
        var vm_q = new Vue({
          el: '#questionVue',
          data: {
            theme: "英会話を学びたい",
            items: items,
            qa: {
              num: 1,
              why: why,
              question: "",
              answer: "",
              tag: "",
            },
            showSavingModal: false,
            showHelpModal: false,
            show1Modal: false,
            show2Modal: false,
            show3Modal: false,
            show4Modal: false,
            show5Modal: false,
            numberClass: "defo",
            temp: {
              questions: [
                "取り組みたい/叶えたい",
                "留学生と話せると良いのか",
                "違う文化を持つ人と話したいのか",
                "日本人らしすぎる気がするのか",
                "はっきりとものが言えないのか",
              ],
              answers: [
                "英語が話せたら留学生と話せるから",
                "違う文化を持つ人と話してみたいから",
                "今の自分は日本人らしすぎる気がするから。",
                "人の顔色を必要以上に伺ってしまっている節があるから。先輩や先生など目上の人たちに気を使えるのは自分の長所だけど、同級生にも自分の思っていることをはっきり言えないのは問題だと感じる。",
                "自分の意見にあまり自信がないから。意見して変な目で見られるよりは、言わないほうがいいやと思ってしまう。"
              ],
              tags: [
                "out",
                "in",
                "in",
                "in",
                "in",
              ]
            },
            placeholder_que: "",
            placeholder_ans: "英語が話せたら留学生と話せるから",
            showSkipModal: false,
          },
          created: function() {
            var vue = this;
            setTimeout(function() {vue.show1Modal = true}, 1000);
          },
          methods: {
            interruptionButtonClick: function() {
              ons.notification.toast('チュートリアルでは途中セーブできません', {timeout: 1000, animation: "fall"});
            },
            helpButtonClick: function() {
              ons.notification.toast('チュートリアルではヘルプを表示できません', {timeout: 1000, animation: "fall"});
            },
            nextButtonClick: function() {
              if(this.qa.num >= 5) {
                ons.notification.toast( "FINISH!ボタンを押してください", {timeout: 1000, animation: 'fall'});
                return;
              }
              if(this.qa.num == 1) {
                if(this.qa.answer != "英語が話せたら留学生と話せるから") {
                  ons.notification.toast( "「英語が話せたら留学生と話せるから」と入力しよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
                if(this.qa.tag != "out") {
                  ons.notification.toast( "1回タップしよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
              }
              if(this.qa.num == 2) {
                if(this.qa.question != "留学生と話せると良いのか") {
                  ons.notification.toast( "「留学生と話せると良いのか」と入力しよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
                if(this.qa.answer != "違う文化を持つ人と話してみたいから") {
                  ons.notification.toast( "「違う文化を持つ人と話してみたいから」と入力しよう", {timeout: 1000, animation: 'fall'});
                  return;
                }
                if(this.qa.tag != "in") {
                  ons.notification.toast( "2回タップしよう", {timeout: 1000, animation: 'fall'});
                  return ;
                }
              }
              this.qa.why = this.qa.why + this.qa.question + "？";
              this.items.push(Object.assign({}, this.qa));
              this.placeholder_que = this.temp.questions[this.qa.num];
              this.placeholder_ans = this.temp.answers[this.qa.num];
              this.qa.num++;
              this.qa.why = "なぜ";
              this.qa.question = "";
              this.qa.answer = "";
              this.numberClass = "defo";
              this.qa.tag = "";
              
              if(this.qa.num == 2) {
                var vue = this;
                setTimeout(function() {vue.show3Modal = true}, 1000);
              } else if(this.qa.num == 3) {
                var vue = this;
                setTimeout(function() {vue.show4Modal = true}, 1000);
              }
            },
            finishButtonClick: function() {
              document.getElementById('myNavigator').pushPage('result_tutorial.html');
            },
            closeModal: function() {
              this.showSavingModal = false;
              this.showHelpModal = false;
              this.show2Modal = false;
              if(this.show1Modal == true) {
                this.show1Modal = false;
                this.show2Modal = true;
              }
              this.show3Modal = false;
              if (this.show5Modal == true) {
                this.show5Modal = false;
              }
              if (this.show4Modal == true) {
                this.show4Modal = false;
                var t = this;
                var id = setInterval(function() {
                  if (t.qa.num < 5) {
                    t.qa.question = t.temp.questions[t.qa.num-1];
                    t.qa.answer = t.temp.answers[t.qa.num-1];
                    t.qa.tag = t.temp.tags[t.qa.num-1];
                    t.numberClass = "blue";
                    t.qa.why = t.qa.why + t.qa.question + "？";
                    t.items.push(Object.assign({}, t.qa));
                    t.qa.why = "なぜ";
                    t.qa.question = t.temp.questions[t.qa.num];
                    t.qa.answer = t.temp.answers[t.qa.num];
                    t.qa.num++;
                  } else {
                    t.show5Modal = true;
                    clearInterval(id);
                  }
                }, 1000);
              }
            },
            savingButton: function() {
            },
            onNumber: function() {
              if(this.numberClass == "defo") {
                this.numberClass = "lightBlue";
                this.qa.tag = "out";
              } else if (this.numberClass == "lightBlue") {
                this.numberClass = "blue";
                this.qa.tag = "in";
              } else {
                this.numberClass = "defo";
                this.qa.tag = "";
              }
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="register.html">
  <ons-page>
    <div id="register" class="register" v-cloak>
      <a @click="document.getElementById('myNavigator').popPage()" style="align-self: flex-start;background-color: #B1B1B1;display: block; padding: 20px; color: #FFF;"><ons-icon icon="fa-chevron-left"></ons-icon> キャンセル</a>
      <ul class="register__explain">
        <li class="register__explain-item">メールアドレスおよび連携サービスのDMにアプリ改善のためのアンケート等をお送りする場合がございます。あらかじめご了承ください。</li><br>
        <li class="register__explain-item">性別・生年月日・職業は記入必須ではありません。</li>
      </ul>
      <div class="register__form">
        <p class="register__title">メールアドレス</p>
        <input class="register__input" type="email" id="email_register" v-model="email" placeholder="入力してください">
        <p class="register__title">パスワード</p>
        <input class="register__input" type="password" id="password_register" v-model="password" placeholder="入力してください">
        <p class="register__title">性別(任意)</p>
        <select v-model="sex">
          <option disabled>性別</option>
          <option value="男">男</option>
          <option value="女">女</option>
          <option value="その他">その他</option>
        </select>
        <p class="register__title">生年月日(任意)</p>
        <div class="register__birthday">
          <select v-model="year" @change="get_days">
            <option disabled>年</option>
            <option v-for="n in 100" :value="n + 1920">{{ n + 1920 }}</option>
          </select>年
          <select v-model="month" @change="get_days">
            <option v-for="n in 12">{{ n }}</option>
          </select>月
          <select v-model="day">
            <option v-for="n in days_max" :value="n">{{ n }}</option>
          </select>日
        </div>
        <p class="register__title">職業(任意)</p>
        <select v-model="occupation">
          <option disabled>職業</option>
          <option v-for="n in occupation_list" :value="n">{{ n }}</option>
        </select>
      </div>
      <div class="register__check">
        <label for="isTermsAccept"><input type="checkbox" id="isTermsAccept" v-model="isTermsAccept">(必須)<a @click="urlClick" class="register__link">利用規約</a>と<a @click="urlClick" class="register__link">プライバシーポリシー</a>に同意する</label>
        <label for="isResearchAccept"><input type="checkbox" id="isResearchAccept" v-model="isResearchAccept">(任意)教育や心理学等の研究に使用しても構いません</label>
      </div>
      <div class="register__btns">
        <button @click="onRegister" class="register__send-btn">仮登録メールを送信</button>
        <button @click="already" class="register__already">既にアカウントがある</button>
        <!-- <hr>
        <h3>他のアカウントで登録</h3>
        <div>
          <button class="twitter_register"><ons-icon icon="fa-twitter"></ons-icon> Twitter</button>
          <button class="google_register" @click="google_regi"><ons-icon icon="fa-google" style="color: gray;"></ons-icon> Google</button>
        </div> -->
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function () {
        var vm_r = new Vue({
          el: '#register',
          data: {
            email: "",
            password: "",
            sex: "",
            year: 0,
            month: 0,
            day: 0,
            days_max: "",
            occupation: "",
            occupation_list: [
              "学生",
              "会社員",
              "自営業",
              "専業主婦(夫)",
              "パート・アルバイト",
              "無職",
              "その他",
            ],
            isTermsAccept: false,
            isResearchAccept: false,
          },
          created: function() {
            this.get_days();
          },
          methods: {
            onRegister: function() {
              if(!this.isTermsAccept) {
                ons.notification.toast('利用規約とプライバシーポリシーに同意してください', {timeout: 1000, animation: 'fall'});
              }
              var day = new Date(this.year, this.month-1, this.day);
              var user = new User("", this.email, day, this.sex, this.occupation, this.isResearchAccept);
              firebase.auth().createUserWithEmailAndPassword(this.email, this.password)
                .then(function(result) {
                  user.uid = result.user.uid;
                  setNewUser(user);
                  document.querySelector('#myNavigator').resetToPage("index.html");
                  firebase.auth().currentUser.sendEmailVerification().then(function() {
                    ons.notification.toast('確認メールを送りました', {timeout: 1000, animation: 'fall'});
                  }).catch(function(error) {
                    
                  });
                })
                .catch(function(error) {
                  ons.notification.toast(error.message, { timeout: 1000, animation: 'fall'});
                });
            },
            get_days: function() {
              this.days_max = new Date(this.year, this.month, 0).getDate();
            },
            google_regi: function() {
              var log = signInWithGoogle();
              console.log(log);
            },
            urlClick: function() {
              window.open("https://noteappm.wixsite.com/policies", "_self", "location=no");
            },
            already: function() {
              document.getElementById("myNavigator").pushPage("account.html");
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="result.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="resultVue" class="result" v-cloak>
      <img v-show="recode" class="result__back" src="images/2021_02_25_新素材/archive_back.png" @click="back_button">
      <p class="result__theme">{{ theme }}</p>
      <span :class="headerClass" v-if="category.length">
        <span v-for="n in category">{{ n }}&emsp;</span>
      </span>
      <a v-show="recode && questions.length" class="result__edit" @click="goEdit"><img  src="images/分析カテゴリ追加時_素材/edit_object.png" height="30px"></a>
      <div v-if="questions.length" class="result__wrapper--on">
        <!-- 分析の記録 -->
        <div v-for="index in answers.length-1" class="items">
          <p :class='tags[index-1] == "" ? defoClass : (tags[index-1] == "out" ? lightClass : blueClass)'>{{ index }}</p>
          <p>{{ questions[index] }}</p>
          <p>{{ answers[index] }}</p>
        </div>
        <!-- consideration -->
        <div class="jobhunting_memo1__5w" v-show="consideration[0].analyzeid !== '' && recode">
          <div class="jobhunting_memo1__5w-contents">
            <p>あなたの強みはどこにありそう？</p>
            <textarea readonly>{{ consideration[0].contents[0] }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>あなたの強みはどんなことに活かせそう？</p>
            <textarea readonly>{{ consideration[0].contents[1] }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>この出来事の中で大切だった・大事にしていたことは?</p>
            <textarea readonly>{{ consideration[0].contents[2] }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>一番工夫したポイントは？</p>
            <textarea readonly>{{ consideration[0].contents[3] }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>この出来事で悪かったことは?</p>
            <textarea readonly>{{ consideration[0].contents[4] }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>今回の分析で考えたりていないことは?</p>
            <textarea readonly>{{ consideration[0].contents[5] }}</textarea>
          </div>
        </div>
        <!-- memo -->
        <div v-if="color !== 'jobhunting'" style="width:100%;">
          <textarea class="result__memo" v-model="memo" v-if="recode == false" placeholder="振り返りを入力"></textarea>
          <div v-else class="result__memo--readonly">{{ memo }}</div>
        </div>
        <!-- success -->
        <p style="font-size: 11pt; color: #767676; margin-top: 30px; text-align: center;">分析はうまくいった？</p>
        <select v-model="success" v-if="recode == false" class="result__success">
          <option>はい</option>
          <option>いいえ</option>
          <option>どちらともいえない</option>
        </select>
        <select v-else class="result__success" disabled>
          <option>{{ success }}</option>
        </select>
        <!-- buttons -->
        <div class="result__btns" v-show="recode == false">
          <div class="result__btns--ver">
            <a @click="interruptionButtonClick"><img src="./images/各種ボタン/break_ボタン.png" alt="中断ボタン" width="30px"></a>
            <a @click="helpButtonClick"><img src="./images/各種ボタン/help_ボタン.png" alt="ヘルプボタン" width="30px"></a> 
          </div>
          <button class="result__savebtn" @click="saveButtonClick">完了</button>
        </div>
        <!--<a @click="onTweet" class="result__tweetbtn"><ons-icon icon="fa-twitter"></ons-icon> Tweet</a>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>-->
        <div style="height: 10vh;"></div>
        <div class="result__space"></div>
      </div>
      <div v-else class="result__wrapper--off">
        <div class="result_memo__str">まだ分析の記録がありません</div>
        <button class="result_memo__button" @click="startQuestion">分析する！</button>
      </div>
      <result-float-button :active="1" :id="id" :title="theme" :color="color" v-show="recode"></result-float-button>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">分析を中断しますか？</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">はい</button>
          <button class="overlay__save--nobtn" @click="closeModal">いいえ</button>
        </div>
      </div>
    </div>
  
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var debug = new QAndA();
        debug.questions = ["あ","あ"]; debug.answers["Empty","Empty"]; debug.tags["in"];
        var qAndA = myNavigator.topPage.data.qAndA ?? debug;
        var recode = false;
        if(myNavigator.topPage.data.recode) {
          recode = true;
        }
        vm = new Vue({
          el: '#resultVue',
          data: {
            id: qAndA.id,
            theme: qAndA.answers[0],
            category: qAndA.category,
            questions: qAndA.questions,
            answers: qAndA.answers,
            tags: qAndA.tags,
            memo: qAndA.memo,
            success: qAndA.success,
            category: qAndA.category,
            color: qAndA.color,
            recode: recode,
            defoClass: "defo",
            lightClass: "lightBlue",
            blueClass: "blue",
            headerClass: "",
            showSavingModal: false,
            consideration: [new Consideration()],
            tweet: {
              text: "",
              url: "http://toten.html.xdomain.jp/",
            }
          },
          created: function() {
            this.consideration = getConsiderationFromAnalyzeid(qAndA.id);
            switch(this.color) {
              case "future":
                this.headerClass = "result__category--yellow";
                break;
              case "hobby":
                this.headerClass = "result__category--pink";
                break;
              case "task":
                this.headerClass = "result__category--blue";
                break;
              case "experience":
                this.headerClass = "result__category--green";
                break;
              default:
                this.headerClass = "result__category";
                break;
            }
          },
          methods: {
            interruptionButtonClick: function() {
              this.showSavingModal = true;
            },
            helpButtonClick: function() {
              document.getElementById('myNavigator').pushPage('help.html');
            },
            saveButtonClick: function() {
              if (this.memo == "" && this.color != 'jobhunting') {
                ons.notification.toast("分析結果を振り返って今後に活かしましょう", {timeout: 1000, animation: "fall"});
                return;
              }
              if (this.success == "" && !DEBUG_MODE) {
                ons.notification.toast("分析がうまくいったかを考えて選びましょう", {timeout: 1000, animation: "fall"});
                return;
              }
              qAndA.memo = this.memo;
              qAndA.success = this.success;
              qAndA.complete = true;
              if(!DEBUG_MODE) {
                updateData(qAndA);
              }
              if(qAndA.color == "jobhunting") {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    qAndA: qAndA,
                    storyNum: 20,
                  },
                });
              } else {
                myNavigator.resetToPage('index.html');
              }
              sInt();
            },
            goEdit: function() {
              myNavigator.bringPageTop('edit.html', {
                data: {
                  qAndA: qAndA,
                },
                animation: "fade",
              })
            },
            onTweet: function() {
              if (this.memo == "") {
                ons.notification.toast("分析結果を振り返って今後に活かしましょう", {timeout: 1000, animation: "fall"});
                return;
              }
              if (this.success == "") {
                ons.notification.toast("分析がうまくいったかを考えて選びましょう", {timeout: 1000, animation: "fall"});
                return;
              }
              qAndA.memo = this.memo;
              qAndA.success = this.success;
              qAndA.public = true;
              qAndA.complete = true;
              updateData(qAndA);
              this.tweet.text = "<" + this.theme + ">" + "を分析しました!\n\nスタート：" + this.answers[1] + "\n↓\nゴール：" + this.answers[this.answers.length-1]
                                + "\n\n#とーてん";
              for(var i=0; i<this.category.length; i++) {
                this.tweet.text += " #" + this.category[i];
              }
              this.tweet.text += "\n";
              this.tweet.url += "?id=" + qAndA.id;
              window.plugins.socialsharing.shareViaTwitter(this.tweet.text, null, this.tweet.url);
            },
            savingButton: function() {
              qAndA.memo = this.memo;
              qAndA.success = this.success;
              qAndA.complete = false;
              updateData(qAndA);
              myNavigator.resetToPage('index.html');
            },
            closeModal: function() {
              this.showSavingModal = false;
            },
            back_button: function() {
              myNavigator.resetToPage("myRecode.html");
            },
            startQuestion: function() {
              myNavigator.pushPage('start.html',{
                data: {
                  qAndA: qAndA,
                }
              });
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="result_tutorial.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="result_t" class="result" v-cloak>
      <p class="result__theme">{{ theme }}</p>
      <span class="result__category--yellow">勉強　スキルアップ　</span>
      <div v-for="(value, index) in questions" class="items">
        <p :class='tags[index] == "out" ? "lightBlue" : "blue"'>{{ index+1 }}</p>
        <p>{{ questions[index] }}</p>
        <p>{{ answers[index] }}</p>
      </div>
      <textarea v-model="memo" readonly class="result__memo"></textarea>
      <p style="font-size: 11pt; color: #767676;">分析はうまくいった？</p>
      <select v-model="success" class="result__success">
        <option value="はい">はい</option>
        <option value="いいえ">いいえ</option>
        <option value="どちらともいえない">どちらともいえない</option>
      </select>
      <img src="images/チュートリアル/tutorial_explain9.png" class="tutorial__result--suc">
      <button class="result__savebtn" @click="saveButtonClick">完了</button>
      <!--
      <a class="result__tweetbtn"><ons-icon icon="fa-twitter"></ons-icon> Tweet</button></a>
      <img src="images/チュートリアル_説明5.png" width="106pt" class="tutorial__result--tweet">
      -->
      <div class="overlay" v-show="showModal" @click="closeModal">
        <img class="tenchan__lefttop" src="images/分析中_キャラ.png">
        <img class="tenchan__comment" src="images/チュートリアル/modal6.png">
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      var vm = new Vue({
        el: '#result_t',
        data: {
          theme: "英会話を学びたい",
          questions: [
            "なぜ取り組みたい/叶えたい？",
            "なぜ留学生と話せると良いのか？",
            "なぜ違う文化を持つ人と話したいのか？",
            "なぜ日本人らしすぎる気がするのか？",
            "なぜはっきりとものが言えないのか？",
          ],
          answers: [
            "英語が話せたら留学生と話せるから。",
            "違う文化を持つ人と話してみたいから。",
            "今の自分は日本人らしすぎる気がするから。",
            "人の顔色を必要以上に伺ってしまっている節があるから。先輩や先生など目上の人たちに気を使えるのは自分の長所だけど、同級生にも自分の思っていることをはっきり言えないのは問題だと感じる。",
            "自分の意見にあまり自信がないから。意見して変な目で見られるよりは、言わない方がいいやと思ってしまう。",
          ],
          tags: [
            "out",
            "in",
            "in",
            "in",
            "in",
          ],
          memo: "漠然と留学生と話せるようになりたいと思っていたけど、本当は、周りの顔色をうかがわずにはっきりとものが言えるイメージのある海外の人に憧れを抱いていただけなのかもしれない。英会話ができるようになるのはもちろんいいことだけど、英会話ができるようにならなくても自分の良くないところは改善できるのではと思ったので、別の方法も考えたい。また、この点は自分の長所であるとも言えるので、いい部分として伸ばしていきたいとも思った。",
          success: "はい",
          category: [
            "勉強",
            "スキルアップ",
          ],
          showModal: false,
        },
        created: function() {
          var t = this;
          setTimeout(function() {t.showModal = true;}, 1000);
        },
        methods: {
          saveButtonClick: function() {
            myNavigator.resetToPage('finish_tutorial.html');
          },
          closeModal: function() {
            this.showModal = false;
          }
        }
      });
    </script>
  </ons-page>
</template>

<template id="resume.html">
  <ons-page id="resume">
    <div class="background" style="background-color: #ED6A4C;"></div>
    <div id="hoge">
      <img src="images/分析スタート_キャラ.png">
      <p>RESUME!</p>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator')
      ons.getScriptPage().onInit = function() {
        setTimeout(startQuestion, 800)
      }
      function startQuestion() {
        var qAndA = myNavigator.topPage.data.qAndA;
        if(qAndA.memo === "" && qAndA.success === "") {
          myNavigator.replacePage('question.html', {
            data: {
              qAndA: myNavigator.topPage.data.qAndA
            }
          });
        } else {
          myNavigator.replacePage('result.html', {
            data: {
              qAndA: myNavigator.topPage.data.qAndA
            }
          });
        }
      }
    </script>
  </ons-page>
</template>

<template id="start.html">
  <ons-page id="start">
    <div class="background" style="background-color: #ED6A4C;"></div>
    <div id="hoge">
      <img src="images/分析スタート_キャラ.png">
      <p>START!</p>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator')
      ons.getScriptPage().onShow = function() {
        
        setTimeout(startQuestion, 800);
      }
      function startQuestion() {
        if(localStorage.getItem('tutorial_finished') != "true") {
          myNavigator.replacePage('question_tutorial.html');
        } else {
          myNavigator.replacePage('question.html', {
            data: {
              qAndA: myNavigator.topPage.data.qAndA
            }
          });
        }
      }
    </script>
  </ons-page>
</template>

<template id="edit.html">
  <ons-page>
    <div class="background" style="background-color: #E8F6FD;"></div>
    <div id="edit" class="edit" v-cloak>
      <p class="edit__theme">{{ theme }}</p>
      <span :class="headerClass">
        <span v-for="n in category">&emsp;{{ n }}&emsp;</span>
      </span>
      <a class="edit__comp" @click="goComp"><img  src="images/分析カテゴリ追加時_素材/edit-finish_object.png" height="30px"></a>
      <div class="edit__writting" v-for="qa in data" :key="qa.num">
        <a @click="onNumber(qa.num)" :class="numberClass[qa.num-1]">{{ qa.num }}</a>
        <p class="question__why">{{ qa.why }}<input class="question__question" v-show="qa.num >= 2" type="text" v-model="qa.question">？</p>
        <textarea v-model="qa.answer" class="question__answer"></textarea>
      </div>
      <textarea class="edit__memo" v-model="memo" placeholder="振り返りを入力"></textarea>
      <p style="font-size: 11pt; color: #767676; margin-top: 30px;">分析はうまくいった？</p>
      <select v-model="success" class="edit__success">
        <option>はい</option>
        <option>いいえ</option>
        <option>どちらともいえない</option>
      </select>
      <!--<a @click="onTweet" class="result__tweetbtn"><ons-icon icon="fa-twitter"></ons-icon> Tweet</a>
      <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>-->
      <my-toolbar></my-toolbar>
    </div>
  
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var qAndA = myNavigator.topPage.data.qAndA;
        var why = "";
        var items = [];
        switch(qAndA.color) {
          case "future":
            why = "なぜ取り組みたい/叶えたい";
            break;
          case "hobby":
            why = "なぜ好きなの";
            break;
          case "task":
            why = "なぜ取り組まなければならない";
            break;
          case "experience":
            why = "なぜ取り組んだの";
            break;
          default:
            why = "なぜ取り組みたい/叶えたい";
            break;
        };
        for(i=1; i<qAndA.answers.length; i++) {
          items.push({
            num: i,
            why: why,
            question: qAndA.questions[i].substring(2,qAndA.questions[i].length-1),
            answer: qAndA.answers[i],
            tag: qAndA.tags[i-1]
          });
          why = "なぜ";
        }
        var numberClass = [];
        console.log(qAndA.category);
        items.forEach(e => {
          if(e.tag == "in") {
            numberClass.push("blue");
          } else {
            numberClass.push("lightBlue");
          }
        });
        vm = new Vue({
          el: '#edit',
          data: {
            data: items,
            theme: qAndA.answers[0],
            category: qAndA.category,
            memo: qAndA.memo,
            success: qAndA.success,
            color: qAndA.color,
            headerClass: "",
            tweet: {
              text: "",
              url: "http://toten.html.xdomain.jp/",
            },
            numberClass: numberClass,
          },
          created: function() {
            switch(this.color) {
              case "future":
                this.headerClass = "edit__category--yellow";
                break;
              case "hobby":
                this.headerClass = "edit__category--pink";
                break;
              case "task":
                this.headerClass = "edit__category--blue";
                break;
              case "experience":
                this.headerClass = "edit__category--green";
                break;
              default:
                this.headerClass = "edit__category";
                break;
            }
          },
          methods: {
            onNumber: function(ii) {
              var i = parseInt(ii,10)-1;
              if(this.numberClass[i] == "blue") {
                this.numberClass.splice(i, 1, "lightBlue");
                this.data[i].tag = "out";
              } else if (this.numberClass[i] == "lightBlue") {
                this.numberClass.splice(i, 1, "blue");
                this.data[i].tag = "in";
              }
            },
            goComp: function() {
              qAndA.questions = [qAndA.questions[0]];
              qAndA.answers = [qAndA.answers[0]];
              qAndA.tags = [];
              this.data.forEach(e => {
                qAndA.questions.push("なぜ"+e.question+"?");
                qAndA.answers.push(e.answer);
                qAndA.tags.push(e.tag);
              });
              qAndA.memo = this.memo;
              qAndA.success = this.success;
              updateData(qAndA, function(){
                myNavigator.bringPageTop("result.html",{
                  data: {
                    qAndA: qAndA,
                    recode: true,
                  }
                })
              });
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_memo1.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFFFFF;"></div>
    <div id="jobhunting_memo1" class="jobhunting_memo1" v-cloak>
      <div class="jobhunting_memo1__header">
        <span>▼</span>時期ごとに頑張ったことを記入しよう
        <!-- <img src="images/各種ボタン/break_ボタン.png" @click="openModal"> -->
      </div>
      <!-- 大学１〜４ -->
      <div class="jobhunting_memo1__folder" v-for="item in defo_memo" :key="item.header">
        <div class="jobhunting_memo1__folder--header1"><input type="text" v-model="item.header" readonly></div>
        <div class="jobhunting_memo1__folder--content">
          <div>1.<input type="text" placeholder="ああああああああああ" v-model="item.content1"></div>
          <div>2.<input type="text" v-model="item.content2"></div>
          <div>3.<input type="text" v-model="item.content3"></div>
        </div>
      </div>
      <!-- 追加 -->
      <div class="jobhunting_memo1__folder" v-for="(item, index) in memo" :key="item.header">
        <div class="jobhunting_memo1__folder--header2"><input type="text" v-model="item.header" placeholder="学年/時期を入力"></div>
        <div class="jobhunting_memo1__folder--content">
          <button class="jobhunting_memo1__x" @click="removeMemo(index)">×</button>
          <div>1.<input type="text" placeholder="ああああああああああ" v-model="item.content1"></div>
          <div>2.<input type="text" v-model="item.content2"></div>
          <div>3.<input type="text" v-model="item.content3"></div>
        </div>
      </div>
      <div class="jobhunting_memo1__btn">
        <a @click="addMemo"><img src="images/2021_02_25_新素材/jobhunting_memo1_add.png"></a>
        <button @click="nextButton">次へ</button>
      </div>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">保存して中断しますか？</p>
        <p>中断後は<span>アーカイブ</span>から再開できます。</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">中断</button>
          <button class="overlay__save--nobtn" @click="closeModal">戻る</button>
        </div>
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        new Vue({
          el: '#jobhunting_memo1',
          data: {
            showSavingModal: false,
            defo_memo: [
              {
                header: "大学1年生",
                content1: "",
                content2: "",
                content3: "",
              },
              {
                header: "大学2年生",
                content1: "",
                content2: "",
                content3: "",
              },
              {
                header: "大学3年生",
                content1: "",
                content2: "",
                content3: "",
              },
              {
                header: "大学4年生",
                content1: "",
                content2: "",
                content3: "",
              }
            ],
            memo: [],
          },
          methods: {
            addMemo: function() {
              this.memo.push({header: "", content1: "", content2: "", content3: ""});
            },
            removeMemo: function(num) {
              this.memo.splice(num,1);
            },
            openModal: function() {
              this.showSavingModal = true;
            },
            nextButton: function() {
              const t = this;
              var wp = new WellPoint();
              wp.contents = t.defo_memo.concat(t.memo);
              var isEmpty = true;
              wp.contents.forEach((e) => {
                if(e.content1 != "" || e.content2 != "" || e.content3 != "") {
                  isEmpty = false;
                }
              });
              if(isEmpty && !DEBUG_MODE) {
                ons.notification.toast("どれか一つは書いてください", {timeout: 2000, animation: "fall"});
                return;
              }
              if(DEBUG_MODE) {
                myNavigator.bringPageTop('jobhunting_story.html',{
                  data: {
                    wp:wp
                  }
                });
              } else {
                setNewWellPoint(wp, function(id) {
                  wp.id = id;
                  myNavigator.bringPageTop('jobhunting_story.html', {
                    data: {
                      wp: wp,
                    }
                  });
                });
              }
            },
            savingButton: function() {
              WellPoint(id, this.defo_memo.concat(this.memo));
              // TODO: データベース挿入
              myNavigator.resetToPage('index.html');
            },
            closeModal: function() {
              this.showSavingModal = false;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_memo3.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFFFFF;"></div>
    <div id="jobhunting_memo3" class="jobhunting_memo1" v-cloak>
      <div class="jobhunting_memo1__header">
        <span>▼</span>一番思い入れのある出来事を選ぼう
        <!-- <img src="images/各種ボタン/break_ボタン.png" @click="openModal"> -->
      </div>
      <div class="jobhunting_memo1__folder" v-for="(item, index) in memo" :key="item.header">
        <div class="jobhunting_memo1__folder--header1"><input type="text" v-model="item.header" readonly></div>
        <div class="jobhunting_memo1__folder--content">
          <div v-if="item.content1 != ''">
            <input type="radio" :id="item.content1" :value="index*3" v-model="picked">
            <label :for="item.content1">{{ item.content1 }}</label>
            <hr>
          </div>
          <div v-if="item.content2 != ''">
            <input type="radio" :id="item.content2" :value="index*3 + 1" v-model="picked">
            <label :for="item.content2">{{ item.content2 }}</label>
            <hr>
          </div>
          <div v-if="item.content3 != ''">
            <input type="radio" :id="item.content3" :value="index*3 + 2" v-model="picked">
            <label :for="item.content3">{{ item.content3 }}</label>
            <hr>
          </div>
        </div>
      </div>
      <div class="jobhunting_memo1__btn">
        <button @click="nextButton">この出来事に決定</button>
      </div>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">保存して中断しますか？</p>
        <p>中断後は<span>アーカイブ</span>から再開できます。</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">中断</button>
          <button class="overlay__save--nobtn" @click="closeModal">戻る</button>
        </div>
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        console.log(myNavigator.topPage.data);
        var wp = myNavigator.topPage.data.wp ?? new WellPoint();
        new Vue({
          el: '#jobhunting_memo3',
          data: {
            showSavingModal: false,
            picked: "",
            memo: wp.contents,
          },
          methods: {
            openModal: function() {
              this.showSavingModal = true;
            },
            nextButton: function() {
              console.log(this.picked);
              if(this.picked === "" && !DEBUG_MODE) {
                ons.notification.toast('どれか一つを選択してください', {animation: 'fall', timeout: 1000});
                return;
              }
              wp.useNumber = this.picked;
              if(!DEBUG_MODE) {
                updateWellPoint(wp);
              }
              var theme = "";
              const num = wp.useNumber / 3;
              switch(wp.useNumber % 3) {
                case 0:
                  theme = wp.contents[num].content1;
                  break;
                case 1:
                  theme = wp.contents[num].content2;
                  break;
                case 2:
                  theme = wp.contents[num].content3;
                  break;
              }
              if(DEBUG_MODE) {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    theme: theme,
                    analyzeid: "eJ7lVVwlve65wc2NAmEY",
                  }
                });
                return;
              } else {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    theme: theme,
                    analyzeid: wp.analyzeid,
                  }
                });
              }
            },
            savingButton: function() {
              // TODO: データベース
              myNavigator.resetToPage('index.html');
            },
            closeModal: function() {
              this.showSavingModal = false;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_memo4.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFFFFF;"></div>
    <div id="jobhunting_memo4" class="jobhunting_memo1">
      <!-- header -->
      <div class="jobhunting_memo1__header">
        <span>▼</span>選んだ出来事について整理しよう
        <img src="images/各種ボタン/break_ボタン.png" @click="openModal">
      </div>
      <!-- title -->
      <div class="jobhunting_memo1__5w-title">
        {{ title }}
      </div>
      <!-- contents -->
      <div class="jobhunting_memo1__5w">
        <div class="jobhunting_memo1__5w-contents">
          <p>いつからいつごろの出来事？</p>
          <textarea v-model="when"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>どこで？</p>
          <textarea v-model="where"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>だれと？(自分の立場も合わせて書こう！)</p>
          <textarea v-model="who"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>何を？</p>
          <textarea v-model="what"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>どのように？</p>
          <textarea v-model="how"></textarea>
        </div>
      </div>
      <!-- button -->
      <div class="jobhunting_memo1__btn">
        <button @click="nextButton">整理できた！</button>
      </div>
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal"> <!-- modal -->
        <p class="overlay__save--string">保存して中断しますか？</p>
        <p>中断後は<span>アーカイブ</span>から再開できます。</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">中断</button>
          <button class="overlay__save--nobtn" @click="closeModal">戻る</button>
        </div>
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var theme = myNavigator.topPage.data.theme ?? "Empty";
        var analyzeid = myNavigator.topPage.data.analyzeid ?? "eJ7lVVwlve65wc2NAmEY";
        new Vue({
          el: '#jobhunting_memo4',
          data: {
            title: theme,
            when: "",
            where: "",
            who: "",
            what: "",
            how: "",
            showSavingModal: false,
          },
          methods: {
            openModal: function() {
              this.showSavingModal = true;
            },
            closeModal: function() {
              this.showSavingModal = false;
            },
            nextButton: function() {
              if((this.when === "" || this.where === "" || this.who === "" || this.what === "" || this.how === "") && !DEBUG_MODE) {
                ons.notification.toast("全て入力してください", {timeout: 2000, animation: "fall"});
                return;
              }
              var event = new MyEvent();
              event.analyzeid = analyzeid;
              event.title = this.title;
              event.color = "jobhunting";
              event.when = this.when;
              event.where = this.where;
              event.who = this.who;
              event.what = this.what;
              event.how = this.how;
              event.complete = true;
              event.uid = firebase.auth().currentUser.uid;
              if(!DEBUG_MODE) {
                event.id = setNewMyEvent(event);
              }
              
              var qAndA = new QAndA();
              qAndA.questions.push("ガクチカ");
              qAndA.answers.push(this.title);
              qAndA.uid = firebase.auth().currentUser.uid;
              qAndA.category = [];
              qAndA.color = "jobhunting";
              qAndA.id = analyzeid;
              localStorage.setItem("tutorial_finished", "true");
              if(DEBUG_MODE) {
                myNavigator.bringPageTop('jobhunting_story.html', {data: {
                  qAndA: qAndA,
                  storyNum: 12,
                }});
              } else {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    qAndA: qAndA,
                    storyNum: 12,
                  }
                });
              }
            },
            savingButton: function() {
              // TODO: データベース
              myNavigator.resetToPage('index.html');
            },
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_analyze.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFFFFF;"></div>
    <div id="jobhunting_analyze" class="jobhunting_memo1">
      <!-- header -->
      <div class="jobhunting_memo1__header">
        <span>▼</span>分析の結果を参考に考えてみよう
        <!-- <img src="images/各種ボタン/break_ボタン.png" @click="openModal"> -->
      </div>
      <!-- contents -->
      <div class="jobhunting_memo1__5w">
        <div class="jobhunting_memo1__5w-contents">
          <p>あなたの強みはどこにありそう？</p>
          <textarea v-model="contents[0]"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>あなたの強みはどんなことに活かせそう？</p>
          <textarea v-model="contents[1]"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>この出来事の中で大切だった・大事にしていたことは?</p>
          <textarea v-model="contents[2]"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>一番工夫したポイントは？</p>
          <textarea v-model="contents[3]"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>この出来事で悪かったことは?</p>
          <textarea v-model="contents[4]"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-contents">
          <p>今回の分析で考えたりていないことは?</p>
          <textarea v-model="contents[5]"></textarea>
        </div>
      </div>
      <!-- memo -->
      <textarea placeholder="フリーメモ" class="jobhunting_memo1__memo" v-model="memo"></textarea>
      <!-- button -->
      <div class="jobhunting_memo1__btn">
        <button @click="nextButton">考えられた！</button>
      </div>
      <!-- result -->
      <div class="jobhunting_memo1__show-result--hoge" :class="showResultClass ? 'jobhunting_memo1__show-result--on' : 'jobhunting_memo1__show-result--off'" @click="showResult">
        <img src="images/2021_02_25_新素材/jobhunting_ポップアップ.png">
        <p v-if="showResultClass === true">考察に戻る</p>
        <p v-if="showResultClass === false">分析結果を見る</p>
      </div>
      <div class="result" style="background-color: #E8F6FD;" :class="showResultClass ? 'jobhunting_memo1__result--on' : 'jobhunting_memo1__result--off'">
        <p class="result__theme">{{ theme }}</p>
        <div v-for="index in answers.length-1" class="items">
          <p :class='tags[index-1] == "" ? defoClass : (tags[index-1] == "out" ? lightClass : blueClass)'>{{ index }}</p>
          <p>{{ questions[index] }}</p>
          <p>{{ answers[index] }}</p>
        </div>
      </div>
      <!-- savingModal -->
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal"> <!-- modal -->
        <p class="overlay__save--string">保存して中断しますか？</p>
        <p>中断後は<span>アーカイブ</span>から再開できます。</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">中断</button>
          <button class="overlay__save--nobtn" @click="closeModal">戻る</button>
        </div>
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');
      ons.getScriptPage().onInit = function() {
        var consideration = new Consideration();
        var test = new QAndA();
        test.questions = ["あ","あ"];
        test.answers = ["い","い"];
        test.tags = ["in"];
        var qAndA = myNavigator.topPage.data.qAndA ?? test;
        new Vue({
          el: '#jobhunting_analyze',
          data: {
            contents: [
              "",
              "",
              "",
              "",
              "",
              "",
            ],
            showSavingModal: false,
            theme: qAndA.answers[0],
            questions: qAndA.questions,
            answers: qAndA.answers,
            tags: qAndA.tags,
            memo: "",
            defoClass: "defo",
            lightClass: "lightBlue",
            blueClass: "blue",
            showResultClass: false,
          },
          methods: {
            openModal: function() {
              this.showSavingModal = true;
            },
            closeModal: function() {
              this.showSavingModal = false;
            },
            nextButton: function() {
              if((this.contents[0] === "" || this.contents[1] === "" || this.contents[2] === "" || this.contents[3] === "" || this.contents[4] === "" || this.contents[5] === "") && !DEBUG_MODE) {
                ons.notification.toast("全て入力してください", {timeout: 2000, animation: "fall"});
                return;
              }
              consideration.analyzeid = qAndA.id;
              consideration.contents = this.contents;
              if(!DEBUG_MODE) {
                consideration.id = setNewConsideration(consideration);
              }
              qAndA.memo = this.memo;
              if(!DEBUG_MODE) {
                updateData(qAndA);
              }
              if(DEBUG_MODE) {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    analyzeid: "eJ7lVVwlve65wc2NAmEY",
                    storyNum: 23,
                  }
                });
              } else {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    analyzeid: qAndA.id,
                    storyNum: 23,
                  }
                });
              }
            },
            savingButton: function() {
              // TODO: データベース
              myNavigator.resetToPage('index.html');
            },
            showResult: function() {
              this.showResultClass = !this.showResultClass;
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_gakuchika.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFFFFF;"></div>
    <div id="jobhunting_gakuchika" class="jobhunting_memo1" v-cloak>
      <!-- header -->
      <div class="jobhunting_memo1__header">
        <span>▼</span>ガクチカを書いてみよう
        <img src="images/各種ボタン/break_ボタン.png" @click="openModal">
      </div>
      <!-- contents -->
      <div class="jobhunting_memo1__5w">
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>結論 ＜どんなことをしたのか＞</p>
          <textarea v-model="contents[0]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ contents[0].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>背景 ＜どんな状況だったのか＞</p>
          <textarea v-model="contents[1]" placeholder="人数/役職/目標/期間などについて説明しよう"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ contents[1].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>課題 ＜何を解決すべきと捉えたのか＞</p>
          <textarea v-model="contents[2]" placeholder="困難だったこと/問題だったことや、そう考えた理由を書こう。"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ contents[2].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>解決策 ＜課題をどのように工夫して解決したのか＞</p>
          <textarea v-model="contents[3]" placeholder="↑を解決するために行った取り組みや、なぜそうしたのかを書こう。"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ contents[3].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>まとめ ＜出来事を通して、自分はどんな人と言えるか＞</p>
          <textarea v-model="contents[4]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ contents[4].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-total">TOTAL[{{ contents[0].length + contents[1].length + contents[2].length + contents[3].length + contents[4].length }}]</div>
      </div>
      <!-- button -->
      <div class="jobhunting_memo1__btn">
        <button @click="nextButton">完了</button>
      </div>
      <!-- result -->
      <div :class="showResultClass ? 'jobhunting_memo1__show-result--on' : 'jobhunting_memo1__show-result--off'">
        <img @click="showResult" src="images/2021_02_25_新素材/jobhunting_ポップアップ.png">
        <a style="text-decoration: none;" @click="showContent(0)" :class="contentClass0 ? 'jobhunting_memo1__result__title--on' : 'jobhunting_memo1__result__title--off'">出来事整理</a>｜
        <a style="text-decoration: none;" @click="showContent(1)" :class="contentClass1 ? 'jobhunting_memo1__result__title--on' : 'jobhunting_memo1__result__title--off'">分析</a>｜
        <a style="text-decoration: none;" @click="showContent(2)" :class="contentClass2 ? 'jobhunting_memo1__result__title--on' : 'jobhunting_memo1__result__title--off'">考察</a>
      </div>
      
      <!-- 出来事整理 -->
      <div class="jobhunting_memo1" :class="contentClass0 ? 'jobhunting_memo1__result--on' : 'jobhunting_memo1__result--off'" style="background-color: #FFF;">
        <div class="jobhunting_memo1__5w-title">
          {{ qAndA[0].answers[0] }}
        </div>
        <div class="jobhunting_memo1__5w">
          <div class="jobhunting_memo1__5w-contents">
            <p>いつからいつごろの出来事？</p>
            <textarea v-model="event[0].when" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>どこで？</p>
            <textarea v-model="event[0].where" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>だれと？(自分の立場も合わせて書こう！)</p>
            <textarea v-model="event[0].who" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>何を？</p>
            <textarea v-model="event[0].what" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>どのように？</p>
            <textarea v-model="event[0].how" readonly></textarea>
          </div>
        </div>
      </div>
      <!-- 分析 -->
      <div class="result" style="background-color: #E8F6FD;" :class="contentClass1 ? 'jobhunting_memo1__result--on' : 'jobhunting_memo1__result--off'">
        <p class="result__theme">{{ qAndA[0].answers[0] }}</p>
        <div v-for="index in qAndA[0].tags.length" class="items">
          <p :class='qAndA[0].tags[index-1] == "" ? defoClass : (qAndA[0].tags[index-1] == "out" ? lightClass : blueClass)'>{{ index }}</p>
          <p>{{ qAndA[0].questions[index] }}</p>
          <p>{{ qAndA[0].answers[index] }}</p>
        </div>
      </div>
      <!-- 考察 -->
      <div class="jobhunting_memo1" :class="contentClass2 ? 'jobhunting_memo1__result--on' : 'jobhunting_memo1__result--off'" style="background-color: #FFF;">
        <div class="jobhunting_memo1__5w-title">
          {{ qAndA[0].answers[0] }}
        </div>
        <div class="jobhunting_memo1__5w">
          <div class="jobhunting_memo1__5w-contents">
            <p>あなたの強みはどこにありそう？</p>
            <textarea v-model="consideration[0].contents[0]" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>あなたの強みはどんなことに活かせそう？</p>
            <textarea v-model="consideration[0].contents[1]" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>この出来事の中で大切だった・大事にしていたことは?</p>
            <textarea v-model="consideration[0].contents[2]" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>一番工夫したポイントは？</p>
            <textarea v-model="consideration[0].contents[3]" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>この出来事で悪かったことは?</p>
            <textarea v-model="consideration[0].contents[4]" readonly></textarea>
          </div>
          <div class="jobhunting_memo1__5w-contents">
            <p>今回の分析で考えたりていないことは?</p>
            <textarea v-model="consideration[0].contents[5]" readonly></textarea>
          </div>
        </div>
      </div>

      <!-- savingModal -->
      <div class="overlay__save" v-show="showSavingModal" @click="closeModal">
        <p class="overlay__save--string">保存して中断しますか？</p>
        <p>中断後は<span>アーカイブ</span>から再開できます。</p>
        <div>
          <button class="overlay__save--yesbtn" @click="savingButton">中断</button>
          <button class="overlay__save--nobtn" @click="closeModal">戻る</button>
        </div>
      </div>
    </div>
    <script>
      var myNavigator = document.querySelector('#myNavigator');

      ons.getScriptPage().onShow = function() {
        var id = myNavigator.topPage.data.analyzeid ?? "eJ7lVVwlve65wc2NAmEY";
        var vue = new Vue({
          el: '#jobhunting_gakuchika',
          data: {
            contents: [
              "",
              "",
              "",
              "",
              "",
            ],
            showSavingModal: false,
            qAndA: [],
            event: [],
            consideration: [],
            defoClass: "defo",
            lightClass: "lightBlue",
            blueClass: "blue",
            showResultClass: false,
            contentClass0: false,
            contentClass1: false,
            contentClass2: false,
          },
          created: function() {
            var t = this;
            t.qAndA = getQuestionAndAnswerFromId(id);
            t.event = getMyEventFromAnalyzeid(id);
            t.consideration = getConsiderationFromAnalyzeid(id);
          },
          methods: {
            openModal: function() {
              this.showSavingModal = true;
            },
            closeModal: function() {
              this.showSavingModal = false;
            },
            nextButton: function() {
              if((this.contents[0] === "" || this.contents[1] === "" || this.contents[2] === "" || this.contents[3] === "" || this.contents[4] === "") && !DEBUG_MODE) {
                ons.notification.toast("全て入力してください", {timeout: 2000, animation: "fall"});
                return;
              }
              var gakuchika = new Gakuchika();
              gakuchika.analyzeid = id;
              gakuchika.title = this.qAndA[0].answers[0];
              gakuchika.color = this.qAndA.color;
              gakuchika.contents = this.contents;
              gakuchika.complete = true;
              gakuchika.uid = firebase.auth().currentUser.uid;
              if(!DEBUG_MODE) {
                gakuchika.id = setNewGakuchika(gakuchika);
              }
              if(gakuchika.color === "jobhunting") {
                myNavigator.bringPageTop('jobhunting_story.html', {
                  data: {
                    storyNum: 30,
                  }
                });
              } else {
                myNavigator.resetToPage('index.html');
              }
            },
            savingButton: function() {
              // TODO: データベース
              myNavigator.resetToPage('index.html');
            },
            showResult: function() {
              if(this.showResultClass){
                this.showResultClass = false;
                this.contentClass0 = false;
                this.contentClass1 = false;
                this.contentClass2 = false;
              } else {
                this.showResultClass = true;
                this.contentClass0 = false;
                this.contentClass1 = true;
                this.contentClass2 = false;
              }
            },
            showContent: function(num) {
              this.showResultClass = true;
              switch(num) {
                case 0:
                  console.log("0");
                  this.contentClass0 = true;
                  this.contentClass1 = false;
                  this.contentClass2 = false;
                  break;
                case 1:
                console.log("1");
                  this.contentClass0 = false;
                  this.contentClass1 = true;
                  this.contentClass2 = false;
                  break;
                case 2:
                console.log("2");
                  this.contentClass0 = false;
                  this.contentClass1 = false;
                  this.contentClass2 = true;
                  break;
              }
            }
          }
        });
      }
    </script>
  </ons-page>
</template>

<template id="result_memo.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFF;"></div>
    <div id="result_memo" class="jobhunting_memo1 result_memo" v-cloak>
      <!-- header -->
      <div class="result_memo__header">
        <img class="result_memo__header-back" src="images/2021_02_25_新素材/archive_back.png" @click="back_button">
        <div class="result_memo__header-str">{{ event.title }}</div>
        <img class="result_memo__header-edit" src="images/分析カテゴリ追加時_素材/edit_object.png" v-show="event.complete" @click="goEdit">
      </div>
      <!-- category -->
      <div>
        {{ category }}
      </div>
      <!-- contents -->
      <div v-if="event.complete">
        <div class="jobhunting_memo1__5w">
          <div class="jobhunting_memo1__5w-gakuchika">
            <p>いつ？</p>
            <textarea readonly>{{ event.when }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-gakuchika">
            <p>どこで？</p>
            <textarea readonly>{{ event.where }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-gakuchika">
            <p>だれが？だれと？</p>
            <textarea readonly>{{ event.who }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-gakuchika">
            <p>何を？</p>
            <textarea readonly>{{ event.what }}</textarea>
          </div>
          <div class="jobhunting_memo1__5w-gakuchika">
            <p>どのように？</p>
            <textarea readonly>{{ event.how }}</textarea>
          </div>
        </div>
      </div>
      <div v-else>
        <div class="result_memo__str">分析の芽は記録されていません</div>
        <button class="result_memo__button" @click="startMemo">記録する</button>
      </div>
      <div class="result__space"></div>
      <!-- float button -->
      <result-float-button :id="event.analyzeid" :title="event.title" :color="event.color" :active="0"></result-float-button>
    </div>
    <script>
      var debug = new MyEvent();
      ons.getScriptPage().onInit = function() {
        var myNavigator = document.querySelector('#myNavigator');

        new Vue({
          el: '#result_memo',
          data: {
            event: myNavigator.topPage.data.bunsekinome ?? debug,
            category: "",
          },
          created: function() {
            var t = this;
            switch(event.color) {
              case "future":
                t.category = "やりたいこと";
                break;
              case "task":
                t.category = "やりたくないこと";
                break;
              case "experience":
                t.category = "出来事・体験";
                break;
              case "hobby":
                t.category = "日常の小さな感情";
                break;
            }
          },
          methods: {
            back_button: function() {
              myNavigator.popPage();
            },
            startMemo: function() {
              myNavigator.pushPage("memo.html", {
                data: {
                  event: this.event,
                }
              });
            },
            goEdit: function() {
              myNavigator.pushPage("memoEdit.html",{
                data: {
                  bunsekinome: this.event,
                }
              });
            }
          },
        });
      }
    </script>
  </ons-page>
</template>

<template id="memoEdit.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFF;"></div>
    <div id="memoEdit" class="jobhunting_memo1 result_memo" v-cloak>
      <!-- header -->
      <div class="result_memo__header">
        <img class="result_memo__header-back" src="images/2021_02_25_新素材/archive_back.png" @click="back_button">
        <div class="result_memo__header-str">{{ event.title }}</div>
        <img class="result_memo__header-edit" src="images/分析カテゴリ追加時_素材/edit-finish_object.png" @click="saveButton">
      </div>
      <!-- category -->
      <div>
        {{ category }}
      </div>
      <!-- contents -->
      <div class="jobhunting_memo1__5w">
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>いつ？</p>
          <textarea v-model="event.when"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>どこで？</p>
          <textarea v-model="event.where"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>だれが？だれと？</p>
          <textarea v-model="event.who"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>何を？</p>
          <textarea v-model="event.what"></textarea>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>どのように？</p>
          <textarea v-model="event.how"></textarea>
        </div>
      </div>
      <div class="result__space"></div>
      <div class="edit_caution" v-show="overlay">
        <div class="edit_caution__str">編集内容が確定されていません。<br>保存せずに一覧に戻りますか？</div>
        <div class="edit_caution__button">
          <button class="edit_caution__button--orange" @click="noSave">戻る</button>
          <button class="edit_caution__button--white" @click="overlay = false">いいえ</button>
        </div>
      </div>
    </div>
    <script>
      var debug = new MyEvent();
      ons.getScriptPage().onInit = function() {
        var myNavigator = document.querySelector('#myNavigator');
        var pre_event = Object.assign({}, myNavigator.topPage.data.bunsekinome);

        new Vue({
          el: '#memoEdit',
          data: {
            event: myNavigator.topPage.data.bunsekinome ?? debug,
            category: "",
            overlay: false,
          },
          created: function() {
            var t = this;
            switch(event.color) {
              case "future":
                t.category = "やりたいこと";
                break;
              case "task":
                t.category = "やりたくないこと";
                break;
              case "experience":
                t.category = "出来事・体験";
                break;
              case "hobby":
                t.category = "日常の小さな感情";
                break;
            }
          },
          methods: {
            back_button: function() {
              this.overlay = true;
            },
            noSave: function() {
              this.event.when = pre_event.when;
              this.event.where = pre_event.where;
              this.event.who = pre_event.who;
              this.event.what = pre_event.what;
              this.event.how = pre_event.how;
              myNavigator.popPage();
            },
            saveButton: function() {
              updateMyEvent(this.event);
              myNavigator.popPage();
            }
          },
        });
      }
    </script>
  </ons-page>
</template>

<template id="result_gakuchika.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFF;"></div>
    <div id="result_gakuchika" class="jobhunting_memo1 result_memo" v-cloak>
      <!-- header -->
      <div class="result_memo__header">
        <img class="result_memo__header-back" src="images/2021_02_25_新素材/archive_back.png" @click="back_button">
        <div class="result_memo__header-str">{{ gakuchika.title }}</div>
        <img class="result_memo__header-edit" src="images/分析カテゴリ追加時_素材/edit_object.png" v-show="gakuchika.complete" @click="goEdit">
      </div>
      <!-- contents -->
      <div class="jobhunting_memo1__5w" v-if="gakuchika.complete">
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>結論 ＜どんなことをしたのか＞</p>
          <textarea readonly>{{ gakuchika.contents[0] }}</textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[0].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>背景 ＜どんな状況だったのか＞</p>
          <textarea readonly>{{ gakuchika.contents[1]}}</textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[1].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>課題 ＜何を解決すべきと捉えたのか＞</p>
          <textarea readonly>{{ gakuchika.contents[2] }}</textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[2].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>解決策 ＜課題をどのように工夫して解決したのか＞</p>
          <textarea readonly>{{ gakuchika.contents[3] }}</textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[3].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>まとめ ＜出来事を通して、自分はどんな人と言えるか＞</p>
          <textarea readonly>{{ gakuchika.contents[4] }}</textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[4].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-total">TOTAL[{{ gakuchika.contents[0].length + gakuchika.contents[1].length + gakuchika.contents[2].length + gakuchika.contents[3].length + gakuchika.contents[4].length }}]</div>
      </div>
      <div v-else>
        <div class="result_memo__str">まだガクチカがありません</div>
        <button class="result_memo__button" @click="startGakuchika">書いてみる！</button>
      </div>
      <result-float-button :id="gakuchika.analyzeid" :title="gakuchika.title" :color="gakuchika.color" :active="2"></result-float-button>
    </div>
    <div class="result__space"></div>
    <script>
      var test = new Gakuchika();
      // test.title = "あああ";
      // test.contents = ["あ","あ","あ","あ","あ"];
      console.log(test.toString());
      ons.getScriptPage().onInit = function() {
        var myNavigator = document.querySelector('#myNavigator');
        new Vue({
          el: '#result_gakuchika',
          data: {
            gakuchika: myNavigator.topPage.data.gakuchika ?? test,
          },
          methods: {
            back_button: function() {
              myNavigator.popPage();
            },
            startGakuchika: function() {
              myNavigator.pushPage("jobhunting_gakuchika.html",{
                data: {
                  analyzeid: this.gakuchika.analyzeid,
                },
              });
            },
            goEdit: function() {
              myNavigator.pushPage("gakuchikaEdit.html",{
                data: {
                  gakuchika: this.gakuchika,
                }
              });
            }
          },
        })
      }
    </script>
  </ons-page>
</template>

<template id="gakuchikaEdit.html">
  <ons-page>
    <div class="page__background" style="background-color: #FFF;"></div>
    <div id="gakuchikaEdit" class="jobhunting_memo1 result_memo" v-cloak>
      <!-- header -->
      <div class="result_memo__header">
        <img class="result_memo__header-back" src="images/2021_02_25_新素材/archive_back.png" @click="back_button">
        <div class="result_memo__header-str">{{ gakuchika.title }}</div>
        <img class="result_memo__header-edit" src="images/分析カテゴリ追加時_素材/edit-finish_object.png" @click="saveButton">
      </div>
      <!-- contents -->
      <div class="jobhunting_memo1__5w">
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>結論 ＜どんなことをしたのか＞</p>
          <textarea v-model="gakuchika.contents[0]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[0].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>背景 ＜どんな状況だったのか＞</p>
          <textarea v-model="gakuchika.contents[1]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[1].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>課題 ＜何を解決すべきと捉えたのか＞</p>
          <textarea v-model="gakuchika.contents[2]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[2].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>解決策 ＜課題をどのように工夫して解決したのか＞</p>
          <textarea v-model="gakuchika.contents[3]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[3].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-gakuchika">
          <p>まとめ ＜出来事を通して、自分はどんな人と言えるか＞</p>
          <textarea v-model="gakuchika.contents[4]"></textarea>
          <div class="jobhunting_memo1__5w-number">[{{ gakuchika.contents[4].length }}]</div>
        </div>
        <div class="jobhunting_memo1__5w-total">TOTAL[{{ gakuchika.contents[0].length + gakuchika.contents[1].length + gakuchika.contents[2].length + gakuchika.contents[3].length + gakuchika.contents[4].length }}]</div>
      </div>
      <div class="result__space"></div>
      <div class="edit_caution" v-show="overlay">
        <div class="edit_caution__str">編集内容が確定されていません。<br>保存せずに一覧に戻りますか？</div>
        <div class="edit_caution__button">
          <button class="edit_caution__button--orange" @click="noSave">戻る</button>
          <button class="edit_caution__button--white" @click="overlay = false">いいえ</button>
        </div>
      </div>
    </div>
    <script>
      var test = new Gakuchika();

      ons.getScriptPage().onInit = function() {
        var myNavigator = document.querySelector('#myNavigator');
        const pre_contents = myNavigator.topPage.data.gakuchika.contents.slice();

        new Vue({
          el: '#gakuchikaEdit',
          data: {
            gakuchika: myNavigator.topPage.data.gakuchika ?? test,
            overlay: false,
          },
          methods: {
            back_button: function() {
              this.overlay = true;
            },
            noSave: function() {
              this.gakuchika.contents = pre_contents;
              myNavigator.popPage();
            },
            saveButton: function() {
              console.log(this.gakuchika.toString());
              updateGakuchika(this.gakuchika);
              myNavigator.popPage();
            }
          },
        })
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_story.html">
  <ons-page>
    <div id="jobhunting_story" class="jobhunting_story" v-cloak>
      <div class="jobhunting_story__header">{{ titles[titleNum] }}<button class="jobhunting_story__skip" @click="skip" v-show="!buttonMode && !lastMode">SKIP</button></div>
      <div class="jobhunting_story__background">
        <div class="jobhunting_story__fukidashi" @click="next">
          <div class="jobhunting_story__reader">{{ reader }}</div>
          <div class="jobhunting_story__comment-wrapper">
            <div class="jobhunting_story__comment" v-html="comments[i]"></div>
            <div class="jobhunting_story__orange-button" v-show="buttonMode" @click="onButton1">{{ buttons[buttonNum][0] }}</div>
            <div class="jobhunting_story__orange-button" v-show="buttonMode" @click="onButton2">{{ buttons[buttonNum][1] }}</div>
            <a class="jobhunting_story__triangle-before" v-show="lastMode">{{ lastButtons[j] }}</a>
            <div class="jobhunting_story__triangle" v-show="!buttonMode"></div>
          </div>
        </div>
      </div>
      <div class="jobhunting_story__overlay" v-show="overlay" @click="closeOverlay">
        <div class="jobhunting_story__overlay-str1">保存して中断しますか？</div>
        <div class="jobhunting_story__overlay-str2">中断後はアーカイブから再開できます。</div>
        <div>
          <button class="jobhunting_story__overlay-button--orange" @click="save">中断</button>
          <button class="jobhunting_story__overlay-button--white" @click="closeOverlay">戻る</button>
        </div>
      </div>
    </div>
    <script>
      var vue;
      ons.getScriptPage().onInit = function() {
        var myNavigator = document.querySelector('#myNavigator');
        vue = new Vue({
          el: "#jobhunting_story",
          data: {
            i: 0,
            titles: [
              "STEP1 出来事整理 編",
              "STEP2 なぜなぜ分析 編",
              "STEP3 ガクチカ 編",
            ],
            titleNum: 0,
            reader: "テンちゃん",
            comments: [
              "来てくれてうれしいテン〜！！", // 0
              "これから、<br><br>過去の出来事を整理したうえで、<br><br>最終的にはガクチカの土台を作るところまで誘導していくから、", //1
              "頑張ってついてくるテンよ！", //2
              "<div class='jobhunting_story__triangle2'></div>今日はどれを考えるテン？", //3
              "ガクチカ は、<br><br><span class='jobhunting_story__comment--red'>学生時代に力を入れて取り組んだこと</span><br><br>テンね！",//4
              "まずは、<br><br>学生時代で思い入れのあることを書き出していくテン！",//5
              "なんでも大丈夫テンよ！",//6
              "友達と江ノ島まで自転車で行ったとか、<br><br>サークルの新歓イベントでたくさんの新入生に入会してもらえたとか…",//7
              "たくさんかけたテンね！<br><br>すごいテン…！",//8
              "いま書き出した中から、<br><br>一番記憶に残っていることや頑張ったことを選ぶテン！",//9
              "", //10(テーマを入れるためonShowで指定)
              "それじゃあ、<br>出来事を整理していくテン〜！<br><br>5W1H形式でまとめるテンよ。",//11
              "いろいろと、<br>過去の出来事を整理できたかテンね？",//12
              "<div class='jobhunting_story__triangle2'></div>これから、当時の出来事をもとにして、自分自身を掘り下げていくテン！",//13
              "ここからは、<br><br><span class='jobhunting_story__comment--red'>なぜ？とくり返し自問自答</span>して、<br><br>自分自身を深掘りしていくテン！",//14
              "<div class='jobhunting_story__triangle2'></div>ちょっと大変かもだから、先輩の事例を見ることをおすすめするテン！",//15
              "最初の問いは、<br><br><span class='jobhunting_story__comment--red'>なぜそれに取り組んだのか？</span><br><br>テン！",//16
              "取り組んだ背景を答えるテンよ。<br><br>周りに言われたから…とかでもいいテン。",//17
              "その答えが、<br><br><span class='jobhunting_story__comment--red'>環境によるもの(外側)</span>なのか、<br><span class='jobhunting_story__comment--red'>自分の気持ち(内側)</span>なのかも考えるテン！",//18
              '例えば…<br>●親に言われたから→外側<br>●面白そうだったから→内側<br>とかテンね！<br>採用する人は、キミの人柄や価値観をみたいと思ってるテン！ガクチカで、それらを垣間見せるためにも、"内側=内面"を深掘ってほしいテン！',//19
              "いっぱい自分に向き合ってくれて、<br><br>ありがとうテン！",//20
              "このあとは、<br><br>いまの結果から自分を考察してみるテン！",//21
              "あともう一息テン…。<br><br>ここで、<br>自分の強みとかを見つけていくテンよ〜！",//22
              "当時のことや自分のことが、客観的にわかってきたテン？<br>ここで考えたことをもとに、自分の強みをガクチカっていう形で表現していくテン！<br>ガクチカ以外にも、面接とか自己PRにも活かせると思うテンよ～！",//23
              "<div class='jobhunting_story__triangle2'></div>これから、いままでの分析などをもとにして、ガクチカを書いてみるテン！",//24
              "ここからは、<br><br>フォーマットに沿ってガクチカを書いていくテン！",//25
              "いままでたくさん自分に向き合って得られたことをガクチカに表してほしいテン〜。",//26
              "<div class='jobhunting_story__triangle2'></div>ちょっと大変かもだから、先輩の事例を見ることをおすすめするテン！",//27
              "うまく書くコツは、<br><br>自分の出来事整理と、分析の結果・考察をよく読むことテン。",//28
              "自分の強みや軸はなんだろう？<br><br>って、考えながら書いていくテンよ〜！",//29
              "おつかれさまテン〜！！！ここまでよく頑張ったテン！さすがテン。<br>今回キミが作ったガクチカは、これからブラッシュアップしていくことでさらに輝いていくテン！",//30
            ],
            buttonNum: 0,
            buttons: [
              ['ガクチカ', "志望動機"],//3
              ["OK", "選びなおす"],//10
              ["続ける", "保存して休憩する"],//13
              ["先輩の分析を見る", "見ないでやってみる"],//15
              ["続ける", "保存して休憩する"],//24
              ["先輩のガクチカを見る", "見ないでやってみる"],//27
            ],
            j: 0,
            lastButtons: [
              "出来事を書き出す",
              "選ぶ",
              "出来事整理へ",
              "考察へ",
              "ガクチカへ",
              "FINISH",
            ],
            buttonMode: false,
            lastMode: false,
            overlay: false,
          },
          methods: {
            next: function() {
              console.log(this.i);
              if(this.buttonMode || this.i >= this.comments.length) return;
              switch(this.i) {
                case 2:
                  this.buttonMode = true;
                  break;
                case 6:
                case 8:
                case 10:
                case 21:
                case 28:
                  this.lastMode = true;
                  break;
                case 7:
                  myNavigator.pushPage("jobhunting_memo1.html");
                  this.j++;
                  this.lastMode = false;
                  break;
                case 9:
                  myNavigator.pushPage("jobhunting_memo3.html", {
                    data: myNavigator.topPage.data,
                  });
                  this.j++;
                  this.lastMode = false;
                  break;
                case 11:
                  myNavigator.pushPage("jobhunting_memo4.html", {
                    data: myNavigator.topPage.data,
                  });
                  this.j++;
                  this.lastMode = false;
                  break;
                case 12:
                case 14:
                case 23:
                case 26:
                  this.buttonMode = true;
                  this.buttonNum++;
                  break;
                case 13:
                case 24:
                  this.titleNum++;
                  break;
                case 19:
                  myNavigator.pushPage("jobhunting_story_number.html", {
                    data: myNavigator.topPage.data,
                  });
                  break;
                case 22:
                  myNavigator.pushPage("jobhunting_analyze.html", {
                    data: myNavigator.topPage.data,
                  });
                  this.j++;
                  this.lastMode = false;
                  break;
                case 29:
                  myNavigator.pushPage("jobhunting_gakuchika.html", {
                    data: myNavigator.topPage.data,
                  });
                  this.j++;
                  this.lastMode = false;
                  break;
                case 30:
                  myNavigator.resetToPage("index.html");
                  break;
              }

              this.i++;
            },
            onButton1: function() {
              switch(this.i) {
                case 15:
                case 27:
                  window.open("https://noteappm.wixsite.com/policies", "_self", "location=yes");//TODO: URL変更
                  break;
                default:
                  this.buttonMode = false;
                  break;
              }
            },
            onButton2: function() {
              switch(this.i) {
                case 3:
                  ons.notification.toast("Coming Soon...", {timeout: 2000, animation: "fall"});
                  break;
                case 10:
                  myNavigator.bringPageTop("jobhunting_memo3.html");
                  this.buttonNum--;
                  break;
                case 13:
                case 24:
                  this.overlay = true;
                  break;
                default:
                  this.buttonMode = false;
                  break;
              }
            },
            closeOverlay: function() {
              this.overlay = false;
            },
            save: function() {
              myNavigator.resetToPage('index.html');
            },
            skip: function() {
              if(this.i < 3) {
                this.i = 3;
                this.buttonMode = true;
              } else if(this.i < 7) {
                this.i = 7;
                this.next();
              } else if(this.i < 9) {
                this.i = 9;
                this.next();
              } else if(this.i < 13) {
                this.i = 13;
                this.buttonMode = true;
                this.buttonNum++;
              } else if(this.i < 15) {
                this.i = 15;
                this.buttonMode = true;
                this.buttonNum++;
              } else if(this.i < 19) {
                this.i = 19;
                this.next();
              } else if(this.i < 22) {
                this.i = 22;
                this.next();
              } else if(this.i < 24) {
                this.i = 24;
                this.buttonMode = true;
                this.buttonNum++;
              } else if(this.i < 27) {
                this.i = 27;
                this.buttonMode = true;
                this.buttonNum++;
              } else if(this.i < 29) {
                this.i = 29;
                this.next();
              }
            },
          },
        });
      }
      ons.getScriptPage().onShow = function() {
        if(myNavigator.topPage.data.storyNum) vue.i = myNavigator.topPage.data.storyNum;
        switch(vue.i) {
          case 10:
            vue.comments[10] = "<div class='jobhunting_story__triangle2'></div>この「" + myNavigator.topPage.data.theme + "」という出来事にするテン？";
            vue.buttonMode = true;
            vue.buttonNum++;
            break;
          case 14:
            vue.buttonMode = true;
            vue.buttonNum++;
            break;
          case 30:
            vue.lastMode = true;
        }
      }
    </script>
  </ons-page>
</template>

<template id="jobhunting_story_number.html">
  <ons-page>
    <div id="jobhunting_story_number" class="jobhunting_story_number">
      <div class="jobhunting_story_number__header">
        <div>
          自分の<span class="jobhunting_story_number__red">外</span>側のことなのか<span class="jobhunting_story_number__red">内</span>側のことなのかによって、左端の<span class="jobhunting_story_number__red">ナンバーボタン</span>の色を変えよう。
        </div>
      </div>
      <div class="jobhunting_story_number__content1">
        <div class="jobhunting_story_number__str1">
          <span class="jobhunting_story_number__bold">外：環境によるもの。</span>当時の状況や一般的な事実など。<br><br>
          <span class="jobhunting_story_number__bold">内：自分の気持ち。</span>考えや感情・意思、体験など。
        </div>
      </div>
      <div class="jobhunting_story_number__content2">
        <div class="jobhunting_story_number__str2">▼外側=1回タップ(水色)</div>
        <div class="items">
          <p class="lightBlue">1</p>
          <p>なぜ取り組んだの？</p>
          <p>テキスト</p>
        </div>
        <div class="jobhunting_story_number__str2">▼内側=2回タップ(青色)</div>
        <div class="items">
          <p class="blue">1</p>
          <p>なぜ取り組んだの？</p>
          <p>テキスト</p>
        </div>
        <button @click="goNext" class="jobhunting_story_number__button">分析へ進む</button>
      </div>
    </div>
    <script>
      ons.getScriptPage().onInit = function() {
        var myNavigator = document.querySelector('#myNavigator');
        new Vue({
          el: '#jobhunting_story_number',
          methods: {
            goNext: function() {
              myNavigator.pushPage('start.html', {data: myNavigator.topPage.data});
            }
          }
        });
      }
    </script>
  </ons-page>
</template>